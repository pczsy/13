<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修VUE创建播发器组件并调用' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>VUE创建播发器组件并调用</center></div><div class='banquan'>原文出处:本文由博客园博主少年。提供。<br/>
原文连接:https://www.cnblogs.com/ouyangkai/p/11549673.html</div><br>
    <p style="text-align: center;">欢迎来到我的友链小屋</p>
<div class="friendsbox">&nbsp;</div>
<p>首先用vue-cli创建前端项目</p>
<p>参考：<a href="https://www.cnblogs.com/ouyangkai/p/11549290.html">https://www.cnblogs.com/ouyangkai/p/11549290.html</a></p>
<p>新建play.vue文件</p>
<p><img src="./images/VUE创建播发器组件并调用0.png" alt="" /></p>
<p>编写play组件</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('360b4594-dbcb-4669-9477-642fbd3c17f4')"><img id="code_img_closed_360b4594-dbcb-4669-9477-642fbd3c17f4" class="code_img_closed" src="./images/VUE创建播发器组件并调用1.png" alt="" /><img id="code_img_opened_360b4594-dbcb-4669-9477-642fbd3c17f4" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('360b4594-dbcb-4669-9477-642fbd3c17f4',event)" src="./images/VUE创建播发器组件并调用2.png" alt="" />
<div id="cnblogs_code_open_360b4594-dbcb-4669-9477-642fbd3c17f4" class="cnblogs_code_hide">
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;el-row&gt;
      &lt;el-col :span=<span style="color: #800000;">"</span><span style="color: #800000;">4</span><span style="color: #800000;">"</span>&gt;
        &lt;el-popover placement=<span style="color: #800000;">"</span><span style="color: #800000;">top-start</span><span style="color: #800000;">"</span> trigger=<span style="color: #800000;">"</span><span style="color: #800000;">hover</span><span style="color: #800000;">"</span>&gt;
          &lt;div style=<span style="color: #800000;">"</span><span style="color: #800000;">text-align: center</span><span style="color: #800000;">"</span>&gt;
            &lt;el-<span style="color: #000000;">progress
              color</span>=<span style="color: #800000;">"</span><span style="color: #800000;">#67C23A</span><span style="color: #800000;">"</span><span style="color: #000000;">
              type</span>=<span style="color: #800000;">"</span><span style="color: #800000;">circle</span><span style="color: #800000;">"</span><span style="color: #000000;">
              :percentage</span>=<span style="color: #800000;">"</span><span style="color: #800000;">music.volume</span><span style="color: #800000;">"</span>
            &gt;&lt;/el-<span style="color: #000000;">progress
            </span>&gt;&lt;br /&gt;
            &lt;el-<span style="color: #000000;">button
              @click</span>=<span style="color: #800000;">"</span><span style="color: #800000;">changeVolume(-10)</span><span style="color: #800000;">"</span><span style="color: #000000;">
              icon</span>=<span style="color: #800000;">"</span><span style="color: #800000;">el-icon-minus</span><span style="color: #800000;">"</span><span style="color: #000000;">
              circle
            </span>&gt;&lt;/el-button&gt;
            &lt;el-<span style="color: #000000;">button
              @click</span>=<span style="color: #800000;">"</span><span style="color: #800000;">changeVolume(10)</span><span style="color: #800000;">"</span><span style="color: #000000;">
              icon</span>=<span style="color: #800000;">"</span><span style="color: #800000;">el-icon-plus</span><span style="color: #800000;">"</span><span style="color: #000000;">
              circle
            </span>&gt;&lt;/el-button&gt;
          &lt;/div&gt;
          &lt;el-<span style="color: #000000;">button
            @click</span>=<span style="color: #800000;">"</span><span style="color: #800000;">play</span><span style="color: #800000;">"</span><span style="color: #000000;">
            id</span>=<span style="color: #800000;">"</span><span style="color: #800000;">play</span><span style="color: #800000;">"</span><span style="color: #000000;">
            slot</span>=<span style="color: #800000;">"</span><span style="color: #800000;">reference</span><span style="color: #800000;">"</span><span style="color: #000000;">
            :icon</span>=<span style="color: #800000;">"</span><span style="color: #800000;">music.isPlay ? 'el-icon-refresh' : 'el-icon-caret-right'</span><span style="color: #800000;">"</span><span style="color: #000000;">
            circle
          </span>&gt;&lt;/el-button&gt;
        &lt;/el-popover&gt;
      &lt;/el-col&gt;
      &lt;el-col :span=<span style="color: #800000;">"</span><span style="color: #800000;">14</span><span style="color: #800000;">"</span> style=<span style="color: #800000;">"</span><span style="color: #800000;">padding-left: 20px</span><span style="color: #800000;">"</span>&gt;
        &lt;el-<span style="color: #000000;">slider
          @change</span>=<span style="color: #800000;">"</span><span style="color: #800000;">changeTime</span><span style="color: #800000;">"</span><span style="color: #000000;">
          :format</span>-tooltip=<span style="color: #800000;">"</span><span style="color: #800000;">formatTime</span><span style="color: #800000;">"</span><span style="color: #000000;">
          :max</span>=<span style="color: #800000;">"</span><span style="color: #800000;">music.maxTime</span><span style="color: #800000;">"</span><span style="color: #000000;">
          v</span>-model=<span style="color: #800000;">"</span><span style="color: #800000;">music.currentTime</span><span style="color: #800000;">"</span><span style="color: #000000;">
          style</span>=<span style="color: #800000;">"</span><span style="color: #800000;">width: 100%;</span><span style="color: #800000;">"</span>
        &gt;&lt;/el-slider&gt;
      &lt;/el-col&gt;
      &lt;el-<span style="color: #000000;">col
        :span</span>=<span style="color: #800000;">"</span><span style="color: #800000;">6</span><span style="color: #800000;">"</span><span style="color: #000000;">
        style</span>=<span style="color: #800000;">"</span><span style="color: #800000;">padding: 9px 0px 0px 10px;color:#909399;font-size: 13px</span><span style="color: #800000;">"</span>
      &gt;<span style="color: #000000;">
        {{ formatTime(music.currentTime) }}</span>/<span style="color: #000000;">{{ formatTime(music.maxTime) }}
      </span>&lt;/el-col&gt;
    &lt;/el-row&gt;
    &lt;audio <span style="color: #0000ff;">ref</span>=<span style="color: #800000;">"</span><span style="color: #800000;">music</span><span style="color: #800000;">"</span> loop autoplay&gt;
      &lt;source src=<span style="color: #800000;">"</span><span style="color: #800000;">../mp4/pkn0m-iuv0i.mp3</span><span style="color: #800000;">"</span> type=<span style="color: #800000;">"</span><span style="color: #800000;">audio/mpeg</span><span style="color: #800000;">"</span> /&gt;
    &lt;/audio&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;<span style="color: #000000;">
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
  data () {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> {
      music: {
        isPlay: </span><span style="color: #0000ff;">false</span><span style="color: #000000;">,
        currentTime: </span><span style="color: #800080;">0</span><span style="color: #000000;">,
        maxTime: </span><span style="color: #800080;">0</span><span style="color: #000000;">,
        volume: </span><span style="color: #800080;">100</span><span style="color: #000000;">
      }
    }
  },
  mounted () {
    </span><span style="color: #0000ff;">this</span>.$nextTick(() =&gt;<span style="color: #000000;"> {
      setInterval(</span><span style="color: #0000ff;">this</span>.listenMusic, <span style="color: #800080;">1000</span><span style="color: #000000;">)
    })
  },
  methods: {
    listenMusic () {
      </span><span style="color: #0000ff;">if</span> (!<span style="color: #0000ff;">this</span><span style="color: #000000;">.$refs.music) {
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;">
      }
      </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span><span style="color: #000000;">.$refs.music.readyState) {
        </span><span style="color: #0000ff;">this</span>.music.maxTime = <span style="color: #0000ff;">this</span><span style="color: #000000;">.$refs.music.duration
      }
      </span><span style="color: #0000ff;">this</span>.music.isPlay = !<span style="color: #0000ff;">this</span><span style="color: #000000;">.$refs.music.paused
      </span><span style="color: #0000ff;">this</span>.music.currentTime = <span style="color: #0000ff;">this</span><span style="color: #000000;">.$refs.music.currentTime
    },
    play () {
      </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span><span style="color: #000000;">.$refs.music.paused) {
        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.$refs.music.play()
      } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.$refs.music.pause()
      }
      </span><span style="color: #0000ff;">this</span>.music.isPlay = !<span style="color: #0000ff;">this</span><span style="color: #000000;">.$refs.music.paused
      </span><span style="color: #0000ff;">this</span>.$nextTick(() =&gt;<span style="color: #000000;"> {
        document.getElementById(</span><span style="color: #800000;">'</span><span style="color: #800000;">play</span><span style="color: #800000;">'</span><span style="color: #000000;">).blur()
      })
    },
    changeTime (time) {
      </span><span style="color: #0000ff;">this</span>.$refs.music.currentTime =<span style="color: #000000;"> time
    },
    changeVolume (v) {
      </span><span style="color: #0000ff;">this</span>.music.volume +=<span style="color: #000000;"> v
      </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.music.volume &gt; <span style="color: #800080;">100</span><span style="color: #000000;">) {
        </span><span style="color: #0000ff;">this</span>.music.volume = <span style="color: #800080;">100</span><span style="color: #000000;">
      }
      </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.music.volume &lt; <span style="color: #800080;">0</span><span style="color: #000000;">) {
        </span><span style="color: #0000ff;">this</span>.music.volume = <span style="color: #800080;">0</span><span style="color: #000000;">
      }
      </span><span style="color: #0000ff;">this</span>.$refs.music.volume = <span style="color: #0000ff;">this</span>.music.volume / <span style="color: #800080;">100</span><span style="color: #000000;">
    },
    formatTime (time) {
      let it </span>=<span style="color: #000000;"> parseInt(time)
      let m </span>= parseInt(it / <span style="color: #800080;">60</span><span style="color: #000000;">)
      let s </span>= parseInt(it % <span style="color: #800080;">60</span><span style="color: #000000;">)
      </span><span style="color: #0000ff;">return</span> (m &lt; <span style="color: #800080;">10</span> ? <span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span> : <span style="color: #800000;">''</span>) + parseInt(it / <span style="color: #800080;">60</span>) + <span style="color: #800000;">'</span><span style="color: #800000;">:</span><span style="color: #800000;">'</span> + (s &lt; <span style="color: #800080;">10</span> ? <span style="color: #800000;">'</span><span style="color: #800000;">0</span><span style="color: #800000;">'</span> : <span style="color: #800000;">''</span>) + parseInt(it % <span style="color: #800080;">60</span><span style="color: #000000;">)
    }
  }
}
</span>&lt;/script&gt;</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>以上代码直接复制保存即可</p>
<p>&nbsp;</p>
<p>&nbsp;引用组件，在app.vue 中的 script 导入组件，并且在components中声明</p>
<div class="cnblogs_code">
<pre><code>&lt;script&gt;<span style="color: #000000;">
import play </span><span style="color: #0000ff;">from</span> <span style="color: #800000;">'</span><span style="color: #800000;">../src/components/play</span><span style="color: #800000;">'</span><span style="color: #000000;">
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {

  name: </span><span style="color: #800000;">'</span><span style="color: #800000;">App</span><span style="color: #800000;">'</span><span style="color: #000000;">,
  components: {
    play
  }

}
</span>&lt;/script&gt;</pre>
</div>
<p>&nbsp;</p>
<p>在app.vue&nbsp; template 里面的div 里面添加自定义play组件</p>
<div class="cnblogs_code">
<pre><code>&lt;play /&gt;</pre>
</div>
<p>&nbsp;</p>
<p>运行项目：npm run dev</p>
<p><img src="./images/VUE创建播发器组件并调用3.png" alt="" /></p>
<p>成功引用！</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>