<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修AntColony 磁力搜索BT引擎的核心' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>AntColony 磁力搜索BT引擎的核心</center></div><div class='banquan'>原文出处:本文由博客园博主容器云平台提供。<br/>
原文连接:https://www.cnblogs.com/cilisousuo/p/12099523.html</div><br>
    <h2>磁力搜索网站2019/12/29更新</h2>
<p><span style="font-size: 18px;"><a href="https://www.cnblogs.com/cilisousuo/p/12099547.html" target="_blank">https://www.cnblogs.com/cilisousuo/p/12099547.html</a></span></p>
<h3>介绍</h3>
<p>AntColony（Github）是findit磁力搜索引擎的核心。用来在DHT网络中，收集活跃资源的infohash，下载并解析资源的种子文件，存入数据库等。AntColony是若干功能的合集，也可以单独运行其中的部分功能，所以起&ldquo;蚁群&rdquo;这个名字也是很贴切的（没错，我就是爱动物世界）。主要分一下几块：</p>
<ul>
<li>worker：爬虫，收集资源infohash，可以同时启动多个进程的worker，提高效率</li>
<li>male：根据收集来的infohash去下载种子文件</li>
<li>female：将种子文件录入数据库</li>
<li>queen：简单的入口，启动pm2运行worker，male和female</li>
</ul>
<p><a href="./images/AntColony 磁力搜索BT引擎的核心0.png" rel="noopener noreferrer" target="_blank"><img src="./images/AntColony 磁力搜索BT引擎的核心0.png" alt="" data-canonical-src="http://img.keenwon.com/2015/03/20150305144005_68120.png" /></a></p>
<p>目前启动5个worker使用3000-3004的端口，2个male和1个female。</p>
<p>使用Mongodb储存数据，这没什么好说的；使用pm2维护和监控node进程，也没太多要说的，重点说下Redis。Redis里暂存的数据大概是这样的：</p>
<p><a href="./images/AntColony 磁力搜索BT引擎的核心1.png" rel="noopener noreferrer" target="_blank"><img src="./images/AntColony 磁力搜索BT引擎的核心1.png" alt="" data-canonical-src="http://img.keenwon.com/2015/03/20150305144626_49722.png" /></a></p>
<ul>
<li>bucket：比较大的一个K桶</li>
<li>infohash：就是已经收集到的infohashs（worker收集来的，male会用来下载种子）</li>
<li>remoteNodes：worker新认识的节点，会依次&ldquo;拜访&rdquo;的，目前只保存最新的10w个（一方面我的VPS内存小，另一方面真没必要记录太多）</li>
<li>sysInfo：记录一些统计信息，例如发出多少次请求，累积收集多少infohashs，目前已经发出15亿次Request，这个频率是可控的，worker 太疯狂的话，VPS扛不住。</li>
</ul>
<h3><a id="user-content-安装运行方法" class="anchor" href="https://github.com/keenwon/antcolony#安装运行方法"></a>安装&amp;运行方法</h3>
<p>详细的使用方法请查看<a href="https://github.com/keenwon/antcolony/blob/master/doc/%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3.md">部署文档</a><br />其他内容查看&nbsp;<a title="http://keenwon.com/1436.html" href="http://keenwon.com/1436.html" rel="nofollow">http://keenwon.com/1436.html</a></p>
<p>&nbsp;</p>
<h3>磁力搜索站点演示</h3>
<p><span style="font-size: 18px; color: #0000ff;"><span style="color: #0000ff;"><a href="http://www.cili123.me/" target="_blank">http://www.cili123.me/</a></span></span>&nbsp;</p>
<h2>磁力搜索网站汇总每日更新</h2>
<p><span style="color: #0000ff; font-size: 16px;"><a href="https://www.cnblogs.com/cilisousuo/p/12099547.html" target="_blank"><span style="color: #0000ff;">https://www.cnblogs.com/cilisousuo/p/12099547.html</span></a></span></p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>