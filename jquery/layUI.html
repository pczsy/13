<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修layUI' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>layUI</center></div><div class='banquan'>原文出处:本文由博客园博主清水有丶白提供。<br/>
原文连接:https://www.cnblogs.com/lqq7456/p/lqq.html</div><br>
    <p>*** 【Layer】 ****************************************************************************************************************************<br />Layer弹窗：<br />layer.alert('弹框显示的内容',{icon:2});<br />【警告感叹号:0，打钩icon:1，叉叉icon:2，问号icon:3，已锁定icon:4，苦脸icon:5，笑脸icon:6，警告感叹号icon:7】</p>
<p><br />layer.alert('墨绿风格，点击确认看深蓝', {<br />    skin: 'layui-layer-molv' //样式类名  自定义样式<br />    ,closeBtn: 1    // 是否显示关闭按钮<br />    ,anim: 1 //动画类型<br />    ,btn: ['重要','奇葩'] //按钮<br />    ,icon: 6    // icon<br />    ,yes:function(){<br />        layer.msg('按钮1')<br />    }<br />    ,btn2:function(){<br />        layer.msg('按钮2')<br />    }});</p>
<p>	<br />	<br />layer.confirm（param1,param12,param13,param14）<br />layer.msg("")<br />layer.msg("you are the best!",{icon:"&amp;#xe650"});<br />layer.msg('大部分参数都是可以公用的&lt;br&gt;合理搭配，展示不一样的风格', {<br />     time: 2000, //2s后自动关闭<br />    btn: ['明白了', '知道了', '哦']<br /> });</p>
<p>layer.tips('Hi，我是tips', '#mybtn');//当成一个function用<br />layer.load(1);<br />layer.load(0);<br />var index = layer.load(0, {shade: false});  //显示加载图标<br />var index = layer.load(1, {shade: [0.1,'#fff'] //0.1透明度的白色背景}); //显示加载图标<br />layer.open();弹出层<br />	【type：0（信息框，默认）1（页面层）2（iframe层）3（加载层）4（tips层）】<br />	layer.open(){<br />		type: 1,//1为页面层<br />		title："标题",// - 标题<br />		content: "html代码或页面路径",//- 内容<br />		area: ['500px', '300px'],//宽高<br />		maxmin:true,//最大化最小化<br />		cancel:function(){ //右上角关闭按钮触发的回调<br />				return false;//false表示不关闭<br />			}<br />	}<br />	<br />*** layui ****************************************************************************************************************************<br />table行列中插入图片：<br />{field: 'template_image', title: '模版图(点击预览)', templet:'&lt;div&gt;&lt;a href="javascript:enlarge(&amp;quot;{{d.template_image}}&amp;quot;)"&gt;&lt;img src="{{d.template_image}}"&gt;&lt;/a&gt;&lt;/div&gt;'}<br />增加点击图片预览功能：<br />function enlarge(imgSrc){<br />    if(imgSrc){<br />     var width = pageWidth*0.5+"px";<br />     var height = pageHeight*0.8+"px";<br />     var imgWidth = pageWidth*0.5*0.9+"px";<br />     layer.open({<br />               type:1,<br />               title:'查看大图',<br />               area:[width,height],<br />               shadeClose: true, //开启遮罩关闭<br />               content:'&lt;img src="'+imgSrc+'" style="width:'+imgWidth+';height:auto;position: absolute;margin: auto;top: 0;right: 0;bottom: 0;left: 0;"&gt;'<br />           })<br />    }<br />  }<br />-------------------------<br />table中根据后台传回来的数据决定数据渲染方式：<br />【done - 数据渲染完的回调】<br />例如：用户的&lsquo;启用&rsquo;和&lsquo;禁用&rsquo;按钮<br />done: function(res, curr, count){<br />    //如果是异步请求数据方式，res即为你接口返回的信息。<br />    //如果是直接赋值的方式，res即为：{data: [], count: 99} data为当前页数据、count为数据总长度<br />    console.log(res);<br />    <br />    //得到当前页码<br />    console.log(curr); <br />    <br />    //得到数据总量<br />    console.log(count);<br />	<br />	for(var ind in res.data){<br />	  			if(res.data[ind].status == "2"){<br />	  				$("#tableContainer").find('a[name="ban"]').eq(ind).text("启用");<br />	  				$("#tableContainer").find('a[name="ban"]').eq(ind).attr("lay-event","enable");<br />	  				$("#tableContainer").find('a[name="ban"]').eq(ind).removeClass("layui-btn-danger");<br />	  			}<br />	  		}<br />  }<br />});<br />-------------------------<br />table中的行列要显示自定义的操作性按钮：<br />【既要显示后台获取的数据，也要显示按钮】<br />&lt;script type="text/html" id="vipcustomerlist"&gt;<br />  {{d.customer_count}} &lt;a class="layui-btn layui-btn-xs" lay-event="check"&gt;查看&lt;/a&gt;<br />&lt;/script&gt;</p>
<p>{field: 'customer_count', title: '推广成功人次', sort: true, toolbar: '#vipcustomerlist'}</p>
<p>-------------------------<br />layui下select选项动态加载方案：<br />【html】<br />&lt;div class="layui-inline"&gt;<br />			&lt;div class="layui-form"&gt;<br />		      &lt;select id="vipcard" lay-verify="required"&gt;&lt;/select&gt;<br />		    &lt;/div&gt;<br />		&lt;/div&gt;<br />【js】<br />$(function (){<br />	$.ajax({<br />        url: origin + "/manager/VipRetail/listVipCard",<br />        type: "get",<br />        dataType:"json",<br />        async: false,<br />        success: function (data) {<br />        	if(data &amp;&amp; data.res){<br />        		layui.use(['layer', 'form'], function () {<br />        			var form = layui.form;<br />        			var html1 = '&lt;dd lay-value="" class="layui-select-tips layui-this"&gt;请选择卡类型&lt;/dd&gt;';<br />                    var html2 = '&lt;option value="" &gt;请选择卡类型&lt;/option&gt;';<br />                    for (var i = 0; i &lt; data.res.length; i++) {<br />                        html1 += '&lt;dd lay-value="' + data.res[i].id + '"&gt;' + data.res[i].card_type + '&lt;/dd&gt;';<br />                        html2 += '&lt;option value="' + data.res[i].id + '"&gt;' + data.res[i].card_type + '&lt;/option&gt;';<br />                    }<br />                    $("#vipcard").next().children().eq(1).html(html1);<br />                    $("#vipcard").html(html2);</p>
<p>                    form.render();//没有写这个，操作后没有效果<br />        		});<br />        	}<br />        }<br />	});<br />})</p>
<p>-------------------------<br />select/checkbox/radio没显示问题：<br />layui.use('form', function(){<br />  var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功<br />  <br />  //&hellip;&hellip;<br />  <br />  //但是，如果你的HTML是动态生成的，自动渲染就会失效<br />  //因此你需要在相应的地方，执行下述方法来手动渲染，跟这类似的还有 element.init();<br />  form.render();<br />});  </p>
<p>-------------------------<br />页面中用layui插件造成select的onchange事件不起作用的问题：<br />解决：<br />	【html】<br />	&lt;select lay-filter="retailLevel"&gt;<br />	        &lt;option value="" selected&gt;请设置级别&lt;/option&gt;<br />	        &lt;option value="1"&gt;一级&lt;/option&gt;<br />	        &lt;option value="2"&gt;二级&lt;/option&gt;<br />	      &lt;/select&gt;<br />	【js】<br />	layui.use('form', function(){<br />	  var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功</p>
<p>	  form.on('select(retailLevel)', function(data){<br />		//console.log(data.elem); //得到select原始DOM对象<br />		//console.log(data.value); //得到被选中的值<br />		//console.log(data.othis); //得到美化后的DOM对象<br />		if(data.value == 2){<br />			$("#superior").css("display","block");<br />		}else{<br />			$("#superior").css("display","none");	<br />		}<br />		});<br />	  <br />	  //但是，如果你的HTML是动态生成的，自动渲染就会失效<br />	  //因此你需要在相应的地方，执行下述方法来手动渲染，跟这类似的还有 element.init();<br />	  //form.render();<br />	}); <br />	<br />-------------------------	<br />关闭当前页面：<br />$('#CloseIframe').click(function () {<br />        //注意：parent 是 JS 自带的全局对象，可用于操作父页面<br />        var index = parent.layer.getFrameIndex(window.name); //获取窗口索引<br />        parent.layer.close(index);<br />    });	<br />-------------------------	<br />请求接口成功后的提示：<br />【方案一】弹出成功提示框。1.5秒后关闭本页面，刷新父页面的table的数据（table再请求一次）<br />layer.msg("新增成功！",{icon:1,time: 1500},function(){<br />					var index = parent.layer.getFrameIndex(window.name);<br />					parent.table.reload("alltable",{<br />						  page: {<br />						    curr: 1 //重新从第 1 页开始<br />						  }<br />						}, 'data'); //只重载数据<br />					parent.layer.close(index);<br />				});<br />	</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>