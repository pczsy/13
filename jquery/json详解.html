<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修json详解' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>json详解</center></div><div class='banquan'>原文出处:本文由博客园博主有始方有终提供。<br/>
原文连接:https://www.cnblogs.com/danruoyanyun/p/11017602.html</div><br>
    <h1><span style="color: #00ff00;">JSON详解</span></h1>
<p>&nbsp;</p>
<div id="cnblogs_post_body">
<p>JSON的全称是&rdquo;<a class="replace_word" title="JavaScript知识库" href="http://lib.csdn.net/base/javascript" target="_blank">JavaScript</a> Object Notation&rdquo;，意思是JavaScript对象表示法，它是一种基于文本，独立于语言的轻量级数据交换格式。XML也是一种数据交换格式，为什么没 有选择XML呢？因为XML虽然可以作为跨平台的数据交换格式，但是在JS(JavaScript的简写)中处理XML非常不方便，同时XML标记比数据 多，增加了交换产生的流量，而JSON没有附加的任何标记，在JS中可作为对象处理，所以我们更倾向于选择JSON来交换数据。这篇文章主要从以下几个方 面来说明JSON。</p>
<p>1，JSON的两种结构<br />
2，认识JSON字符串<br />
3，在JS中如何使用JSON<br />
4，在.NET中如何使用JSON<br />
5，总结</p>
<pre><code>{
    key1:value1,
    key2:value2,
    ...
}</pre>
</div>
<p>&nbsp;</p>
<p>其中关键字是字符串，而值可以是字符串，数值，true,false,null,对象或数组</p>
<p>&nbsp;</p>
<p>数组结构以&rdquo;[&rdquo;开始，&rdquo;]&rdquo;结束。中间由0或多个以&rdquo;，&rdquo;分隔的值列表组成，语法结构如代码。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">[
    {
        key1:value1,
        key2:value2 
    },
    {
         key3:value3,
         key4:value4   
    }
]</span></pre>
</div>
<hr />
<p>认识JSON字符串</p>
<p>之前我一直有个困惑，分不清普通字符串，json字符串和json对象的区别。经过一番研究终于给弄明白了。比如在js中。</p>
<p>字符串：这个很好解释，指使用&ldquo;&rdquo;双引号或&rsquo;&rsquo;单引号包括的字符。例如：var comStr = 'this is string';<br />
json字符串：指的是符合json格式要求的js字符串。例如：var jsonStr = "{StudentID:'100',Name:'tmac',Hometown:'usa'}";<br />
json对象：指符合json格式要求的js对象。例如：var jsonObj = { StudentID: "100", Name: "tmac", Hometown: "usa" };</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> obj =<span style="color: #000000;"> {
            </span><span style="color: #800080;">1</span>: <span style="color: #800000;">"</span><span style="color: #800000;">value1</span><span style="color: #800000;">"</span><span style="color: #000000;">,
            </span><span style="color: #800000;">"</span><span style="color: #800000;">2</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">value2</span><span style="color: #800000;">"</span><span style="color: #000000;">,
            count: </span><span style="color: #800080;">3</span><span style="color: #000000;">,
            person: [ </span><span style="color: #008000;">//</span><span style="color: #008000;">数组结构JSON对象，可以嵌套使用</span>
<span style="color: #000000;">                        {
                            id: </span><span style="color: #800080;">1</span><span style="color: #000000;">,
                            name: </span><span style="color: #800000;">"</span><span style="color: #800000;">张三</span><span style="color: #800000;">"</span><span style="color: #000000;">
                        },
                        {
                            id: </span><span style="color: #800080;">2</span><span style="color: #000000;">,
                            name: </span><span style="color: #800000;">"</span><span style="color: #800000;">李四</span><span style="color: #800000;">"</span><span style="color: #000000;">
                        }
                   ],
            </span><span style="color: #0000ff;">object</span>: { <span style="color: #008000;">//</span><span style="color: #008000;">对象结构JSON对象</span>
                id: <span style="color: #800080;">1</span><span style="color: #000000;">,
                msg: </span><span style="color: #800000;">"</span><span style="color: #800000;">对象里的对象</span><span style="color: #800000;">"</span><span style="color: #000000;">    
            }
        };</span></pre>
</div>
<p>1，从JSON中读数据</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">function ReadJSON() {
            alert(obj.</span><span style="color: #800080;">1</span>); <span style="color: #008000;">//</span><span style="color: #008000;">会报语法错误，可以用alert(obj["1"]);说明数字最好不要做关键字</span>
            alert(obj.<span style="color: #800080;">2</span>); <span style="color: #008000;">//</span><span style="color: #008000;">同上</span>
<span style="color: #000000;">
            alert(obj.person[</span><span style="color: #800080;">0</span>].name); <span style="color: #008000;">//</span><span style="color: #008000;">或者alert(obj.person[0]["name"])</span>
            alert(obj.<span style="color: #0000ff;">object</span>.msg); <span style="color: #008000;">//</span><span style="color: #008000;">或者alert(obj.object["msg"])</span>
        }</pre>
</div>
<p>2，向JSON中写数据</p>
<p>比如要往JSON中增加一条数据，代码如下：</p>
<div class="cnblogs_code">function Add() { //往JSON对象中增加了一条记录 obj.sex= "男" //或者obj["sex"]="男" }</div>
<p>&nbsp;</p>
<h5><span style="color: #00ff00;"><img src="./images/json详解0.png" alt="" /></span></h5>
<p>&nbsp;</p>
<p>3，修改JSON中的数据</p>
<p>&nbsp;</p>
<p>我们现在要修改JSON中count的值，代码如下：</p>
<p>&nbsp;</p>
<div class="cnblogs_code">function Update() { obj.count = 10; //或obj["count"]=10 }</div>
<p>&nbsp;</p>
<p><span style="color: #00ff00;">修改后的JSON如图。</span></p>
<p><span style="color: #00ff00;"><img src="./images/json详解1.png" alt="" /></span></p>
<p>&nbsp;</p>
<p>4，删除JSON中的数据</p>
<p>我们现在实现从JSON中删除count这条数据，代码如下：</p>
<div class="cnblogs_code">function Delete() { delete obj.count; }</div>
<p>删除后的JSON如图</p>
<p><img src="./images/json详解2.png" alt="" /></p>
<p>可以看到count已经从JSON对象中被删除了。</p>
<p>5，遍历JSON对象</p>
<p>可以使用for&hellip;in&hellip;循环来遍历JSON对象中的数据，比如我们要遍历输出obj对象的值，代码如下：</p>
<div class="cnblogs_code">function Traversal() { for (var c in obj) { console.log(c + ":", obj[c]); } }</div>
<p>程序输出结果为：</p>
<p><img src="./images/json详解3.png" alt="" /></p>
<p><strong>1，通过序列化将.net对象转换为JSON字符串</strong></p>
<p>在web开发过程中，我们经常需要将从<a class="replace_word" title="MySQL知识库" href="http://lib.csdn.net/base/mysql" target="_blank">数据库</a>中 查询到的数据(一般为一个集合，列表或数组等)转换为JSON格式字符串传回客户端，这就需要进行序列化，这里用到的是JsonConvert对象的 SerializeObject方法。其语法格式为：JsonConvert.SerializeObject(object)，代码中 的&rdquo;object&rdquo;就是要序列化的.net对象，序列化后返回的是json字符串。</p>
<p>比如，现在我们有一个TStudent的学生表，表中的字段和已有数据如图所示</p>
<p><img src="./images/json详解4.png" alt="" /><img src="./images/json详解5.png" alt="" /></p>
<p>从表中我们可以看到一共有五条数据，现在我们要从数据库中取出这些数据，然后利用JSON<a class="replace_word" title=".NET知识库" href="http://lib.csdn.net/base/dotnet" target="_blank">.Net</a>的JsonConvert对象序列化它们为json字符串，并显示在页面上。C#代码如下</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span> Page_Load(<span style="color: #0000ff;">object</span><span style="color: #000000;"> sender, EventArgs e)
        {
            </span><span style="color: #0000ff;">using</span> (L2SDBDataContext db = <span style="color: #0000ff;">new</span><span style="color: #000000;"> L2SDBDataContext())
            {
                List</span>&lt;Student&gt; studentList = <span style="color: #0000ff;">new</span> List&lt;Student&gt;<span style="color: #000000;">();
                </span><span style="color: #0000ff;">var</span> query = <span style="color: #0000ff;">from</span> s <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.TStudents
                            </span><span style="color: #0000ff;">select</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> { 
                                StudentID</span>=<span style="color: #000000;">s.StudentID,
                                Name</span>=<span style="color: #000000;">s.Name,
                                Hometown</span>=<span style="color: #000000;">s.Hometown,
                                Gender</span>=<span style="color: #000000;">s.Gender,
                                Brithday</span>=<span style="color: #000000;">s.Birthday,
                                ClassID</span>=<span style="color: #000000;">s.ClassID,
                                Weight</span>=<span style="color: #000000;">s.Weight,
                                Height</span>=<span style="color: #000000;">s.Height,
                                Desc</span>=<span style="color: #000000;">s.Desc
                            };
                </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span><span style="color: #000000;"> query)
                {
                    Student student </span>= <span style="color: #0000ff;">new</span> Student { StudentID=item.StudentID,Name=item.Name,Hometown=item.Hometown,Gender=item.Gender,Brithday=item.Brithday,ClassID=item.ClassID,Weight=item.Weight,Height=item.Height,Desc=<span style="color: #000000;">item.Desc};
                    studentList.Add(student);
                }
                lbMsg.InnerText </span>=<span style="color: #000000;"> JsonConvert.SerializeObject(studentList);
            }
        }</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>