<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Bootstrap Bootstrap表格插件bootstrap-table配置与应用小结' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Bootstrap Bootstrap表格插件bootstrap-table配置与应用小结</center></div><div class='banquan'>原文出处:本文由博客园博主授客提供。<br/>
原文连接:https://www.cnblogs.com/shouke/p/10885971.html</div><br>
    <p align="center"><span style="font-family: 'courier new', courier;"><strong>Bootstrap</strong><strong>表格插件</strong><strong>bootstrap-table</strong><strong>配置与应用小结</strong></span></p>
<p align="center"><span style="font-family: 'courier new', courier;"><strong>&nbsp;</strong></span></p>
<p align="right"><span style="font-family: 'courier new', courier;"><strong>by:</strong><strong>授客</strong><strong> QQ</strong><strong>：</strong><strong>1033553122</strong></span></p>
<ol>
<li><span style="font-family: 'courier new', courier;"><strong>1.&nbsp;&nbsp; </strong><strong>测试环境</strong></span></li>
</ol>
<p align="left"><span style="font-family: 'courier new', courier;">win7</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">JQuery-3.2.1.min.js</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">下载地址：</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><a href="https://gitee.com/ishouke/front_end_plugin/blob/master/jquery-3.2.1.min.js">https://gitee.com/ishouke/front_end_plugin/blob/master/jquery-3.2.1.min.js</a></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">Bootstrap-3.3.7-dist</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">下载地址：</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><a href="https://gitee.com/ishouke/front_end_plugin/blob/master/bootstrap-3.3.7.zip">https://gitee.com/ishouke/front_end_plugin/blob/master/bootstrap-3.3.7.zip</a></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">bootstrap-table-develop-v1.12.1.zip</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">下载地址：</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><a href="https://github.com/wenzhixin/bootstrap-table">https://github.com/wenzhixin/bootstrap-table</a></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><a href="https://gitee.com/ishouke/front_end_plugin/blob/master/bootstrap-table-develop-v1.12.1.zip">https://gitee.com/ishouke/front_end_plugin/blob/master/bootstrap-table-develop-v1.12.1.zip</a></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<ol>
<li><span style="font-family: 'courier new', courier;"><strong>2.&nbsp;&nbsp; </strong><strong>配置与应用</strong></span></li>
</ol>
<h3><span style="font-family: 'courier new', courier;">效果展示</span></h3>
<p><img src="./images/Bootstrap Bootstrap表格插件bootstrap-table配置与应用小结0.png" alt="" /></p>
<p>&nbsp;</p>
<pre><code></pre>
<h3><span style="font-family: 'courier new', courier;">HTML代码片段</span></h3>
<h4><span style="font-family: 'courier new', courier;">head设置</span></h4>
<pre><code><span style="font-family: 'courier new', courier;">&lt;!DOCTYPE <strong>html</strong>&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>html </strong><strong>lang=</strong><strong>"zh-cn"</strong>&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>head</strong>&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>meta </strong><strong>charset=</strong><strong>"utf-8"</strong>&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>meta </strong><strong>http-equiv=</strong><strong>"X-UA-Compatible" </strong><strong>content=</strong><strong>"IE=edge"</strong>&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>meta </strong><strong>name=</strong><strong>"viewport" </strong><strong>content=</strong><strong>"width=device-width, initial-scale=1"</strong>&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;!-- </em><em>上述</em><em>3</em><em>个</em><em>meta</em><em>标签</em><em>*</em><em>必须</em><em>*</em><em>放在最前面，任何其他内容都</em><em>*</em><em>必须</em><em>*</em><em>跟随其后！</em><em> --&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;">{% <strong>load </strong><strong>staticfiles </strong>%}</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;!-- jQuery (Bootstrap </em><em>的所有</em><em> JavaScript </em><em>插件都依赖</em><em> jQuery</em><em>，所以必须放在前边</em><em>) --&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>script </strong><strong>type=</strong><strong>"text/javascript" </strong><strong>src=</strong><strong>"</strong>{% <strong>static&nbsp; </strong><strong>'website/jquery-3.2.1.min.js' </strong>%}<strong>" </strong><strong>defer</strong>&gt;&lt;/<strong>script</strong>&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;!-- Bootstrap --&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>link </strong><strong>rel=</strong><strong>"stylesheet" </strong><strong>type=</strong><strong>"text/css" </strong><strong>href=</strong><strong>"</strong>{% <strong>static </strong><strong>'website/bootstrap-3.3.7-dist/css/bootstrap.min.css' </strong>%}<strong>" </strong>/&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;!-- </em><em>加载</em><em> Bootstrap </em><em>的所有</em><em> JavaScript </em><em>插件。你也可以根据需要只加载单个插件。</em><em> --&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>script </strong><strong>type=</strong><strong>"text/javascript" </strong><strong>src=</strong><strong>"</strong>{% <strong>static&nbsp; </strong><strong>'website/bootstrap-3.3.7-dist/js/bootstrap.min.js' </strong>%}<strong>" </strong><strong>defer</strong>&gt;&lt;/<strong>script</strong>&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;!-- HTML5 shim </em><em>和</em><em> Respond.js </em><em>是为了让</em><em> IE8 </em><em>支持</em><em> HTML5 </em><em>元素和媒体查询（</em><em>media queries</em><em>）功能</em><em> --&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;!-- </em><em>警告：通过</em><em> file:// </em><em>协议（就是直接将</em><em> html </em><em>页面拖拽到浏览器中）访问页面时</em><em> Respond.js </em><em>不起作用</em><em> --&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;!--[if lt IE 9]&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js" defer&gt;&lt;/script&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js" defer&gt;&lt;/script&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;![endif]--&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;!-- Bootstrap-Table --&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>link </strong><strong>rel=</strong><strong>"stylesheet" </strong><strong>type=</strong><strong>"text/css" </strong><strong>href=</strong><strong>"</strong>{% <strong>static </strong><strong>'website/bootstrap-table-1.12.1-dist/bootstrap-table.min.css' </strong>%}<strong>" </strong>/&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>script </strong><strong>type=</strong><strong>"text/javascript" </strong><strong>src=</strong><strong>"</strong>{% <strong>static&nbsp; </strong><strong>'website/bootstrap-table-1.12.1-dist/bootstrap-table.min.js' </strong>%}<strong>" </strong><strong>defer</strong>&gt;&lt;/<strong>script</strong>&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&lt;!-- </em><em>引入中文语言包，注意：</em><em>locale files </em><em>必须放在</em><em>bootstrap-table.js</em><em>后面</em><em> --&gt;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;<strong>script </strong><strong>type=</strong><strong>"text/javascript" </strong><strong>src=</strong><strong>"</strong>{% <strong>static&nbsp; </strong><strong>'website/bootstrap-table-1.12.1-dist/locale/bootstrap-table-zh-CN.min.js' </strong>%}<strong>" </strong><strong>defer</strong>&gt;&lt;/<strong>script</strong>&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&hellip;&hellip;略</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/<strong>head</strong>&gt;</span></pre>
<h4><span style="font-family: 'courier new', courier;">table及toolbar工具条</span></h4>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div class="container-fluid"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div class="row"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;table id="roleTable"&gt;&lt;/table&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div id="toolbar"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div class="btn-group"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;button class="btn btn-default" data-toggle="modal" data-target="#roleDialog" id="addBtn"&gt;新增</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;i class="glyphicon glyphicon-plus"&gt;&lt;/i&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/button&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;button class="btn btn-default" id="editBtn"&gt;修改</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;i class="glyphicon glyphicon-edit"&gt;&lt;/i&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/button&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;button class="btn btn-default" id="deleteBtn"&gt;删除</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;i class="glyphicon glyphicon-remove"&gt;&lt;/i&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/button&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;form class="form-inline" id="queryForm"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div class="form-group"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div class="input-group"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div class="input-group-addon"&gt;角色名称&lt;/div&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;input&nbsp; type="text" class="form-control" name="roleNameQ" id="roleNameQ" placeholder="请输入角色名称"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div class="input-group date" id="startTimePicker"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div class="input-group-addon"&gt;开始时间&lt;/div&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;input&nbsp; type="text" class="form-control" name="startTime" id="startTime" &gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;span class="input-group-addon"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;span class="glyphicon glyphicon-calendar"&gt;&lt;/span&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/span&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div class="input-group date" id="endTimePicker"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;div class="input-group-addon"&gt;结束时间&lt;/div&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;input&nbsp; type="text" class="form-control" name="endTime" id="endTime"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;span class="input-group-addon"&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;span class="glyphicon glyphicon-calendar"&gt;&lt;/span&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/span&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;button type="button" id="queryBtn" class="btn btn-primary queryButton"&gt;查询&lt;/button&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/form&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></pre>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier;">JS代码片段</span></h3>
<h4><span style="font-family: 'courier new', courier;">数据表初始化配置</span></h4>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>/**</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;* </em><em>获取角色表数据</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;*/</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>function </strong><em>loadTableData </em>() {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleTableID</em></strong>).bootstrapTable({</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>url</strong>: <strong><em>roleTableDataURL</em></strong>, // 服务器数据的加载地址。</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>method</strong>:<strong>'get'</strong>,&nbsp;&nbsp;&nbsp;&nbsp; // 服务器数据的请求方式 'get' 或 'post'。</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>pagination</strong>:<strong>true</strong>,// 在表格底部显示分页信息(显示第 x 到第 x 条记录，总共 x 条记录)，翻页条 // 注意：数据页页数超过1页会才展示翻页条</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>paginationVAlign</strong>:<strong>'bottom'</strong>, // 指定分页条在垂直方向的位置。'top'，'bottom' 或 'both'。</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>sidePagination</strong>:<strong>'server'</strong>, // 设置在哪里进行分页，可选值为 'client' 或者 'server'。注意：设置 'server'时，必须设置服务器数据地址（url）或者重写ajax方法。</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>responseHandler</strong>:<em>responseHandler</em>, // 加载服务器数据之前的处理程序，可以用来格式化数据。</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>pageSize</strong>:10, // 如果启用分页，设置初始化界面时，默认的每页显示数据条数</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>pageList</strong>:[10, 20, 30, 40, 50, 60, 70, 80, 90, 100, <strong>'All'</strong>],&nbsp; // 如果设置了分页，设置可供选择的页面记录数。设置为 All 或者 Unlimited，则显示所有记录</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>smartDisplay</strong>:<strong>false</strong>, // 设置为 true 是程序自动判断显示分页信息和 card 视图。这会导致自定义的 pageList不起作用</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>silentSort</strong>:<strong>true</strong>, // 设置为true将在点击分页按钮时，自动记住排序项。仅在 sidePagination设置为 server时生效</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>showColumns</strong>:<strong>true</strong>, // 展示内容列下拉框，方便设置展示那些列</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>showRefresh</strong>:<strong>true</strong>, //&nbsp;&nbsp; 显示刷新按钮</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>idField</strong>:<strong>'id'</strong>,&nbsp;&nbsp;&nbsp;&nbsp; // 指定主键列</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //dataField: "data", </em>&nbsp;//返回的json数组记录(表格数据)的key.默认是"rows", 数据格式： {"total": 0, "rows": []}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>checkboxHeader</strong>:<strong>true</strong>, // 如果设置 false，将在列头隐藏全选复选框，反之则显示，设置为ture时，必须设置singleSelect=false 才有效</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>clickToSelect</strong>:<strong>true</strong>, // 如果设置 true，则在点击行时，自动选中 rediobox 、 checkbox。</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>singleSelect</strong>:<strong>false</strong>,&nbsp; //如果设置为true - 禁止多选，否则不禁止多选</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>striped</strong>:<strong>true</strong>, // 设置为 true 会有隔行变色效果</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>toolbar</strong>:<strong>'#toolbar'</strong>, // 一个jQuery 选择器，形如#toolbar, .toolbar，指明自定义的 toolbar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>toolbarAlign</strong>:<strong>'left'</strong>, // 指定 toolbar 水平方向的位置。'left' 或 'right'。</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>columns</strong>: [{</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>field</strong>: <strong>'checkbox'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>align</strong>: <strong>'center'</strong>,&nbsp;&nbsp; // 设置数据对齐方式可选项： 'left', 'right', 'center'</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>halign</strong>: <strong>'center'</strong>,&nbsp; // 设置表头标题对齐方式可选项： 'left', 'right', 'center'</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>valign</strong>: <strong>'middle'</strong>,&nbsp;&nbsp; // 设置单元格数据的垂直方向上的对齐方式，有：top（靠上）、middle（居中）、bottom（靠下）针对checkbox似乎不起作用</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>checkbox</strong>:<strong>true</strong>,&nbsp;&nbsp;&nbsp; // 显示为复选框</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>width</strong>: <strong>'1%'</strong>,// 设置列宽度</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },{</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>field</strong>: <strong>'id'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>title</strong>: <strong>'</strong><strong>角色</strong><strong>ID'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>align</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>halign</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>valign</strong>:<strong>'middle'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>sortable</strong>:<strong>true</strong>, // 允许排序列</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>order</strong>:<strong>'desc'</strong>,&nbsp; // 默认排序方式升序-asc 降序-desc</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>width</strong>: <strong>'2%'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }, {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>field</strong>: <strong>'name'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>title</strong>: <strong>'</strong><strong>角色名称</strong><strong>'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>align</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>valign</strong>: <strong>'middle'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>halign</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>width</strong>: <strong>'14%'</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">}, {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>field</strong>: <strong>'remark'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>title</strong>: <strong>'</strong><strong>角色描述</strong><strong>'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>valign</strong>: <strong>'middle'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>align</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>halign</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>width</strong>: <strong>'20%'</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">}, {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>field</strong>: <strong>'is_enable'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>title</strong>: <strong>'</strong><strong>是否启用</strong><strong>'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>valign</strong>: <strong>'middle'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>align</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>halign</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>width</strong>:<strong>'4%'</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">}, {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>field</strong>: <strong>'creater'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>title</strong>: <strong>'</strong><strong>创建人</strong><strong>'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>valign</strong>: <strong>'middle'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>align</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>halign</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>width</strong>:<strong>'7%'</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">}, {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>field</strong>: <strong>'create_time'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>title</strong>: <strong>'</strong><strong>创建时间</strong><strong>'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>valign</strong>: <strong>'middle'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>align</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>halign</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>width</strong>:<strong>'11%'</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">}, {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>field</strong>: <strong>'modifier'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>title</strong>: <strong>'</strong><strong>修改人</strong><strong>'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>valign</strong>: <strong>'middle'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>align</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>halign</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>width</strong>:<strong>'7%'</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">},{</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>field</strong>: <strong>'modify_time'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>title</strong>: <strong>'</strong><strong>修改时间</strong><strong>'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>valign</strong>: <strong>'middle'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>align</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>halign</strong>: <strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>width</strong>:<strong>'11%'</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">},{</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>field</strong>:<strong>'operate'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>title</strong>:<strong>'</strong><strong>操作</strong><strong>'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>algin</strong>:<strong>'left'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>halgin</strong>:<strong>'center'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>width</strong>:<strong>'23%'</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>events</strong>: <strong>operateEvents</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>formatter</strong>:<em>operateFormatter</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">} ]</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; });</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">}</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;"><em>// </em><em>加载表格数据</em></span></p>
<p><span style="font-family: 'courier new', courier;"><em>loadTableData</em>();</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<h4><span style="font-family: 'courier new', courier;">加载服务器数据之前的数据处理(<em>responseHandler</em>)</span></h4>
<pre><code><span style="font-family: 'courier new', courier;"><em>/**</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em> * </em><em>加载服务器数据之前的处理程序，可以用来格式化数据。</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em> * </em><em>参数：</em><em>result</em><em>为从服务器请求到的数据</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em> * <strong>@param </strong>result</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em> */</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>function </strong><em>responseHandler</em>(result){</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>if </strong>(result.success == <strong>'false'</strong>) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">alert(<strong>'</strong><strong>获取角色信息失败</strong><strong>'</strong>);</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>return</strong>;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>// </em><em>返回数据，渲染表格</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>return </strong>{</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>total</strong>: result.data.<strong>total</strong>, <em>//</em><em>总页数</em><em>, key</em><em>名称固定为</em><em>"total"</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>rows</strong>: result.data.<strong>rows&nbsp;&nbsp;&nbsp; </strong><em>//</em><em>行数据，</em><em>key</em><em>名称必须和</em><em>bootstrapTable</em><em>函数中</em><em>dataField</em><em>的值保持一致，默认为</em><em>rows.</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;">};</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">};</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<h4><span style="font-family: 'courier new', courier;">格式化操作列</span></h4>
<pre><code><span style="font-family: 'courier new', courier;"><em>/**</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em> *&nbsp; </em><em>操作列格式化函数</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em> */</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>function </strong><em>operateFormatter</em>(value, row, index) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>if </strong>(row.is_enable == <strong>'</strong><strong>是</strong><strong>'</strong>) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>return&nbsp; </strong><strong>''</strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;div class="btn-group"&gt;' </strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;button class="btn btn-default asign-resource"&gt;</strong><strong>分配资源</strong><strong>&amp;nbsp;&lt;i class="glyphicon glyphicon-plus"&gt;&lt;/i&gt;&lt;/button&gt;' </strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;button class="btn btn-default edit" &gt;</strong><strong>修改</strong><strong>&amp;nbsp;&lt;i class="glyphicon glyphicon-edit"&gt;&lt;/i&gt;&lt;/button&gt;' </strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;button class="btn btn-default delete"&gt;</strong><strong>删除</strong><strong>&amp;nbsp;&lt;i class="glyphicon glyphicon-remove"&gt;&lt;/i&gt;&lt;/button&gt;' </strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;button class="btn btn-default switch" &gt;</strong><strong>禁用</strong><strong>&amp;nbsp;&lt;i class="glyphicon glyphicon-cog"&gt;&lt;/i&gt;&lt;/button&gt;' </strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;/div&gt;'</strong>;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; } <strong>else </strong>{</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>return&nbsp; </strong><strong>''</strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;div class="btn-group"&gt;' </strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;button class="btn btn-default asign-resource"&gt;</strong><strong>分配资源</strong><strong>&amp;nbsp;&lt;i class="glyphicon glyphicon-plus"&gt;&lt;/i&gt;&lt;/button&gt;' </strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;button class="btn btn-default edit" &gt;</strong><strong>修改</strong><strong>&amp;nbsp;&lt;i class="glyphicon glyphicon-edit"&gt;&lt;/i&gt;&lt;/button&gt;' </strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;button class="btn btn-default delete"&gt;</strong><strong>删除</strong><strong>&amp;nbsp;&lt;i class="glyphicon glyphicon-remove"&gt;&lt;/i&gt;&lt;/button&gt;' </strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;button class="btn btn-default switch" &gt;</strong><strong>启用</strong><strong>&amp;nbsp;&lt;i class="glyphicon glyphicon-cog"&gt;&lt;/i&gt;&lt;/button&gt;' </strong>+</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>'&lt;/div&gt;'</strong>;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">}</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<h4><span style="font-family: 'courier new', courier;">给操作列按钮注册点击事件</span></h4>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>给操作按钮注册点击事件</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>window</strong>.<strong>operateEvents </strong>= {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>'click .asign-resource'</strong>: <strong>function </strong>(event, value, row, index) { <em>// </em><em>注意</em><em>click</em><em>和</em><em>.class</em><em>之间必须有空格</em></span></p>
<pre><code><span style="font-family: 'courier new', courier;">&hellip;&hellip;略</span></pre>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>'click .edit'</strong>: <strong>function </strong>(event, value, row, index) {</span></p>
<pre><code><span style="font-family: 'courier new', courier;">&hellip;&hellip;略</span></pre>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>'click .delete'</strong>: <strong>function </strong>(event, value, row, index) {</span></p>
<pre><code><span style="font-family: 'courier new', courier;">&hellip;&hellip;略</span></pre>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>'click .switch'</strong>: <strong>function </strong>(event, value, row, index) {</span></p>
<pre><code><span style="font-family: 'courier new', courier;">&hellip;&hellip;略</span></pre>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">函数参数说明：</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">event：jQuery事件（参考Events）。</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">value：字段名（实践发现，该参数获取到的值为undefined</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">row：json串格式表示的行数据</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">index：所点击行的index</span></p>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<h4><span style="font-family: 'courier new', courier;">给toolbar工具条按钮添加点击事件</span></h4>
<pre><code><span style="font-family: 'courier new', courier;"><em>// </em><em>给查询按钮增加点击事件</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>queryBtnID</em></strong>).click(<strong>function </strong>() {</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>//</em><em>刷新处理，指定</em><em>query </em><em>的参数，注：此地方指定的参数，仅在当次刷新时使用</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>var </strong>dataArray = <strong>$</strong>(<strong>'#' </strong>+ <strong><em>queryFormID</em></strong>).serializeArray();</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>var </strong>queryContent = {}</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>$</strong>.each(dataArray, <strong>function </strong>() {</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">queryContent[<strong>this</strong>.name] = <strong>this</strong>.value;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; });</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>// </em><em>刷新如果不指定参数刷新：</em><em>$(tableSelector).bootstrapTable('refresh');</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleTableID</em></strong>).bootstrapTable(<strong>'refresh'</strong>, {</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>query</strong>: queryContent</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">});</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">});</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>// </em><em>给表格上方的修改按钮绑定点击事件</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>editBtnID</em></strong>).click(<strong>function</strong>() {</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>editRole</em>(<strong>'byTopEditBtn'</strong>);</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">});</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>// </em><em>给表格上方的删除按钮绑定点击事件</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>deleteBtnID</em></strong>).click(<strong>function</strong>() {</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>deleteRole</em>(<strong>'byTopDeleteBtn'</strong>);</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">});</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<h4><span style="font-family: 'courier new', courier;">提交新增、修改表单</span></h4>
<p align="left"><span style="font-family: 'courier new', courier;"><em>/**</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;* </em><em>提交新增、修改角色表单</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;*/</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>document</strong>).ready(<strong>function</strong>() {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleFormID</em></strong>).submit(<strong>function</strong>() {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>var </strong>dataArray = <strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleFormID</em></strong>).serializeArray();</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>var </strong>data = {};</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>.each(dataArray, <strong>function </strong>() {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">data[<strong>this</strong>.name] = <strong>this</strong>.value;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>var </strong>csrfToken = <em>getCookie</em>(<strong>'csrftoken'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(csrfToken == <strong>''</strong>) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(<strong>'</strong><strong>获取</strong><strong>Cookie</strong><strong>失败</strong><strong>'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>return false</strong>;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(<strong><em>opType </em></strong>== <strong>'add'</strong>) { <em>// </em><em>新增</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>.ajax({</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>type</strong>: <strong>"POST"</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>url</strong>: <strong><em>addRoleURL</em></strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>async</strong>: <strong>false</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>data</strong>: data,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">beforeSend: <strong>function </strong>(xhr, settings) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(!<em>csrfSafeMethod</em>(settings.type) &amp;&amp; !<strong>this</strong>.<strong>crossDomain</strong>) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xhr.setRequestHeader(<strong>"X_CSRFTOKEN"</strong>, csrfToken);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">success: <strong>function </strong>(result) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(result.success == <strong>'true'</strong>) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(result.<strong>msg</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>顶部插入一条记录</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleTableID</em></strong>).bootstrapTable(<strong>'insertRow'</strong>, {<strong>index</strong>: 0, <strong>row</strong>: result.data});</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleTableID</em></strong>).bootstrapTable(<strong>'refresh'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>隐藏模态对话框，并重置数据</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleDialogID</em></strong>).<strong>modal</strong>(<strong>'hide'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <strong>else </strong>{</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(result.<strong>msg </strong>+ <strong>"</strong><strong>，</strong><strong>" </strong>+ result.<strong>reason</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">error: <strong>function</strong>(XmlHttpRequest, textStatus, errorThrown) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(<strong>'</strong><strong>新增角色请求失败</strong><strong>' </strong>+ XmlHttpRequest.<strong>responseText</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <strong>else if </strong>(<strong><em>opType </em></strong>== <strong>'update'</strong>) { <em>// </em><em>修改</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">data[<strong>'id'</strong>] = <strong><em>currentRole</em></strong>.<strong>id</strong>;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>.ajax({</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>type</strong>: <strong>"POST"</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>url</strong>: <strong><em>updateRoleURL</em></strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>async</strong>: <strong>false</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>data</strong>: data,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">beforeSend: <strong>function </strong>(xhr, settings) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(!<em>csrfSafeMethod</em>(settings.type) &amp;&amp; !<strong>this</strong>.<strong>crossDomain</strong>) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xhr.setRequestHeader(<strong>"X_CSRFTOKEN"</strong>, csrfToken);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">success: <strong>function </strong>(result) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(result.success == <strong>'true'</strong>) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(result.<strong>msg</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>在页面上更新角色信息</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>delete </strong>data[<strong>'csrfmiddlewaretoken'</strong>];</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>更新行记录</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleTableID</em></strong>).bootstrapTable(<strong>'updateRow'</strong>, {<strong>index</strong>: parseInt(<strong><em>rowIndex</em></strong>), <strong>row</strong>:result.data});</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>隐藏模态对话框，并重置数据</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleDialogID</em></strong>).<strong>modal</strong>(<strong>'hide'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <strong>else </strong>{</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(result.<strong>msg </strong>+ <strong>"</strong><strong>，</strong><strong>" </strong>+ result.<strong>reason</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>需要手动关闭模态对话框，所以也会自动重置数据</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">error: <strong>function</strong>(XmlHttpRequest, textStatus, errorThrown) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(<strong>'</strong><strong>修改角色请求失败</strong><strong>' </strong>+ XmlHttpRequest.<strong>responseText</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>需要手动关闭模态对话框，所以也会自动重置数据</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>return false</strong>; <em>// </em><em>避免跳转到</em><em>django</em><em>的返回结果数据页</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">});</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">});</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;"><strong>插入行</strong></span></p>
<p><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#tableID'</strong>).bootstrapTable(<strong>'insertRow'</strong>, {<strong>index</strong>: 0, <strong>row</strong>: result.data});</span></p>
<p><span style="font-family: 'courier new', courier;">参数说明：</span></p>
<p><span style="font-family: 'courier new', courier;"><strong>index </strong><strong>新增行的索引</strong></span></p>
<p><span style="font-family: 'courier new', courier;"><strong>row&nbsp; </strong><strong>新增行的数据，</strong><strong>json</strong><strong>串表示</strong></span></p>
<p><span style="font-family: 'courier new', courier;"><strong>&nbsp;</strong></span></p>
<p><span style="font-family: 'courier new', courier;"><strong>更新行</strong></span></p>
<p><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#tableID'</strong>).bootstrapTable(<strong>'updateRow'</strong>, {<strong>index</strong>: parseInt(<strong><em>rowIndex</em></strong>), <strong>row</strong>:result.data});</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">参数说明</span></p>
<p><span style="font-family: 'courier new', courier;"><strong>index </strong><strong>要更新行的索引</strong></span></p>
<p><span style="font-family: 'courier new', courier;"><strong>row&nbsp; </strong><strong>要更新行的数据据，</strong><strong>json</strong><strong>串表示</strong></span></p>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;</span></pre>
<h4><span style="font-family: 'courier new', courier;">修改记录</span></h4>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>/**</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;* </em><em>修改角色</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;*/</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>function </strong><em>editRole</em>(flag) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong><em>opType </em></strong>= <strong>'update'</strong>;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(flag == <strong>'byTopEditBtn'</strong>) { <em>// </em><em>通过点击表格上方的修改按钮进入</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>var </strong>rowArray = <strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleTableID</em></strong>).bootstrapTable(<strong>'getSelections'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(rowArray.<strong>length </strong>&lt;1) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(<strong>'</strong><strong>请先选择要修改的角色'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>return</strong>;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <strong>else if </strong>(rowArray.<strong>length </strong>&gt;1) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(<strong>'</strong><strong>每次修改，只能选择一个角色'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>return</strong>;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>获取选中行索引</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong><em>rowIndex </em></strong>= <strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleTableID</em></strong>).find(<strong>'tbody&gt;tr.selected'</strong>).first().attr(<strong>'data-index'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong><em>currentRole </em></strong>= rowArray[0]; <em>// </em><em>记录当前被修改的角色信息</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>data </strong>= [{<strong>'name'</strong>: <strong>'roleName'</strong>, <strong>'value'</strong>:rowArray[0].name}, {<strong>'name'</strong>:<strong>'roleDesc'</strong>, <strong>'value'</strong>:rowArray[0].remark}]</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; } <strong>else if </strong>(flag == <strong>'byRowEditBtn'</strong>) { <em>// </em><em>通过点击行右侧的修改按钮进入</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>data </strong>= [{<strong>'name'</strong>: <strong>'roleName'</strong>, <strong>'value'</strong>:<strong><em>currentRole</em></strong>.name}, {<strong>'name'</strong>:<strong>'roleDesc'</strong>, <strong>'value'</strong>:<strong><em>currentRole</em></strong>.remark}]</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>用所选记录信息，填充即将弹出对话框中表单组件值</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>.each(<strong>data</strong>, <strong>function </strong>() {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong>this</strong>.name).val(<strong>this</strong>.value);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; });</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleDialogID</em></strong>).<strong>modal</strong>(<strong>'show'</strong>); <em>// </em><em>打开修改模态对话框</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">}</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;"><strong>获取选中行索引</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong><em>rowIndex </em></strong>= <strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleTableID</em></strong>).find(<strong>'tbody&gt;tr.selected'</strong>).first().attr(<strong>'data-index'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">这里为啥要获取，为啥可以这么获取？原因是这样的，通过选择表记录行，然后点击表格上方的修改按钮修改对应记录，这种情况下，无法直接获取对应行记录的索引，导致没法更新对应记录行，所以需要获取索引，没找到对应，至于为啥这么获取，是由table 表结构决定的，如下图：</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<h4><span style="font-family: 'courier new', courier;">删除记录</span></h4>
<p align="left"><span style="font-family: 'courier new', courier;"><em>/**</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;* </em><em>删除角色</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;*/</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>function </strong><em>deleteRole</em>(flag) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>var </strong>idArray = [];</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(flag == <strong>'byTopDeleteBtn'</strong>) { <em>// </em><em>通过点击表格上方的删除按钮进入</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>rowArray </strong>= <strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleTableID</em></strong>).bootstrapTable(<strong>'getSelections'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(<strong>rowArray</strong>.<strong>length </strong>&lt;1) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(<strong>'</strong><strong>请先选择要删除的角色</strong><strong>'</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>return</strong>;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; } <strong>else if </strong>(flag == <strong>'byRowDeleteBtn'</strong>) { <em>// </em><em>通过点击行右侧的删除按钮进入</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">idArray.push(<strong><em>currentRole</em></strong>.<strong>id</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>var </strong>mark = <strong>true</strong>; <em>// </em><em>标记是否删除成功</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(confirm(<strong>'</strong><strong>是否删除选中记录</strong><strong>?'</strong>)) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>.each(<strong>rowArray</strong>, <strong>function</strong>() {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">idArray.push(<strong>this</strong>.<strong>id</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>.ajax({</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>type</strong>: <strong>"POST"</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>url</strong>: <strong><em>deleteRoleURL</em></strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>async</strong>: <strong>false</strong>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>data</strong>: {<strong>'idArray'</strong>:<strong>"" </strong>+ idArray + <strong>""</strong>},</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">success: <strong>function </strong>(result) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>(result.success == <strong>'true'</strong>) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(result.<strong>msg</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>// </em><em>批量删除对应记录行</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#' </strong>+ <strong><em>roleTableID</em></strong>).bootstrapTable(<strong>'remove'</strong>,{ <strong>field</strong>: <strong>'id'</strong>, <strong>values</strong>: idArray});</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>//$('#' + roleTableID).bootstrapTable('refresh');</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">} <strong>else </strong>{</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(result.<strong>msg </strong>+ <strong>"</strong><strong>，</strong><strong>" </strong>+ result.<strong>reason</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">error: <strong>function</strong>(XmlHttpRequest, textStatus, errorThrown) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">alert(<strong>'</strong><strong>删除角色请求失败</strong><strong>' </strong>+ XmlHttpRequest.<strong>responseText</strong>);</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;"><strong>删除记录</strong></span></p>
<p><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#tableID'</strong>).bootstrapTable(<strong>'remove'</strong>,{ <strong>field</strong>: <strong>'id'</strong>, <strong>values</strong>: idArray});</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">field: 需要删除的行的 field 名称，</span></p>
<p><span style="font-family: 'courier new', courier;">values:&nbsp; 需要删除的行的值，类型为数组。</span></p>
<p><span style="font-family: 'courier new', courier;"><strong>&nbsp;</strong></span></p>
<p><span style="font-family: 'courier new', courier;"><strong>获取选中行</strong></span></p>
<p><span style="font-family: 'courier new', courier;"><strong>$</strong>(<strong>'#tableID'</strong>).bootstrapTable(<strong>'getSelections'</strong>);</span></p>
<p><span style="font-family: 'courier new', courier;">getSelections&nbsp;&nbsp; 返回所选的行，当没有选择任何行的时候返回一个空数组</span></p>
<p><span style="font-family: 'courier new', courier;"><strong>&nbsp;</strong></span></p>
<h3><span style="font-family: 'courier new', courier;">后台代码片段</span></h3>
<h4><span style="font-family: 'courier new', courier;">查询表数据</span></h4>
<p><span style="font-family: 'courier new', courier;">def role_tabe_data(request):</span></p>
<p><span style="font-family: 'courier new', courier;"><em>'''</em></span></p>
<p><span style="font-family: 'courier new', courier;"><em>获取角色表数据</em></span></p>
<p><span style="font-family: 'courier new', courier;">:param<em> request:</em></span></p>
<p><span style="font-family: 'courier new', courier;"><em>&nbsp;&nbsp;&nbsp; '''</em></span></p>
<p><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></p>
<p><span style="font-family: 'courier new', courier;">if request.method == 'GET':</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rows = [] <em># </em><em>用于存储记录行</em></span></p>
<p><span style="font-family: 'courier new', courier;">table_data = {"total": 0, "rows": []}</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">try:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; params = request.GET</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;"><em># search = params.get('search')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # </em><em>通过表格插件自带的搜索框搜索的内容</em><em> # </em><em>如果要实现，需要确认按哪些列搜索</em></span></p>
<p><span style="font-family: 'courier new', courier;">page_size =&nbsp; int(params.get('limit'))&nbsp; <em># </em><em>每页记录数</em></span></p>
<p><span style="font-family: 'courier new', courier;">offset = int(params.get('offset'))</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_index =&nbsp; offset // page_size + 1&nbsp; <em># </em><em>第几页数据</em></span></p>
<p><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></p>
<p><span style="font-family: 'courier new', courier;">sort = params.get('sort')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em># </em><em>排序字段</em><em> // </em><em>初始化页面时，无排序获取值为</em><em>None</em></span></p>
<p><span style="font-family: 'courier new', courier;">order = params.get('order')&nbsp;&nbsp;&nbsp;&nbsp; <em># </em><em>排序方式</em></span></p>
<p><span style="font-family: 'courier new', courier;">role_name = params.get('roleNameQ')&nbsp;&nbsp; <em># </em><em>角色名称</em></span></p>
<p><span style="font-family: 'courier new', courier;">start_time = params.get('startTime') <em># </em><em>开始时间</em></span></p>
<p><span style="font-family: 'courier new', courier;">end_time = params.get('endTime')&nbsp;&nbsp;&nbsp;&nbsp; <em># </em><em>结束时间</em></span></p>
<p><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></p>
<p><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></p>
<p><span style="font-family: 'courier new', courier;">sql_ddl = 'select id, name, remark, is_enable, creater, create_time, modifier,&nbsp; modify_time from website_role '</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">if role_name:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql_ddl = sql_ddl + "where name like '%s%s' " % (role_name, '%%')</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp_mark = 1</span></p>
<p><span style="font-family: 'courier new', courier;">else:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp_mark = 0</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">if start_time:</span></p>
<p><span style="font-family: 'courier new', courier;">if temp_mark:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql_ddl = sql_ddl + "and create_time&gt;='%s' " % start_time</span></p>
<p><span style="font-family: 'courier new', courier;">else:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql_ddl = sql_ddl + "where create_time&gt;='%s' " % start_time</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp_mark = 1</span></p>
<p><span style="font-family: 'courier new', courier;">else:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp_mark = 0</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">if end_time:</span></p>
<p><span style="font-family: 'courier new', courier;">if temp_mark:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql_ddl = sql_ddl + "and create_time&lt;='%s' " % end_time</span></p>
<p><span style="font-family: 'courier new', courier;">else:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql_ddl = sql_ddl + "where create_time&lt;='%s' " % start_time</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">if order and sort:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql_ddl = sql_ddl + 'order by %s %s' % (sort, order)</span></p>
<p><span style="font-family: 'courier new', courier;">else:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sql_ddl = sql_ddl + 'order by id desc' <em># </em><em>最新创建的排在最前面</em></span></p>
<p><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></p>
<p><span style="font-family: 'courier new', courier;">records = Role.objects.raw(sql_ddl)</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; records = json.loads(serializers.serialize('json', records), encoding='utf-8')</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; table_data["total"] = len(records)</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; paginator = Paginator(records, page_size) <em># </em><em>设置每页展示的数据</em></span></p>
<p><span style="font-family: 'courier new', courier;">try:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page = paginator.page(page_index)</span></p>
<p><span style="font-family: 'courier new', courier;">except PageNotAnInteger as e: <em># </em><em>如果请求的页面编号不存在，返回第一页数据</em></span></p>
<p><span style="font-family: 'courier new', courier;">logger.warn('%s' % e)</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page = paginator.page(1)</span></p>
<p><span style="font-family: 'courier new', courier;">except EmptyPage as e: <em># </em><em>如果请求页面，超出页面范围，返回最后一页数据</em></span></p>
<p><span style="font-family: 'courier new', courier;">logger.warn('%s' % e)</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page = paginator.page(paginator.num_pages)</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; records = page.object_list</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">for record in records:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; row = {}</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; row['id'] = record['pk']</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; row.update(record['fields'])</span></p>
<p><span style="font-family: 'courier new', courier;">if row['is_enable']:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; row['is_enable'] = '是'</span></p>
<p><span style="font-family: 'courier new', courier;">else:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; row['is_enable'] = '否'</span></p>
<p><span style="font-family: 'courier new', courier;">rows.append(row)</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; table_data["rows"] =&nbsp; rows</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {'data':table_data, 'msg':'获取角色信息成功', 'success':'true', 'reason': ''}</span></p>
<p><span style="font-family: 'courier new', courier;">except Exception as e:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error('getting roles info data failed: %s' % e)</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {'data':[], 'msg':'获取角色信息失败',&nbsp; 'success':'false', 'reason': '%s' % e}</span></p>
<p><span style="font-family: 'courier new', courier;">else:</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error('only get method allowed for getting roles data')</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {'data':[], 'msg':'获取角色信息失败',&nbsp; 'success':'false', 'reason': 'only get method allowed for getting roles data'}</span></p>
<p><span style="font-family: 'courier new', courier;">return JsonResponse(content)</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">说明：</span></p>
<p><span style="font-family: 'courier new', courier;"><strong>bootstarp-table</strong><strong>默认只支持按单列排序</strong>，默认打开页面，请求表数据时，会附加提供以下参数：</span></p>
<p><span style="font-family: 'courier new', courier;">order=asc&amp;offset=0&amp;limit=pageSize</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">或者如下(添加了搜索框的情况下)</span></p>
<p><span style="font-family: 'courier new', courier;">search=&amp;order=asc&amp;offset=0&amp;limit=pageSize</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">search：前端输入的搜索内容</span></p>
<p><span style="font-family: 'courier new', courier;">order:排序方式,asc - 升序 desc - 降序</span></p>
<p><span style="font-family: 'courier new', courier;">sort：需要排序的列</span></p>
<p><span style="font-family: 'courier new', courier;">offset：偏移</span></p>
<p><span style="font-family: 'courier new', courier;">limit：限制查询返回记录数，即每页记录数</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">如下，我们可以通过limit和offset获取要查询要查询页面的索引(索引从1开始)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>page_size =&nbsp; </strong><strong>int</strong><strong>(params.get(</strong><strong>'limit'</strong><strong>))&nbsp; </strong><strong><em># </em></strong><strong><em>每页记录数</em></strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>offset = </strong><strong>int</strong><strong>(params.get(</strong><strong>'offset'</strong><strong>))</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>page_index =&nbsp; offset // page_size + </strong><strong>1&nbsp; </strong><strong><em># </em></strong><strong><em>第几页数据</em></strong></span></p>
<h4><span style="font-family: 'courier new', courier;">新增记录</span></h4>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>def </strong>add_role(request):</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>'''</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>新增角色</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;&nbsp;&nbsp; '''</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>request.method == <strong>'POST'</strong>:</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>try</strong>:</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; params = request.POST</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; creater = str(request.user)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; role_name = params.get(<strong>'roleName'</strong>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em># </em><em>资源名称</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">role_desc = params.get(<strong>'roleDesc'</strong>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em># </em><em>资源描述</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">create_time = datetime.now().strftime(<strong>'%Y-%m-%d %H:%M:%S'</strong>)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em># </em><em>验证数据合法性</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if not </strong>role_name:</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {<strong>'msg'</strong>:<strong>'</strong><strong>新增角色失败</strong><strong>'</strong>,&nbsp; <strong>'success'</strong>:<strong>'false'</strong>, <strong>'reason'</strong>: <strong>'</strong><strong>角色名称不能为空</strong><strong>'</strong>}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>return </strong>JsonResponse(content)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; role_obj = Role(name=role_name,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">remark=role_desc,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">is_enable=1,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">creater = creater,</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">create_time=create_time)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; role_obj.save()</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data = {<strong>'id'</strong>:role_obj.id, <strong>'name'</strong>:role_name, <strong>'remark'</strong>:role_desc, <strong>'is_enable'</strong>:<strong>'</strong><strong>是</strong><strong>'</strong>, <strong>'creater'</strong>:str(creater), <strong>'create_time'</strong>:create_time, <strong>'modifier'</strong>:<strong>'-'</strong>, <strong>'modify_time'</strong>:<strong>'-' </strong>}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {<strong>'data'</strong>:data, <strong>'msg'</strong>:<strong>'</strong><strong>新增角色成功</strong><strong>'</strong>, <strong>'success'</strong>:<strong>'true'</strong>, <strong>'reason'</strong>:<strong>''</strong>}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>except </strong>Exception <strong>as </strong>e:</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error(<strong>'adding role failed: %s' </strong>% e)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {<strong>'data'</strong>:{}, <strong>'msg'</strong>:<strong>'</strong><strong>新增角色失败</strong><strong>'</strong>,&nbsp; <strong>'success'</strong>:<strong>'false'</strong>, <strong>'reason'</strong>: <strong>'%s' </strong>% e}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>else</strong>:</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error(<strong>'only post method allowed for adding role data'</strong>)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {<strong>'data'</strong>:{}, <strong>'msg'</strong>:<strong>'</strong><strong>新增角色失败</strong><strong>'</strong>,&nbsp; <strong>'success'</strong>:<strong>'false'</strong>, <strong>'reason'</strong>: <strong>'only get method allowed for adding role data'</strong>}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>return </strong>JsonResponse(content)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<h4><span style="font-family: 'courier new', courier;">修改记录</span></h4>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>def </strong>update_role(request):</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>'''</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>修改角色</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em>&nbsp;&nbsp;&nbsp; '''</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if </strong>request.method == <strong>'POST'</strong>:</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>try</strong>:</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; params = request.POST</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; modifier = str(request.user)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; id = params[<strong>'id'</strong>]</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; role_name = params[<strong>'roleName'</strong>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em># </em><em>资源名称</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">role_desc = params[<strong>'roleDesc'</strong>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em># </em><em>资源描述</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">modify_time = datetime.now().strftime(<strong>'%Y-%m-%d %H:%M:%S'</strong>)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em># </em><em>数据合法性验证</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>if not </strong>Role.objects.exclude(id=id).exists():</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>return </strong>JsonResponse({<strong>'msg'</strong>:<strong>'</strong><strong>修改失败</strong><strong>'</strong>, <strong>'success'</strong>:<strong>'false'</strong>,&nbsp; <strong>'reason'</strong>: <strong>'</strong><strong>角色不存在</strong><strong>'</strong>})</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><em># </em><em>更新数据</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">obj = Role.objects.get(id=id)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; obj.name = role_name</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; obj.remark = role_desc</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; obj.modify_time = modify_time</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; obj.modifier = modifier</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; obj.save()</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data = { <strong>'name'</strong>:role_name, <strong>'remark'</strong>:role_desc, <strong>'modify_time'</strong>:modify_time, <strong>'modifier'</strong>:modifier}&nbsp; <em># </em><em>返回需要更新的数据，以便页面更新对应行信息</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier;">content = {<strong>'msg'</strong>:<strong>'</strong><strong>修改成功</strong><strong>'</strong>, <strong>'data'</strong>:data, <strong>'success'</strong>:<strong>'true'</strong>, <strong>'reason'</strong>:<strong>''</strong>}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>except </strong>Exception <strong>as </strong>e:</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error(<strong>'updating role failed: %s' </strong>% e)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {<strong>'msg'</strong>:<strong>'</strong><strong>修改失败</strong><strong>'</strong>, <strong>'data'</strong>:{}, <strong>'success'</strong>:<strong>'false'</strong>, <strong>'reason'</strong>: <strong>'%s' </strong>% e}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>else</strong>:</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error(<strong>'only post method allowed for updating role'</strong>)</span></p>
<p align="left"><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {<strong>'msg'</strong>:<strong>'</strong><strong>修改失败</strong><strong>'</strong>, <strong>'data'</strong>:{}, <strong>'success'</strong>:<strong>'false'</strong>, <strong>'reason'</strong>: <strong>'only post method allowed for updating role'</strong>}</span></p>
<p align="left"><span style="font-family: 'courier new', courier;"><strong>return </strong>JsonResponse(content)</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<h4><span style="font-family: 'courier new', courier;">删除记录</span></h4>
<pre><code><span style="font-family: 'courier new', courier;"><strong>def </strong>delete_role(request):</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>'''</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>删除角色</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&nbsp;&nbsp;&nbsp; '''</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>if </strong>request.method == <strong>'POST'</strong>:</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>try</strong>:</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; params = request.POST</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; id_list = eval(params.get(<strong>'idArray'</strong>) + <strong>","</strong>) <em># </em><em>如果不加逗号，前端只传递一个参数时，这里获取到的</em><em>id_list</em><em>为单个整数值</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><em>&nbsp;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier;">mark = <strong>True</strong></span></pre>
<pre><code><span style="font-family: 'courier new', courier;">reason = <strong>''</strong></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>try</strong>:</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>with </strong>transaction.atomic():</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>for </strong>id <strong>in </strong>id_list:</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; role = Role.objects.filter(id=id)</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>if </strong>role.exists():</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; role.delete()</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>except </strong>Exception <strong>as </strong>e:</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; reason = <strong>'deleting role failed: %s' </strong>% e</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error(reason)</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mark = <strong>False</strong></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>&nbsp;</strong></span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if </strong>mark:</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>return </strong>JsonResponse({<strong>'msg'</strong>:<strong>'</strong><strong>删除成功</strong><strong>'</strong>, <strong>'success'</strong>:<strong>'true'</strong>,&nbsp; <strong>'reason'</strong>: <strong>''</strong>})</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>else</strong>:</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>return </strong>JsonResponse({<strong>'msg'</strong>:<strong>'</strong><strong>删除失败</strong><strong>'</strong>, <strong>'success'</strong>:<strong>'false'</strong>,&nbsp; <strong>'reason'</strong>: <strong>'%s' </strong>% reason})</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>except </strong>Exception <strong>as </strong>e:</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error(<strong>'deleting role failed: %s' </strong>% e)</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {<strong>'msg'</strong>:<strong>'</strong><strong>删除失败</strong><strong>'</strong>, <strong>'success'</strong>:<strong>'false'</strong>, <strong>'reason'</strong>: <strong>'%s' </strong>% e}</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>else</strong>:</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error(<strong>'only post method allowed for deleting role'</strong>)</span></pre>
<pre><code><span style="font-family: 'courier new', courier;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {<strong>'msg'</strong>:<strong>'</strong><strong>删除失败</strong><strong>'</strong>, <strong>'success'</strong>:<strong>'false'</strong>, <strong>'reason'</strong>: <strong>'only post method allowed for deleting role'</strong>}</span></pre>
<pre><code><span style="font-family: 'courier new', courier;"><strong>return </strong>JsonResponse(content)</span></pre>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier;">&nbsp;</span></p>
<ol>
<li><span style="font-family: 'courier new', courier;"><strong>3.&nbsp;&nbsp; </strong><strong>参考链接</strong></span></li>
</ol>
<p><span style="font-family: 'courier new', courier;"><a href="http://bootstrap-table.wenzhixin.net.cn/zh-cn/documentation/">http://bootstrap-table.wenzhixin.net.cn/zh-cn/documentation/</a></span></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>