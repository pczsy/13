<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修js常用设计模式' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>js常用设计模式</center></div><div class='banquan'>原文出处:本文由博客园博主new1one提供。<br/>
原文连接:https://www.cnblogs.com/wtfPro/p/10838565.html</div><br>
    <p>1.模块模式:</p>
<p>在立即执行函数表达式中定义的变量和方法在外界是访问不到的,只能通过其向外部提供的接口,"有限制"地访问.通过函数作用域解决了属性和方法的封装问题.</p>
<div class="cnblogs_Highlighter sh-gutter">
<div>
<div id="highlighter_154470" class="syntaxhighlighter  javascript">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
<div class="line number17 index16 alt2">17</div>
<div class="line number18 index17 alt1">18</div>
<div class="line number19 index18 alt2">19</div>
<div class="line number20 index19 alt1">20</div>
<div class="line number21 index20 alt2">21</div>
<div class="line number22 index21 alt1">22</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code>var</code>&nbsp;<code class="javascript plain">Person = (</code><code>function</code><code class="javascript plain">(){</code></div>
<div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>var</code>&nbsp;<code class="javascript plain">name =&nbsp;</code><code class="javascript string">"xin"</code><code class="javascript plain">;</code></div>
<div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>var</code>&nbsp;<code class="javascript plain">age = 22;</code></div>
<div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>function</code>&nbsp;<code class="javascript plain">getName(){</code></div>
<div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code>&nbsp;<code class="javascript plain">name;</code></div>
<div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>function</code>&nbsp;<code class="javascript plain">getAge(){</code></div>
<div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code>&nbsp;<code class="javascript plain">age;</code></div>
<div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>return</code>&nbsp;<code class="javascript plain">{</code></div>
<div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">getName: getName,</code></div>
<div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">getAge: getAge</code></div>
<div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number14 index13 alt1"><code class="javascript plain">})();</code></div>
<div class="line number15 index14 alt2">&nbsp;</div>
<div class="line number16 index15 alt1"><code class="javascript plain">console.log(age);&nbsp;</code><code class="javascript comments">// 报错:age未定义</code></div>
<div class="line number17 index16 alt2"><code class="javascript plain">console.log(name);&nbsp;</code><code class="javascript comments">// 报错:name未定义</code></div>
<div class="line number18 index17 alt1"><code class="javascript plain">console.log(Person.age);&nbsp;</code><code class="javascript comments">// undefined</code></div>
<div class="line number19 index18 alt2"><code class="javascript plain">console.log(Person.name);&nbsp;</code><code class="javascript comments">// undefined</code></div>
<div class="line number20 index19 alt1"><code class="javascript comments">// 只能通过Person提供的接口访问相应的变量</code></div>
<div class="line number21 index20 alt2"><code class="javascript plain">console.log(Person.getName());&nbsp;</code><code class="javascript comments">// xin</code></div>
<div class="line number22 index21 alt1"><code class="javascript plain">console.log(Person.getAge());&nbsp;</code><code class="javascript comments">// 22</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>2.构造函数模式</p>
<div class="cnblogs_Highlighter sh-gutter">
<div>
<div id="highlighter_683613" class="syntaxhighlighter  javascript">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
<div class="line number17 index16 alt2">17</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code>function</code>&nbsp;<code class="javascript plain">Person(name,age){</code></div>
<div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>this</code><code class="javascript plain">.name = name;</code></div>
<div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>this</code><code class="javascript plain">.age = age;</code></div>
<div class="line number4 index3 alt1"><code class="javascript plain">}</code></div>
<div class="line number5 index4 alt2"><code class="javascript plain">Person.prototype = {</code></div>
<div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">constructor: Person;</code></div>
<div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">printName:&nbsp;</code><code>function</code><code class="javascript plain">(){</code></div>
<div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">console.log(</code><code>this</code><code class="javascript plain">.name);</code></div>
<div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">},</code></div>
<div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">printAge:&nbsp;</code><code>function</code><code class="javascript plain">(){</code></div>
<div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">console.log(</code><code>this</code><code class="javascript plain">.age);</code></div>
<div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number13 index12 alt2"><code class="javascript plain">}</code></div>
<div class="line number14 index13 alt1">&nbsp;</div>
<div class="line number15 index14 alt2"><code>var</code>&nbsp;<code class="javascript plain">person =&nbsp;</code><code>new</code>&nbsp;<code class="javascript plain">Person(</code><code class="javascript string">'xin'</code><code class="javascript plain">, 22);</code></div>
<div class="line number16 index15 alt1"><code class="javascript plain">person.printName();&nbsp;</code><code class="javascript comments">// xin</code></div>
<div class="line number17 index16 alt2"><code class="javascript plain">person.printAge();&nbsp;</code><code class="javascript comments">// 22</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>3.混合模式</p>
<div class="cnblogs_Highlighter sh-gutter">
<div>
<div id="highlighter_790067" class="syntaxhighlighter  javascript">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
<div class="line number17 index16 alt2">17</div>
<div class="line number18 index17 alt1">18</div>
<div class="line number19 index18 alt2">19</div>
<div class="line number20 index19 alt1">20</div>
<div class="line number21 index20 alt2">21</div>
<div class="line number22 index21 alt1">22</div>
<div class="line number23 index22 alt2">23</div>
<div class="line number24 index23 alt1">24</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code>function</code>&nbsp;<code class="javascript plain">Person(name,age){</code></div>
<div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>this</code><code class="javascript plain">.name = name;</code></div>
<div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>this</code><code class="javascript plain">.age = age;</code></div>
<div class="line number4 index3 alt1"><code class="javascript plain">};</code></div>
<div class="line number5 index4 alt2"><code class="javascript plain">Person.prototype.printName =&nbsp;</code><code>function</code><code class="javascript plain">(){</code></div>
<div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">console.log(</code><code>this</code><code class="javascript plain">.name);</code></div>
<div class="line number7 index6 alt2"><code class="javascript plain">}</code></div>
<div class="line number8 index7 alt1"><code>function</code>&nbsp;<code class="javascript plain">Student(name,age){</code></div>
<div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript comments">// 继承 Person 的属性</code></div>
<div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">Person.call(</code><code>this</code><code class="javascript plain">,name,age);</code></div>
<div class="line number11 index10 alt2"><code class="javascript plain">}</code></div>
<div class="line number12 index11 alt1"><code>function</code>&nbsp;<code class="javascript plain">create(prototype){</code></div>
<div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>function</code>&nbsp;<code class="javascript plain">F(){};</code></div>
<div class="line number14 index13 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">F.prototype = prototype;</code></div>
<div class="line number15 index14 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>return</code>&nbsp;<code>new</code>&nbsp;<code class="javascript plain">F();</code></div>
<div class="line number16 index15 alt1"><code class="javascript plain">}</code></div>
<div class="line number17 index16 alt2">&nbsp;</div>
<div class="line number18 index17 alt1"><code class="javascript comments">// 让Student的原型指向一个对象,该对象的原型指向了Person.prototype,通过这种方式继承 Person 的方法</code></div>
<div class="line number19 index18 alt2"><code class="javascript plain">Student.prototype = create(Person.prototype);</code></div>
<div class="line number20 index19 alt1"><code class="javascript plain">Student.prototype.printAge =&nbsp;</code><code>function</code><code class="javascript plain">(){</code></div>
<div class="line number21 index20 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">console.log(</code><code>this</code><code class="javascript plain">.age);</code></div>
<div class="line number22 index21 alt1"><code class="javascript plain">}</code></div>
<div class="line number23 index22 alt2"><code>var</code>&nbsp;<code class="javascript plain">student =&nbsp;</code><code>new</code>&nbsp;<code class="javascript plain">Student(</code><code class="javascript string">'xin'</code><code class="javascript plain">,22);</code></div>
<div class="line number24 index23 alt1"><code class="javascript plain">student.printName();&nbsp;</code><code class="javascript comments">// "xin"</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>4.工厂模式</p>
<div class="cnblogs_Highlighter sh-gutter">
<div>
<div id="highlighter_354315" class="syntaxhighlighter  javascript">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code>function</code>&nbsp;<code class="javascript plain">Person(name, age){</code></div>
<div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>var</code>&nbsp;<code class="javascript plain">person =&nbsp;</code><code>new</code>&nbsp;<code class="javascript plain">Object();</code></div>
<div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">person.name = name;</code></div>
<div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">person.age = age;</code></div>
<div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">person.printName =&nbsp;</code><code>function</code><code class="javascript plain">(){</code></div>
<div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">console.log(</code><code>this</code><code class="javascript plain">.name);</code></div>
<div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">};</code></div>
<div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">person.printAge =&nbsp;</code><code>function</code><code class="javascript plain">(){</code></div>
<div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">console.log(</code><code>this</code><code class="javascript plain">.age);</code></div>
<div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>return</code>&nbsp;<code class="javascript plain">person;</code></div>
<div class="line number12 index11 alt1"><code class="javascript plain">}</code></div>
<div class="line number13 index12 alt2">&nbsp;</div>
<div class="line number14 index13 alt1"><code>var</code>&nbsp;<code class="javascript plain">person = Person(</code><code class="javascript string">'xin'</code><code class="javascript plain">,22);</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>5.单例模式</p>
<div class="cnblogs_Highlighter sh-gutter">
<div>
<div id="highlighter_201650" class="syntaxhighlighter  javascript">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code>var</code>&nbsp;<code class="javascript plain">Singleton = (</code><code>function</code>&nbsp;<code class="javascript plain">(){</code></div>
<div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>var</code>&nbsp;<code class="javascript plain">instance;</code></div>
<div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>function</code>&nbsp;<code class="javascript plain">init(){</code></div>
<div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code>&nbsp;<code class="javascript plain">{</code></div>
<div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">//</code></div>
<div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">};</code></div>
<div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>return</code>&nbsp;<code class="javascript plain">{</code></div>
<div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">getInstance:&nbsp;</code><code>function</code><code class="javascript plain">(){</code></div>
<div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code><code class="javascript plain">(!instance){</code></div>
<div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">instace = init();</code></div>
<div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code>&nbsp;<code class="javascript plain">instance;</code></div>
<div class="line number14 index13 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number15 index14 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">};</code></div>
<div class="line number16 index15 alt1"><code class="javascript plain">})();</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>6.发布-订阅模式:</p>
<p>发布-订阅模式又叫做观察者模式,定义了对象之间一对多的依赖关系,当一个对象的状态发生改变时,所有依赖与它的对象都将得到通知.</p>
<p>发布-订阅模式广泛应用于异步编程之中,是一种替代回调函数的方案.多个事件处理函数可以订阅同一个事件,当该事件发生后,与其相对应的多个事件处理函数都会运行<br />取代对象之间硬编码的通知机制,一个对象不用再显示的调用另外一个对象的某个接口,降低模块之间的耦合程度,虽然不清楚彼此的细节,但是不影响他们之间相互通信<br />应用</p>
<p>DOM事件<br />DOM事件是一种典型的发布-订阅模式,对一个dom节点的一个事件进行监听,当操作dom节点时,触发相应的事件,响应函数执行.事件函数对dom节点完全未知,不用去理会是什么事件,如何触发,执行就好.</p>
<p>自定义事件<br />指定发布者<br />"发布-订阅"这种关系用一个对象表示,键表示事件名,值是一个由事件处理程序组成的数组,相当于订阅者的花名册<br />发布消息后,遍历缓存列表,依次执行订阅者的回调函数</p>
<div class="cnblogs_Highlighter sh-gutter">
<div>
<div id="highlighter_112199" class="syntaxhighlighter  javascript">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
<div class="line number17 index16 alt2">17</div>
<div class="line number18 index17 alt1">18</div>
<div class="line number19 index18 alt2">19</div>
<div class="line number20 index19 alt1">20</div>
<div class="line number21 index20 alt2">21</div>
<div class="line number22 index21 alt1">22</div>
<div class="line number23 index22 alt2">23</div>
<div class="line number24 index23 alt1">24</div>
<div class="line number25 index24 alt2">25</div>
<div class="line number26 index25 alt1">26</div>
<div class="line number27 index26 alt2">27</div>
<div class="line number28 index27 alt1">28</div>
<div class="line number29 index28 alt2">29</div>
<div class="line number30 index29 alt1">30</div>
<div class="line number31 index30 alt2">31</div>
<div class="line number32 index31 alt1">32</div>
<div class="line number33 index32 alt2">33</div>
<div class="line number34 index33 alt1">34</div>
<div class="line number35 index34 alt2">35</div>
<div class="line number36 index35 alt1">36</div>
<div class="line number37 index36 alt2">37</div>





















</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code>var</code>&nbsp;<code class="javascript plain">EventCenter = (</code><code>function</code><code class="javascript plain">(){&nbsp;</code></div>
<div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript comments">// 将所有的"发布-订阅"关系放到events中</code></div>
<div class="line number3 index2 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>var</code>&nbsp;<code class="javascript plain">events = {};</code></div>
<div class="line number4 index3 alt1">&nbsp;</div>
<div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript comments">/**</code></div>
<div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">* 给事件绑定事件处理程序</code></div>
<div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">* evt:事件名</code></div>
<div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">* handler:事件处理程序</code></div>
<div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">*/</code></div>
<div class="line number10 index9 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>function</code>&nbsp;<code class="javascript plain">on(evt, handler){</code></div>
<div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">events[evt] = events[evt]||[];</code></div>
<div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">events[evt].push({</code></div>
<div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">handler:hander</code></div>
<div class="line number14 index13 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">});</code></div>
<div class="line number15 index14 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number16 index15 alt1">&nbsp;</div>
<div class="line number17 index16 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript comments">/**</code></div>
<div class="line number18 index17 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">* 发布消息(触发事件),并执行相应的事件处理程序</code></div>
<div class="line number19 index18 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">* evt:事件名</code></div>
<div class="line number20 index19 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">* args:给事件处理程序传递的参数</code></div>
<div class="line number21 index20 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">*/</code></div>
<div class="line number22 index21 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>function</code>&nbsp;<code class="javascript plain">fire(evt,args){</code></div>
<div class="line number23 index22 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code><code class="javascript plain">(!events[evt]){</code></div>
<div class="line number24 index23 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code><code class="javascript plain">;</code></div>
<div class="line number25 index24 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number26 index25 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript comments">// 遍历事件处理程序列表,执行其中每一个事件处理程序</code></div>
<div class="line number27 index26 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code>for</code><code class="javascript plain">(</code><code>var</code>&nbsp;<code class="javascript plain">i=0;i&lt;events[evt].length;i++){</code></div>
<div class="line number28 index27 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">events[evt][i].handler(args);</code></div>
<div class="line number29 index28 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number30 index29 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number31 index30 alt2">&nbsp;</div>
<div class="line number32 index31 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript comments">// 使用模块模式的方式,向外界提供绑定事件处理程序和触发事件的接口</code></div>
<div class="line number33 index32 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>return</code>&nbsp;<code class="javascript plain">{</code></div>
<div class="line number34 index33 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">on: on,</code></div>
<div class="line number35 index34 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">fire: fire</code></div>
<div class="line number36 index35 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number37 index36 alt2"><code class="javascript plain">})();</code></div>





















</div>





















</td>





















</tr>





















</tbody>





















</table>





















</div>





















</div>





















</div>
<p>实际应用</p>
<div class="cnblogs_Highlighter sh-gutter">
<div>
<div id="highlighter_473631" class="syntaxhighlighter  javascript">
<table border="0" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="gutter">
<div class="line number1 index0 alt2">1</div>
<div class="line number2 index1 alt1">2</div>
<div class="line number3 index2 alt2">3</div>
<div class="line number4 index3 alt1">4</div>
<div class="line number5 index4 alt2">5</div>
<div class="line number6 index5 alt1">6</div>
<div class="line number7 index6 alt2">7</div>
<div class="line number8 index7 alt1">8</div>
<div class="line number9 index8 alt2">9</div>
<div class="line number10 index9 alt1">10</div>
<div class="line number11 index10 alt2">11</div>
<div class="line number12 index11 alt1">12</div>
<div class="line number13 index12 alt2">13</div>
<div class="line number14 index13 alt1">14</div>
<div class="line number15 index14 alt2">15</div>
<div class="line number16 index15 alt1">16</div>
<div class="line number17 index16 alt2">17</div>
<div class="line number18 index17 alt1">18</div>
<div class="line number19 index18 alt2">19</div>
<div class="line number20 index19 alt1">20</div>
<div class="line number21 index20 alt2">21</div>
<div class="line number22 index21 alt1">22</div>
<div class="line number23 index22 alt2">23</div>
<div class="line number24 index23 alt1">24</div>
<div class="line number25 index24 alt2">25</div>
<div class="line number26 index25 alt1">26</div>
<div class="line number27 index26 alt2">27</div>
<div class="line number28 index27 alt1">28</div>
<div class="line number29 index28 alt2">29</div>
<div class="line number30 index29 alt1">30</div>
<div class="line number31 index30 alt2">31</div>
<div class="line number32 index31 alt1">32</div>
<div class="line number33 index32 alt2">33</div>
<div class="line number34 index33 alt1">34</div>
<div class="line number35 index34 alt2">35</div>
<div class="line number36 index35 alt1">36</div>
<div class="line number37 index36 alt2">37</div>
<div class="line number38 index37 alt1">38</div>
<div class="line number39 index38 alt2">39</div>





















</td>
<td class="code">
<div class="container">
<div class="line number1 index0 alt2"><code>var</code>&nbsp;<code class="javascript plain">Event = (</code><code>function</code><code class="javascript plain">(){&nbsp;</code></div>
<div class="line number2 index1 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>var</code>&nbsp;<code class="javascript plain">events = {};</code></div>
<div class="line number3 index2 alt2">&nbsp;</div>
<div class="line number4 index3 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code>function</code>&nbsp;<code class="javascript plain">on(evt, handler){</code></div>
<div class="line number5 index4 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">events[evt] = events[evt]||[];</code></div>
<div class="line number6 index5 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">events[evt].push({</code></div>
<div class="line number7 index6 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">handler:handler</code></div>
<div class="line number8 index7 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">});</code></div>
<div class="line number9 index8 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number10 index9 alt1">&nbsp;</div>
<div class="line number11 index10 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>function</code>&nbsp;<code class="javascript plain">fire(evt,args){</code></div>
<div class="line number12 index11 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code>if</code><code class="javascript plain">(!events[evt]){</code></div>
<div class="line number13 index12 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code>return</code><code class="javascript plain">;</code></div>
<div class="line number14 index13 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number15 index14 alt2">&nbsp;</div>
<div class="line number16 index15 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code>for</code><code class="javascript plain">(</code><code>var</code>&nbsp;<code class="javascript plain">i=0;i&lt;events[evt].length;i++){</code></div>
<div class="line number17 index16 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">events[evt][i].handler(args);</code></div>
<div class="line number18 index17 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number19 index18 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number20 index19 alt1">&nbsp;</div>
<div class="line number21 index20 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>function</code>&nbsp;<code class="javascript plain">off(evt){</code></div>
<div class="line number22 index21 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code>delete</code>&nbsp;<code class="javascript plain">events[evt];</code></div>
<div class="line number23 index22 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number24 index23 alt1">&nbsp;</div>
<div class="line number25 index24 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code>return</code>&nbsp;<code class="javascript plain">{</code></div>
<div class="line number26 index25 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">on: on,</code></div>
<div class="line number27 index26 alt2"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">fire: fire,</code></div>
<div class="line number28 index27 alt1"><code class="javascript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="javascript plain">off: off</code></div>
<div class="line number29 index28 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">}</code></div>
<div class="line number30 index29 alt1"><code class="javascript plain">})();</code></div>
<div class="line number31 index30 alt2"><code class="javascript plain">Event.on(</code><code class="javascript string">'change'</code><code class="javascript plain">,&nbsp;</code><code>function</code><code class="javascript plain">(val){</code></div>
<div class="line number32 index31 alt1"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">console.log(</code><code class="javascript string">'change...&nbsp; now val is '</code>&nbsp;<code class="javascript plain">+ val);&nbsp;</code></div>
<div class="line number33 index32 alt2"><code class="javascript plain">});</code></div>
<div class="line number34 index33 alt1"><code class="javascript plain">Event.on(</code><code class="javascript string">'click'</code><code class="javascript plain">,&nbsp;</code><code>function</code><code class="javascript plain">(val){</code></div>
<div class="line number35 index34 alt2"><code class="javascript spaces">&nbsp;&nbsp;</code><code class="javascript plain">console.log(</code><code class="javascript string">'click.... now val is '</code><code class="javascript plain">+ val);</code></div>
<div class="line number36 index35 alt1"><code class="javascript plain">})</code></div>
<div class="line number37 index36 alt2"><code class="javascript plain">Event.fire(</code><code class="javascript string">'change'</code><code class="javascript plain">,&nbsp;</code><code class="javascript string">'xin'</code><code class="javascript plain">);</code></div>
<div class="line number38 index37 alt1"><code class="javascript plain">Event.fire(</code><code class="javascript string">'click'</code><code class="javascript plain">,&nbsp;</code><code class="javascript string">'xin'</code><code class="javascript plain">);</code></div>
<div class="line number39 index38 alt2"><code class="javascript plain">Event.off(</code><code class="javascript string">'change'</code><code class="javascript plain">);</code></div>
<p><code class="javascript plain">&nbsp;</code></p>





















</div>





















</td>





















</tr>





















</tbody>





















</table>





















</div>





















</div>





















</div>
<p>&nbsp;</p>
<p>7.单体模式</p>
<div class="cnblogs_Highlighter">
<pre><code> // 单体模式又称模块模式：用一个命名空间包含自己的所有代码的全局对象
 // 简单单体模式
 var timer = {
   seconds: 0,
   start: function () {
     setInterval(() =&gt; {
       this.seconds++
     }, 1000);
   },
   doFunc() {
     console.log('单体模式')
   }
 }
 setTimeout(() =&gt; {
   timer.doFunc()
 }, 3000);
 
 // 单体模式表现形式2
 var person = function personInfo(params) {
   this.name = 'name';
   this.getName = function () {
     // doSomeThing
   }
   this.method = function () {
     // doSomeThing
   }
 }

 // 单体模式+闭包表现形式
 // 模块模式
 var DJtest = {}
 DJtest.common = function () {
   // doSomeThing
 }
 DJtest.init = function () {
   // doSomeThing
 }
 DJtest.func = function () {
   var val = 1
   function add1(str) {
     return parseInt(str) + val++
   }
   console.log(add1(1)) // 2
   return {
     sumAdd: function (str) {
       return add1(str)
     }
   }
 }()
 console.log(DJtest.func.sumAdd(1)) // 3
 console.log(DJtest.func.sumAdd(1)) // 4
 console.log(DJtest.func.sumAdd(1)) // 5
</pre>
</div>
<p>8.策略模式</p>
<div class="cnblogs_Highlighter">
<pre><code>// 策略模式的定义是：定义一系列的算法/业务规则，把它们一个个封装起来，并且使它们可以相互替换。

// demo：根据级别计算奖金
var calculateBouns = function(salary,level) {
  if(level === 'A') {
      return salary * 4;
  }
  if(level === 'B') {
      return salary * 3;
  }
  if(level === 'C') {
      return salary * 2;
  }
};

console.log(calculateBouns(4000,'A')); // 16000
console.log(calculateBouns(2500,'B')); // 7500

/**
 * describe：
 * 1，函数包含了很多if-else语句;
 * 2，函数缺乏弹性，扩展需要添加新的if,else;
 * 3，复用差
 * */

// 策略模式改造
var obj = {
  "A": function (salary) {
    return salary * 4;
  },
  "B": function (salary) {
    return salary * 3;
  },
  "C": function (salary) {
    return salary * 2;
  }
};
var calculateBouns = function (level, salary) {
  return obj[level](salary);
};
console.log(calculateBouns('A',10000)); // 40000

// 优点：1. 策略模式利用组合，委托等技术和思想，有效的避免很多if条件语句。
//      2. 策略模式提供了开放-封闭原则，使代码更容易理解和扩展。
//      3. 策略模式中的代码可以复用。
// tips：开放-封闭原则：对于扩展是开放的(Open for extension)，对于更改是封闭的(Closed for modification)
</pre>
</div>
<p>&nbsp;9.代理模式：<a href="https://blog.csdn.net/wuyufa1994/article/details/86557788" target="_blank">参考链接</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>　　</p>
<p>　　</p>
<p>.</p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>