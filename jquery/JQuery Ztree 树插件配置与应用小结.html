<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修JQuery Ztree 树插件配置与应用小结' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>JQuery Ztree 树插件配置与应用小结</center></div><div class='banquan'>原文出处:本文由博客园博主授客提供。<br/>
原文连接:https://www.cnblogs.com/shouke/p/11388103.html</div><br>
    <p align="center"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>JQuery Ztree </strong><strong>树插件配置与应用小结</strong></span></p>
<p align="right"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>by:</strong><strong>授客</strong><strong> QQ</strong><strong>：</strong><strong>1033553122</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>测试环境</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">Win7</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">jquery-3.2.1.min.js</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">下载地址：</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><a href="https://gitee.com/ishouke/front_end_plugin/blob/master/jquery-3.2.1.min.js">https://gitee.com/ishouke/front_end_plugin/blob/master/jquery-3.2.1.min.js</a></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">zTree_v3-master.zip</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">下载地址：</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><a href="https://github.com/zTree/zTree_v3">https://github.com/zTree/zTree_v3</a></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>插件配置与应用</strong></span></p>
<h2><span style="font-family: 'courier new', courier; font-size: 14px;">应用效果展示</span></h2>
<p><img src="./images/JQuery Ztree 树插件配置与应用小结0.png" alt="" /></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;"><img src="./images/JQuery Ztree 树插件配置与应用小结1.png" alt="" />&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h2><span style="font-family: 'courier new', courier; font-size: 14px;">HTML代码片段</span></h2>
<p><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;!DOCTYPE html&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;html lang="zh-cn"&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;head&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; &lt;meta charset="utf-8"&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; <em>&lt;!-- </em><em>上述</em><em>3</em><em>个</em><em>meta</em><em>标签</em><em>*</em><em>必须</em><em>*</em><em>放在最前面，任何其他内容都</em><em>*</em><em>必须</em><em>*</em><em>跟随其后！</em><em> --&gt;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>{% load staticfiles %}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp; </em>&nbsp;&hellip;&hellip;略</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; &lt;!-- zTree --&gt;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>&lt;link rel="stylesheet" href="{% static 'website/zTree-3.5/css/demo.css' %}" type="text/css" /&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; &lt;link rel="stylesheet" href="{% static 'website/zTree-3.5/css/metroStyle/metroStyle.css' %}" type="text/css" /&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; &lt;script type="text/javascript" src="{% static 'website/zTree-3.5/js/jquery.ztree.core.js' %}" defer&gt;&lt;/script&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; &lt;script type="text/javascript" src="{% static 'website/zTree-3.5/js/jquery.ztree.excheck.js' %}" defer&gt;&lt;/script&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; &lt;script type="text/javascript" src="{% static 'website/zTree-3.5/js/jquery.ztree.exedit.js' %}" defer&gt;&lt;/script&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp; </em>&nbsp;&hellip;&hellip;略</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;script type="text/javascript" src="{% static 'website/js/resource-setting.js' %}" defer&gt;&lt;/script&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&hellip;&hellip;略</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;/head&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;body&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;div class="container-fluid"&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; &lt;div class="row"&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;div&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;button class="btn btn-primary" data-toggle="modal" data-target="#resourceDialog"&gt;点击创建一级根目录&lt;/button&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/div&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;div class="zTreeDemoBackground left"&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>{#&nbsp;&nbsp;&nbsp; &lt;ul id="treeDemo" class="ztree" style="height:800px"&gt;&lt;/ul&gt;#}</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>&lt;ul id="ztree" class="ztree"&gt;&lt;/ul&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/div&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp; &nbsp;&nbsp;&lt;/div&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;/div&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp; </em>&nbsp;&hellip;&hellip;略</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;/body&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;/html&gt;</span></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h2><span style="font-family: 'courier new', courier; font-size: 14px;">JS代码片段</span></h2>
<p><span style="font-family: 'courier new', courier; font-size: 14px;">resource-setting.js</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>/**</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;* ztree </em><em>设置</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;*</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;*/</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var <em>setting </em>= {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; view: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; addHoverDom: <em>addHoverDom</em>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; removeHoverDom: <em>removeHoverDom</em>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; selectedMulti: false</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; check: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enable: false &nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>},</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; data: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; simpleData: { <em>// true / false </em><em>分别表示</em><em>使用</em><em> / </em><em>不使用</em><em>简单数据模式</em><em>如果设置为</em><em> true</em><em>，请务必设置</em><em> setting.data.simpleData </em><em>内的其他参数</em><em>: idKey / pIdKey / rootPId</em><em>，并且让数据满足父子关系。</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>enable: true,</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; idKey: "id",&nbsp;&nbsp; <em>// </em><em>节点数据中保存唯一标识的属性名称。</em><em>[setting.data.simpleData.enable = true </em><em>时生效</em><em>]</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>pIdKey: "pId", <em>// </em><em>节点数据中保存其父节点唯一标识的属性名称。</em><em>[setting.data.simpleData.enable = true </em><em>时生效</em><em>]</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>rootPId: 0&nbsp;&nbsp;&nbsp;&nbsp; <em>// </em><em>用于修正根节点父节点数据，即</em><em> pIdKey </em><em>指定的属性值。</em><em>[setting.data.simpleData.enable = true </em><em>时生效</em><em>]</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; edit: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enable: true</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; callback: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beforeRemove: <em>zTreeBeforeRemove</em>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beforeEditName: <em>zTreeBeforeEditName</em>,</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beforeDrag:function(){return false;} <em>// </em><em>禁止拖拽</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>/**</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;* </em><em>用于当鼠标移动到节点上时，显示用户自定义控件，同时给控件</em><em>(</em><em>例中为</em><em>&ldquo;</em><em>新增</em><em>&rdquo;</em><em>按钮</em><em>)</em><em>绑定点击事件：打开新增资源树节点信息模态对话框</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;*/</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">function <em>addHoverDom</em>(treeId, treeNode) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; var sObj = $("#" + treeNode.tId + "_span"); <em>// </em><em>获取对应节点</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>if (treeNode.editNameFlag || $("#addBtn_"+treeNode.tId).length&gt;0) return;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; var addStr = "&lt;span class='button add' id='addBtn_" + treeNode.tId</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; + "' title='add node' onfocus='this.blur();'&gt;&lt;/span&gt;";</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; sObj.after(addStr);</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; var btn = $("#addBtn_"+treeNode.tId); <em>//&ldquo;</em><em>新增</em><em>&rdquo;</em><em>图标按钮</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>if (btn) btn.bind("click", function(){ <em>// </em><em>给</em><em>&ldquo;</em><em>新增</em><em>&rdquo;</em><em>图标按钮绑定点击事件</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><em>currentZtreeNode </em>= treeNode; <em>// </em><em>保存点击的节点，作为新增资源节点的父节点，在提交表单时使用</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><em>opType </em>= 'add';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>// </em><em>设置操作类型为</em><em>新增</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>$('#'+ <em>resourceDialogID</em>).modal('show'); <em>// </em><em>打开对话框</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>return false;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; });</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>/**</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;* </em><em>于当鼠标移出节点时，隐藏用户自定义控件</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;* @param treeId</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;* @param treeNode</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;*/</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">function <em>removeHoverDom</em>(treeId, treeNode) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; $("#addBtn_" + treeNode.tId).unbind().remove();</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>/**</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em> * </em><em>用于捕获节点被删除之前的事件回调函数，并且根据返回值确定是否允许删除操作</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em> * @param treeId</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em> * @param treeNode</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em> * @returns {boolean}</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em> */</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">function <em>zTreeBeforeRemove</em>(treeId, treeNode) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; var index = treeNode.name.indexOf(' [')</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; var nodeName = ''</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; if (index != -1) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodeName = treeNode.name.substr(0, index);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; } else {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodeName = treeNode.name;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; var mark = true; <em>// </em><em>标记是否删除成功</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>if (confirm('是否删除资源"' + nodeName + '"?')) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var nodeID = treeNode.id;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $.ajax({</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type: "POST",</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; url: <em>deleteResourceZtreeNodeURL</em>,</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; async: false,</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data: {'nodeID': nodeID},</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; success: function (result) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (result.success == 'true') {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert(result.msg);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mark = true;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert(result.msg + "，" + result.reason);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mark = false;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error: function(XmlHttpRequest, textStatus, errorThrown) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert('删除资源树节点请求失败' + XmlHttpRequest.responseText);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mark = false;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return mark;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; } else {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">}</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>/**</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em> * </em><em>用于捕获节点编辑按钮的</em><em> click </em><em>事件，并且根据返回值确定是否允许进入名称编辑状态，同时打开资源树修改节点信息模态对话框</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em> * @param treeId</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em> * @param treeNode</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em> * @returns {boolean}</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em> */</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">function <em>zTreeBeforeEditName</em>(treeId, treeNode) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; <em>currentZtreeNode </em>= treeNode;&nbsp; <em>// </em><em>记录操作的节点</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em><em>opType </em>= 'update';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>// </em><em>设置操作类型为</em><em>修改</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>var nodeID = treeNode.id;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; <em>// </em><em>获取节点信息，并填充表单</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>$.ajax({</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type: "get",</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; url: <em>queryResourceZtreeNodeURL</em>,</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; async: false,</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;data: {'nodeID': nodeID },</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; success: function (result) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (result.success == 'true') {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>//alert(result.msg);</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>var resourceFormSelector = '#' +&nbsp; <em>resourceFormID</em>;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>// </em><em>序列化表单，获取表单组件</em><em> name</em><em>属性，</em><em>表单设计</em><em> name</em><em>属性值</em><em>和</em><em>id</em><em>属性值是一样的，所以也就获取表单组件</em><em>id</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>var dataArray = $(resourceFormSelector).serializeArray();</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $.each(dataArray, function () {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $('#' + this.name).val(result.data[this.name]);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$('#' + <em>resourceDialogID</em>).modal('show'); <em>// </em><em>打开修改模态对话框</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>} else {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>// </em><em>重置变量</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><em>currentZtreeNode </em>= null;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>opType </em>= 'add';</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert(result.msg + "，" + result.reason);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;},</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; error: function(XmlHttpRequest, textStatus, errorThrown) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>// </em><em>重置变量</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><em>opType </em>= 'add';</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>currentZtreeNode </em>= null;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert('查询资源树节点信息请求失败' + XmlHttpRequest.responseText);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; });</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; return false; <em>// </em><em>不进入编辑状态</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">}</span></pre>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">getResourcesTreeNodes().then(function(result) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; if (result.success == 'true') {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $.fn.zTree.init($('#' + <em>resouceZtreeID</em>), <em>setting</em>,&nbsp; result.data);</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; } else {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert(result.msg + "，" + result.reason);</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">});</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h2><span style="font-family: 'courier new', courier; font-size: 14px;">代码分析</span></h2>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.view.addHoverDom</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">用于当鼠标移动到节点上时，显示用户自定义控件，显示隐藏状态同 zTree 内部的编辑、删除按钮</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">请务必与 setting.view.removeHoverDom 同时使用；属于高级应用，使用时请确保对 zTree 比较了解。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值：null</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeIdString&nbsp; 对应 zTree 的 treeId，便于用户操控</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeNodeJSON&nbsp;&nbsp; 需要显示自定义控件的节点 JSON 数据对象</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.view.removeHoverDom</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">用于当鼠标移出节点时，隐藏用户自定义控件，显示隐藏状态同 zTree 内部的编辑、删除按钮</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">请务必与 addHoverDom 同时使用；属于高级应用，使用时请确保对 zTree 比较了解。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值：null</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeIdString&nbsp; 对应 zTree 的 treeId，便于用户操控</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeNodeJSON&nbsp; 需要隐藏自定义控件的节点 JSON 数据对象</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.check.enable</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">设置 zTree 的节点上是否显示 checkbox / radio</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值: false</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数值：true / false &nbsp;分别表示 显示 / 不显示 复选框或单选框</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">setting 举例：需要显示 checkbox</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var setting = {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; check: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enable: true</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">......</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.check.chkStyle</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">勾选框类型(checkbox 或 radio）[setting.check.enable = true 时生效]</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值："checkbox"</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数值： 值为 "checkbox" 时，显示 checkbox 选择框，setting.check.chkboxType 属性有效。 值为 "radio" 时，显示 radio 选择框， setting.check.radioType 属性有效。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">请注意大小写，不要改变</span></p>
<p><img src="./images/JQuery Ztree 树插件配置与应用小结2.png" alt="" /></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>setting </strong><strong>举例：</strong> 设置选择框为 radio</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var setting = {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; check: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enable: true,</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; chkStyle: "radio"</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">......</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.view.selectedMulti</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">设置是否允许同时选中多个节点。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值: true</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数值：true / false 分别表示 支持 / 不支持 同时选中多个节点</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">1、设置为 true时，按下 Ctrl 或 Cmd 键可以选中多个节点</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">2、设置为 true / false 都不影响按下 Ctrl 或 Cmd 键可以让已选中的节点取消选中状态（ 取消选中状态可以参考 setting.view.autoCancelSelected ）</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">setting 举例： 禁止多点同时选中的功能</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var setting = {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; view: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; selectedMulti: false</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">......</span></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.data.simpleData.enable</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">确定 zTree 初始化时的节点数据、异步加载时的节点数据、或 addNodes 方法中输入的 newNodes 数据是否采用简单数据模式 (Array)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">不需要用户再把数据库中取出的 List 强行转换为复杂的 JSON 嵌套格式</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值：false</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数：true / false 分别表示 使用 / 不使用 简单数据模式</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">如果设置为 true，请务必设置 setting.data.simpleData 内的其他参数: idKey / pIdKey / rootPId，并且让数据满足父子关系。</span></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.data.simpleData.idKey</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">节点数据中保存唯一标识的属性名称。[setting.data.simpleData.enable = true 时生效]</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值："id"</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.data.simpleData.pIdKey</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">节点数据中保存其父节点唯一标识的属性名称。[setting.data.simpleData.enable = true 时生效]</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值："pId"</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">rootPId</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">用于修正根节点父节点数据，即 pIdKey 指定的属性值。[setting.data.simpleData.enable = true 时生效]</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值：null</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">setting 举例： 使用简单 Array 格式的数据</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var setting = {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; data: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; simpleData: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enable: true,</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; idKey: "id",</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pIdKey: "pId",</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rootPId: 0</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var treeNodes = [</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; {"id":1, "pId":0, "name":"test1"},</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; {"id":11, "pId":1, "name":"test11"},</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; {"id":12, "pId":1, "name":"test12"},</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; {"id":111, "pId":11, "name":"test111"}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">];</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">......</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.edit.enable</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">设置 zTree 是否处于编辑状态</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">请在初始化之前设置，初始化后需要改变编辑状态请使用 zTreeObj.setEditable() 方法</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值: false</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明：true / false 分别表示 可以 / 不可以 编辑</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">编辑状态规则说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">1、点击节点时，不会打开 node.url 指定的 URL。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">2、全面支持 编辑 与 异步加载 状态共存。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">3、可以对节点进行拖拽，且支持多棵树之间进行拖拽。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">4、支持拖拽时 复制/移动 节点。（参考: setting.edit.drag.isCopy / setting.edit.drag.isMove）</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">5、可以通过编辑按钮修改 name 属性。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">6、可以通过删除按钮删除节点。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">请注意大小写，不要改变</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">setting 举例：设置 zTree 进入编辑状态</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var setting = {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; edit: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enable: true</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">......</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.callback.beforeRemove</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">用于捕获节点被删除之前的事件回调函数，并且根据返回值确定是否允许删除操作</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值：null</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeIdString&nbsp; 对应 zTree 的 treeId，便于用户操控</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeNodeJSON&nbsp; 将要删除的节点 JSON 数据对象</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">返回值 &nbsp;true / false</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">如果返回 false，zTree 将不删除节点，也无法触发 onRemove 事件回调函数</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">setting &amp;&amp; function举例： 禁止全部删除操作</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">function zTreeBeforeRemove(treeId, treeNode) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; return false;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var setting = {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; edit: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enable: true</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; callback: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beforeRemove: zTreeBeforeRemove</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">......</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.callback.beforeEditName</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">用于捕获节点编辑按钮的 click 事件，并且根据返回值确定是否允许进入名称编辑状态</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">此事件回调函数最主要是用于捕获编辑按钮的点击事件，然后触发自定义的编辑界面操作。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值：null</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeIdString&nbsp; 对应 zTree 的 treeId，便于用户操控</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeNodeJSON&nbsp; 将要进入编辑名称状态的节点 JSON 数据对象</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">返回值 true / false</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">如果返回 false，节点将无法进入 zTree 默认的编辑名称状态</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">setting &amp; function 举例: 禁止修改父节点的名称</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">function zTreeBeforeEditName(treeId, treeNode) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; return !treeNode.isParent;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var setting = {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; edit: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enable: true</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; callback: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beforeEditName: zTreeBeforeEditName</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">......</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">setting.callback.beforeDrag</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">用于捕获节点被拖拽之前的事件回调函数，并且根据返回值确定是否允许开启拖拽操作</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">默认值：null</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeIdString&nbsp;&nbsp; 被拖拽的节点 treeNodes 所在 zTree 的 treeId，便于用户操控</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeNodesArray(JSON)&nbsp;&nbsp; 要被拖拽的节点 JSON 数据集合</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">v3.x 允许多个同级节点同时被拖拽，因此将此参数修改为 Array(JSON)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">如果拖拽时多个被选择的节点不是同级关系，则只能拖拽鼠标当前所在位置的节点</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">返回值 true / false</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">如果返回 false，zTree 将终止拖拽，也无法触发 onDrag / beforeDrop / onDrop 事件回调函数</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">setting &amp; function 举例： 禁止全部拖拽操作</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">function zTreeBeforeDrag(treeId, treeNodes) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; return false;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var setting = {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; edit: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enable: true</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; callback: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beforeDrag: zTreeBeforeDrag</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">......</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">$.fn.zTree.init</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">zTree 初始化方法，创建 zTree 必须使用此方法</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">1、页面需要进行 W3C 申明，例如：&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"&nbsp;&nbsp;&nbsp; "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">2、需要首先加载 jquery-1.4.2.js 或其他更高版本的 jQuery 。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">3、需要加载 jquery-ztree.core-3.0.js，如果需要用到 编辑功能 或 checkbox / radio 还需要分别加载 jquery-ztree.exedit-3.0.js 和 jquery-ztree.excheck-3.0.js 。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">4、需要加载 zTreeStyle.css 以及 zTreeStyle 目录下的 img 文件。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">5、如果需要使用自定义图标请参考相应的Demo。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">6、请注意设置 zTree 的容器样式 class="ztree"，其中 "ztree" 这个 className，可以根据需要随意修改，别忘了修改 css 中对应名字就是了，对于容器如果需要增加其他特殊样式，可根据自己的需要进行修改。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">objjQuery Object&nbsp; 用于展现 zTree 的 DOM 容器</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">zSettingJSON&nbsp; zTree 的配置数据，具体请参考 &ldquo;setting 配置详解&rdquo;中的各个属性详细说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">zNodesArray(JSON) / JSON&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; zTree 的节点数据，具体请参考 &ldquo;treeNode 节点数据详解&rdquo;中的各个属性详细说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">1、v3.x 支持单独添加一个节点，即如果只新增一个节点，不用必须包在数组中</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">2、如果需要异步加载根节点，可以设置为 null 或 [ ]</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">3、使用简单数据模式，请参考 setting.data.simpleData 内的属性说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">返回值JSON</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">zTree 对象，提供操作 zTree 的各种方法，对于通过 js 操作 zTree 来说必须通过此对象</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">如果不需要自行设定全局变量保存，可以利用 $.fn.zTree.getZTreeObj 方法随时获取</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">setting &amp; function 举例: &nbsp;简单创建 zTree 演示</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;!DOCTYPE html&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;HTML&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&lt;HEAD&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp; &lt;TITLE&gt; ZTREE DEMO &lt;/TITLE&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp; &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8"&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp; &lt;link rel="stylesheet" href="zTreeStyle/zTreeStyle.css" type="text/css"&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp; &lt;script type="text/javascript" src="jquery-1.4.2.js"&gt;&lt;/script&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp; &lt;script type="text/javascript" src="jquery.ztree.core.js"&gt;&lt;/script&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;!--</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp; &lt;script type="text/javascript" src="jquery.ztree.excheck.js"&gt;&lt;/script&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp; &lt;script type="text/javascript" src="jquery.ztree.exedit.js"&gt;&lt;/script&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">--&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp; &lt;SCRIPT type="text/javascript" &gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; var zTreeObj,</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; setting = {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; view: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; selectedMulti: false</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; zTreeNodes = [</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {"name":"网站导航", open:true, children: [</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { "name":"google", "url":"http://g.cn", "target":"_blank"},</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { "name":"baidu", "url":"http://baidu.com", "target":"_blank"},</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { "name":"sina", "url":"http://www.sina.com.cn", "target":"_blank"}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ]</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; ];</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; $(document).ready(function(){</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; zTreeObj = $.fn.zTree.init($("#tree"), setting, zTreeNodes);</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; });</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp; &lt;/SCRIPT&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&lt;/HEAD&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;BODY&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;ul id="tree" class="ztree" style="width:230px; overflow:auto;"&gt;&lt;/ul&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&lt;/BODY&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&lt;/HTML&gt;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">$.fn.zTree.getZTreeObj</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">zTree v3.x 专门提供的根据 treeId 获取 zTree 对象的方法。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">必须在初始化 zTree 以后才可以使用此方法。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">有了这个方法，用户不再需要自己设定全局变量来保存 zTree 初始化后得到的对象了，而且在所有回调函数中全都会返回 treeId 属性，用户可以随时使用此方法获取需要进行操作的 zTree 对象</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeIdString&nbsp; zTree 的 DOM 容器的 id</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">返回值JSON</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">zTree 对象，提供操作 zTree 的各种方法，对于通过 js 操作 zTree 来说必须通过此对象</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">function 举例: &nbsp;获取 id 为 tree 的 zTree 对象</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var treeObj = $.fn.zTree.getZTreeObj("tree");</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">zTreeObj.checkAllNodes</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">勾选 或 取消勾选 全部节点。[setting.check.enable = true 且 setting.check.chkStyle = "checkbox" 时有效]</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">此方法不会触发 beforeCheck / onCheck 事件回调函数。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">checked&nbsp; &nbsp;true 表示勾选全部节点； false 表示全部节点取消勾选</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>不会影响</strong><strong> treeNode.nocheck = true </strong><strong>的节点。</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>不会影响未加载的节点。</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">无返回值</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>function </strong><strong>举例</strong>： 勾选全部节点</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var treeObj = $.fn.zTree.getZTreeObj("tree");</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeObj.checkAllNodes(true);</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">zTreeObj.checkNode</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">勾选 或 取消勾选 单个节点。[setting.check.enable = true 时有效]</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">v3.x 中 checkNode() 方法可以触发 beforeCheck / onCheck 事件回调函数。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">treeNode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 需要勾选 或 取消勾选 的JSON节点数据</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">请务必保证此节点数据对象 是 zTree 内部的数据对象</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">checked&nbsp; true 表示勾选节点； false 表示节点取消勾选。省略此参数，则根据对此节点的勾选状态进行 toggle 切换</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>不影响</strong><strong> treeNode.nocheck = true </strong><strong>的节点。</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>&nbsp;</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">checkTypeFlag&nbsp; 为true 表示按照 setting.check.chkboxType 属性进行父子节点的勾选联动操作，为false 表示只修改此节点勾选状态，无任何勾选联动操作（个人理解，选中父节点，自动选中其下所有子节点，类似这种联动）；为 false 且 treeNode.checked = checked 时，不会触发回调函数，直接返回</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>不影响父子节点中</strong><strong> treeNode.nocheck = true </strong><strong>的节点。</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">callbackFlag&nbsp; 为 true 表示执行此方法时触发 beforeCheck &amp; onCheck 事件回调函数；为 false 表示执行此方法时不触发事件回调函数，省略此参数，等同于 false</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">目前无任何返回值</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>function </strong><strong>举例</strong>： 勾选当前选中的节点</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var treeObj = $.fn.zTree.getZTreeObj("tree");</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var nodes = treeObj.getSelectedNodes();</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">for (var i=0, l=nodes.length; i &lt; l; i++) {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; treeObj.checkNode(nodes[i], true, true);</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">zTreeObj.getChangeCheckedNodes</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">获取输入框勾选状态被改变的节点集合（与原始数据 checkedOld 对比）。[setting.check.enable = true 时有效]</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">返回值 Array(JSON)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">返回全部勾选状态被改变的节点集合 Array</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">如果需要获取每次操作后全部被改变勾选状态的节点数据，请在每次勾选操作后，遍历所有被改变勾选状态的节点数据，让其 checkedOld = checked 就可以了。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>function </strong><strong>举例</strong>： 获取当前勾选状态被改变的节点集合</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var treeObj = $.fn.zTree.getZTreeObj("tree");</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var nodes = treeObj.getChangeCheckedNodes();</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">zTreeObj.getNodes</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">获取 zTree 的全部节点数据</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">返回值 Array(JSON) 全部节点数据</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>1</strong><strong>、</strong><strong>Array </strong><strong>仅仅是根节点的集合</strong>，</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">（默认情况子节点都处于 children 属性下）；</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">2、如需遍历全部节点需要利用递归，或利用 transformToArray 方法 将数据变成简单的 Array 集合</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">3、对于异步加载模式下，尚未加载的子节点是无法通过此方法获取的。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>function </strong><strong>举例：</strong> 获取全部节点数据</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var treeObj = $.fn.zTree.getZTreeObj("tree");</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var nodes = treeObj.getNodes();</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h3><span style="font-family: 'courier new', courier; font-size: 14px;">zTreeObj.getCheckedNodes</span></h3>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">获取输入框被勾选 或 未勾选的节点集合。[setting.check.enable = true 时有效]</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">参数说明</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">checked&nbsp;&nbsp;&nbsp; true 表示获取 被勾选 的节点集合，false 表示获取 未勾选 的节点集合。省略此参数，等同于 true。</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">返回值 Array(JSON)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">返回全部符合要求的节点集合 Array</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>function </strong><strong>举例：</strong> 获取当前被勾选的节点集合</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var treeObj = $.fn.zTree.getZTreeObj("tree");</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">var nodes = treeObj.getCheckedNodes(true);</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">注意：</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>1</strong><strong>、对于</strong><strong> treeNode.nocheck = true </strong><strong>的节点不进行获取。</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>2</strong><strong>、默认情况下，按类似以下配置和初始化方式，调用该</strong><strong>API</strong><strong>，获取不到数据，因为全部节点都是没选中的，解决方案如下：</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>1</strong><strong>）先通过</strong><strong>ztreeObject.checkAllNodes(false) </strong><strong>取消所有节点的选中状态（因为一开始全部节点都是没选中的，所以调用该</strong><strong>API</strong><strong>后，所有节点都是改变过状态的）</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>2</strong><strong>）然后通过</strong><strong>ztreeObject.getChangeCheckedNodes()&nbsp; </strong><strong>获取所有改变过状态的节点（所有节点）</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>3</strong><strong>）判断对象关联的节点</strong><strong>id</strong><strong>是否在全部节点</strong><strong>id</strong><strong>范围内，在则通过</strong><strong>ztreeObj.checkNode(treeNode,&nbsp; true, false)</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>&nbsp;</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>/**</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;* ztree </em><em>设置</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;*</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;*/</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong><em>setting </em></strong>= {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; <strong>view</strong>: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>selectedMulti</strong>: <strong>false</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>&nbsp;&nbsp;&nbsp; </strong>},</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; <strong>check</strong>: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>enable</strong>: <strong>true</strong>, <em>// </em><em>表示</em><em>显示复选框或单选框</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><strong>chkStyle</strong>:<strong>'checkbox' </strong><em>// zTreeObj.checkAllNodes</em><em>方法依赖的配置</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>},</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; <strong>data</strong>: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>simpleData</strong>: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>enable</strong>: <strong>true</strong>, <em>// true</em><em>表示</em><em>使用简单数据模式</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><strong>idKey</strong>: <strong>"id"</strong>,&nbsp;&nbsp; <em>// </em><em>节点数据中保存唯一标识的属性名称</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><strong>pIdKey</strong>: <strong>"pId"</strong>, <em>// </em><em>节点数据中保存其父节点唯一标识的属性名称</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><strong>rootPId</strong>: 0&nbsp;&nbsp;&nbsp;&nbsp; <em>// </em><em>用于修正根节点父节点数据，即</em><em> pIdKey </em><em>指定的属性值</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; },</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; <strong>edit</strong>: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>enable</strong>: <strong>false </strong><em>// </em><em>禁止编辑</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>},</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; <strong>callback</strong>: {</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; beforeDrag:<strong>function</strong>(){ <strong>return false</strong>; } <em>// </em><em>禁止拖拽</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">};</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>// </em><em>获取资源树节点</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>getResourcesTreeNodes</em>().then(<strong>function</strong>(result) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; <strong>if </strong>(result.success == <strong>'true'</strong>) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>$</strong>.fn.<strong>zTree</strong>.init(<strong>$</strong>(<strong>'#' </strong>+ <strong><em>resouceZtreeID</em></strong>), <strong>setting</strong>,&nbsp; result.data);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>// </em><em>获取已经关联资源</em><em>ID</em><em>并勾选已关联资源节点</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><strong>$</strong>.ajax({</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>type</strong>: <strong>"get"</strong>,</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>url</strong>: <strong><em>queryResourceIDsForRoleURL</em></strong>,</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>async</strong>: <strong>true</strong>,</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>data</strong>:{<strong>'roleID'</strong>:<strong><em>currentRole</em></strong>.<strong>id</strong>},</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; success: <strong>function </strong>(result) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>if </strong>(result.success == <strong>'true'</strong>) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </strong><strong>var </strong><strong>treeObj </strong><strong>= </strong><strong>$</strong><strong>.fn.</strong><strong>zTree</strong><strong>.</strong><strong>getZTreeObj</strong><strong>(</strong><strong><em>resouceZtreeID</em></strong><strong>);</strong></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </strong><strong>treeObj</strong><strong>.</strong><strong>checkAllNodes</strong><strong>(</strong><strong>false</strong><strong>); </strong><strong><em>//&nbsp; </em></strong><strong><em>表示全部节点取消勾选</em></strong></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><strong><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</em></strong><strong>var </strong><strong>nodes </strong><strong>= </strong><strong>treeObj</strong><strong>.</strong><strong>getChangeCheckedNodes</strong><strong>() </strong><strong><em>// </em></strong><strong><em>获取改变过状态的节点</em></strong></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><strong>var </strong>nodeIDs = {};</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>$</strong>.each(nodes, <strong>function</strong>() {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodeIDs[<strong>this</strong>.<strong>id</strong>] = <strong>this</strong>;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>//var keyAarray = Object.keys(nodeIDs);</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><strong>$</strong>.each(result.data, <strong>function</strong>() {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>var </strong>id = <strong>this</strong>.toString();</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>try </strong>{</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; treeObj.checkNode(nodeIDs[id], <strong>true</strong>, <strong>false</strong>); <em>// </em><em>因为</em><em>nodeIDs[id]</em><em>可能不存在</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>} <strong>catch </strong>(e) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>// </em><em>啥也不做</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>}</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>});</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <strong>else </strong>{</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert(result.<strong>msg </strong>+ <strong>"</strong><strong>，</strong><strong>" </strong>+ result.<strong>reason</strong>);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;error: <strong>function</strong>(XmlHttpRequest, textStatus, errorThrown) {</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert(<strong>'</strong><strong>获取树资源节点失败</strong><strong>' </strong>+ XmlHttpRequest.<strong>responseText</strong>);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>}</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; });</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; } <strong>else </strong>{</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert(result.<strong>msg </strong>+ <strong>"</strong><strong>，</strong><strong>" </strong>+ result.<strong>reason</strong>);</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; }</span></pre>
<pre><code><span style="font-family: 'courier new', courier; font-size: 14px;">});</span></pre>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<h2><span style="font-family: 'courier new', courier; font-size: 14px;">后台代码片段</span></h2>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>&nbsp;</strong></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">def resource_ztree_nodes(request):</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; <em>'''</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em><em>获取资源节点树</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>:param<em> request:</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; '''</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp; </em>if request.method == 'GET':</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ztree_nodes_list = []</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def get_sub_resource(resource, father_node):</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>'''</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em><em>获取子级资源</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;'''</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>nonlocal ztree_nodes_list</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; resource_id = resource['id']&nbsp;&nbsp; <em># </em><em>获取上级资源</em><em>id</em><em>点的</em><em>id</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # </em><em>仅查找状态为</em><em> 1 </em><em>即设置为显示</em><em>的资源</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>sub_sources = Resource.objects.filter(parent_id=resource_id).order_by('order').values()</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if sub_sources: <em>#</em><em>如果存在子级资源，遍历添加子级资源</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>father_node['isParent'] = 'true'</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for sub_source in sub_sources:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub_node = {} <em># </em><em>重置变量为字典，用于存储下一个节点</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>sub_node['id'] = sub_source['id']</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub_node['name'] = sub_source['name'] + ' [id:%s 排序:%s]' % (str(sub_source['id']), str(sub_source['order']))</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parent_id = sub_source['parent_id']</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if not parent_id:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent_id = 0</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub_node['pId'] = parent_id</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub_node['open'] = 'true'</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ztree_nodes_list.append(sub_node)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get_sub_resource(sub_source, sub_node)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em># </em><em>获取所有一级资源</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </em>father_resources = Resource.objects.filter(parent_id__isnull=True).order_by('order').values()</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for father_resource in father_resources:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; father_node = {}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; father_node['id'] = father_resource['id']</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; father_node['name'] = father_resource['name'] + ' [id:%s 排序:%s]' % (str(father_resource['id']), str(father_resource['order']))</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parent_id = father_resource['parent_id']</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if not parent_id:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parent_id = 0</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; father_node['pId'] = parent_id</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; father_node['open'] = 'true'</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ztree_nodes_list.append(father_node)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; get_sub_resource(father_resource, father_node) <em># </em><em>获取子级资源</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;</em></span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><em>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</em>content = {'data': ztree_nodes_list, 'msg':'获取资源节点树成功', 'success':'true', 'reason':''}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; except Exception as e:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error('getting resource failed: %s' % e)</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {'data':[], 'msg':'获取资源节点树失败', 'success':'false', 'reason': '%s' % e}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; else:</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logger.error('only get method allowed for getting resource ztree nodes')</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; content = {'data':[], 'msg':'获取资源节点树失败', 'success':'false', 'reason': 'only get method allowed for getting resource ztree nodes'}</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;&nbsp;&nbsp; return JsonResponse(content)</span></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>&nbsp;</strong></span></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;">&nbsp;</span></p>
<p align="left"><span style="font-family: 'courier new', courier; font-size: 14px;"><strong>参考链接：</strong></span></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;"><a href="http://www.treejs.cn/v3/demo.php%23_101">http://www.treejs.cn/v3/demo.php#_101</a></span></p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;"><a href="http://www.treejs.cn/v3/api.php">http://www.treejs.cn/v3/api.php</a></span></p>
<p>&nbsp;</p>
<p><span style="font-family: 'courier new', courier; font-size: 14px;">我的博客即将同步至腾讯云+社区，邀请大家一同入驻：https://cloud.tencent.com/developer/support-plan?invite_code=2w2jljy48u0w0</span></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>