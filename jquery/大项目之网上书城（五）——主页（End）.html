<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修大项目之网上书城（五）——主页（End）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>大项目之网上书城（五）——主页（End）</center></div><div class='banquan'>原文出处:本文由博客园博主return_false提供。<br/>
原文连接:https://www.cnblogs.com/zhangA/p/11048470.html</div><br>
    <div class="toc">
    <p class="toc-title">目录</p>
    <div class="toc-list">
        <ul>
        <li><a href="#大项目之网上书城五主页end">大项目之网上书城（五）——主页（End）</a><ul>
        <li><a href="#主要改动">主要改动</a></li>
        <li><a href="#主页终于完成啦">1.主页（终于完成啦）</a><ul>
        <li><a href="#完整代码">完整代码</a></li>
        <li><a href="#效果图">效果图</a></li>
        </ul></li>
        <li><a href="#head.jsp的小改动">2.head.jsp的小改动</a><ul>
        <li><a href="#代码">代码</a></li>
        </ul></li>
        <li><a href="#login.jsp">3.login.jsp</a><ul>
        <li><a href="#代码-1">###代码</a></li>
        <li><a href="#效果图-1">效果图</a></li>
        </ul></li>
        <li><a href="#login.js">4.login.js</a><ul>
        <li><a href="#代码-2">代码</a></li>
        </ul></li>
        <li><a href="#userserviceimpl的login方法">5.userServiceImpl的login方法</a><ul>
        <li><a href="#代码-3">代码</a></li>
        </ul></li>
        <li><a href="#loginservlet">6.LoginServlet</a><ul>
        <li><a href="#代码-4">代码</a></li>
        </ul></li>
        <li><a href="#user.jsp">7.user.jsp</a><ul>
        <li><a href="#代码-5">代码</a></li>
        <li><a href="#效果图-2">效果图</a></li>
        </ul></li>
        <li><a href="#logoutservlet">8.LogoutServlet</a></li>
        <li><a href="#bookservice的改动添加图片">9.BookService的改动——添加图片</a><ul>
        <li><a href="#代码-6">代码</a></li>
        </ul></li>
        <li><a href="#总结">总结</a></li>
        </ul></li>
        </ul>
    </div>
</div>
<h1 id="大项目之网上书城五主页end">大项目之网上书城（五）——主页（End）</h1>
<blockquote>
<p>不说了！日更啊！</p>
</blockquote>
<h2 id="主要改动">主要改动</h2>
<blockquote>
<p>今天终于把主页完成啦！给书加了图片，虽然图片严重不符，不够这都是小问题，现在还是测试阶段，到时候整理下数据库就行了。</p>
<p>同时终于加了登录页面，并把验证码移到了登录界面，注册页面就不需要了。</p>
<p>最后，加了个用户页面，不过目前只有退出账号功能233333</p>
</blockquote>
<h2 id="主页终于完成啦">1.主页（终于完成啦）</h2>
<h3 id="完整代码">完整代码</h3>
<pre><code><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=utf-8&quot;
    pageEncoding=&quot;utf-8&quot;%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;style&gt;
li{
    float:left;
    width:100%;
    height:10%;
    font-size:16px;
    color:#8deeee;
}
&lt;/style&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;${pageContext.request.contextPath}/jquery-3.3.1/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;${pageContext.request.contextPath}/bootstrap-3.3.7-dist/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;${pageContext.request.contextPath}/client/js/index.js&quot;&gt;&lt;/script&gt;
&lt;title&gt;主页&lt;/title&gt;
&lt;/head&gt;
&lt;body style=&quot;background-color:#bbb&quot;&gt;
&lt;!-- 调用头部页面 --&gt;
&lt;div style=&quot;width:100%;height:100px;float:left&quot;&gt;
&lt;jsp:include page=&quot;/client/head.jsp&quot;&gt;&lt;/jsp:include&gt;
&lt;/div&gt;
&lt;!-- 通用内容体大小 --&gt;
&lt;div style=&quot;width:70%;height:886px;float:left;margin-left:15%;&quot;&gt;
&lt;!-- 二级导航 --&gt;
&lt;jsp:include page=&quot;/client/head2.jsp&quot;&gt;&lt;/jsp:include&gt;    
&lt;!-- 图书分类and轮播图and文案and热门推荐and新书上架and新书榜 --&gt;
&lt;div style=&quot;width:100%;height:800px;float:left;margin-top:2%;background-color:#bbb;&quot;&gt;
&lt;!-- 图书分类 --&gt;
&lt;div style=&quot;width:23%;height:100%;float:left;background-color:#a8f;&quot;&gt;
    &lt;div style=&quot;width:100%;height:6%;text-align:center;line-height:45px;background-color:#556B2F&quot;&gt;
        &lt;font color=&quot;#ddd&quot; style=&quot;font-size:20px;&quot;&gt;图书分类&lt;/font&gt;
    &lt;/div&gt;
    &lt;div style=&quot;width:100%;height:94%;text-align:center;line-height:45px;background-color:#548B54&quot;&gt;
        &lt;ul style=&quot;width:100%;height:100%;text-align:left;&quot;&gt;
            &lt;li&gt;
                &lt;a href=&quot;${pageContext.request.contextPath }/client/pai/index.jsp&quot;&gt;好书拍卖&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;${pageContext.request.contextPath }/client/net_literature/index.jsp&quot;&gt;网络文学&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;${pageContext.request.contextPath }/client/clothing/index.jsp&quot;&gt;服装&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;${pageContext.request.contextPath }/client/sport/index.jsp&quot;&gt;运动户外&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;${pageContext.request.contextPath }/client/nursery/index.jsp&quot;&gt;孕婴童&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;${pageContext.request.contextPath }/client/nursery/index.jsp&quot;&gt;孕婴童&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;${pageContext.request.contextPath }/client/food/index.jsp&quot;&gt;食品&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#&quot;&gt;暂无分类&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#&quot;&gt;暂无分类&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#&quot;&gt;暂无分类&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;  
&lt;/div&gt;
&lt;!-- 轮播图 --&gt;
&lt;div style=&quot;width:50%;height:35%;float:left;margin-left:2%;background-size:100% 100%;&quot;id=&quot;lun&quot;&gt;
    &lt;!-- table按钮沉底大法！ --&gt;
    &lt;table style=&quot;width:100%;height:100%&quot;&gt;
        &lt;tr&gt;
            &lt;td style=&quot;vertical-align:bottom;&quot;&gt;
                &lt;button class=&quot;btn btn-warning&quot; style=&quot;width:30px;height:30px;float:left;margin-left:60%;&quot; id=&quot;l1&quot;&gt;1&lt;/button&gt;
                &lt;button class=&quot;btn btn-warning&quot; style=&quot;width:30px;height:30px;float:left;margin-left:2%;&quot; id=&quot;l2&quot;&gt;2&lt;/button&gt;
                &lt;button class=&quot;btn btn-warning&quot; style=&quot;width:30px;height:30px;float:left;margin-left:2%;&quot; id=&quot;l3&quot;&gt;3&lt;/button&gt;
                &lt;button class=&quot;btn btn-warning&quot; style=&quot;width:30px;height:30px;float:left;margin-left:2%;&quot; id=&quot;l4&quot;&gt;4&lt;/button&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/div&gt;
&lt;!-- 文案and热门推荐 --&gt;
&lt;div style=&quot;width:23%;height:35%;float:left;background-color:#bbb;margin-left:2%&quot;&gt;
&lt;!-- 文案 --&gt;
&lt;div style=&quot;width:100%;height:30%;float:left;background-color:#548B54;&quot;&gt;
    &lt;font style=&quot;font-size:20px;text-align:center;display:block;width:100%;color:#ee4000&quot;&gt;618年中狂欢&lt;/font&gt;
    &lt;font style=&quot;display:block;color:#eead0e&quot;&gt;十万童书，每满100减50&lt;/font&gt;
    &lt;font style=&quot;display:block;color:#eead0e&quot;&gt;艺术绘画，每满100减50&lt;/font&gt;
&lt;/div&gt;
&lt;!-- 热门推荐 --&gt;
&lt;div style=&quot;width:100%;height:64%;float:left;background-color:#a8f;margin-top:8%&quot;&gt;
    &lt;div style=&quot;width:100%;height:25%;text-align:center;line-height:45px;background-color:#556B2F&quot;&gt;
        &lt;font color=&quot;#ddd&quot; style=&quot;font-size:20px;&quot;&gt;热门推荐&lt;/font&gt;
    &lt;/div&gt;
    &lt;div style=&quot;width:100%;height:75%;text-align:center;line-height:45px;background-color:#548B54;margin-top:-5%;&quot;&gt;
        &lt;ul&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;a1&quot;&gt;&lt;/font&gt;&lt;font id=&quot;remen1&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;a2&quot;&gt;&lt;/font&gt;&lt;font id=&quot;remen2&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
        &lt;/ul&gt;
        &lt;div style=&quot;width:100%;height:20%;float:left;margin-top:5%&quot;&gt;
            &lt;button class=&quot;btn btn-info&quot; style=&quot;float:left;margin-left:20%;font-size:8px;&quot;id=&quot;b1&quot;&gt;1&lt;/button&gt;
            &lt;button class=&quot;btn btn-info&quot; style=&quot;float:left;margin-left:4%;font-size:8px;&quot;id=&quot;b2&quot;&gt;2&lt;/button&gt;
            &lt;button class=&quot;btn btn-info&quot; style=&quot;float:left;margin-left:4%;font-size:8px;&quot;id=&quot;b3&quot;&gt;3&lt;/button&gt;
            &lt;button class=&quot;btn btn-info&quot; style=&quot;float:left;margin-left:4%;font-size:8px;&quot;id=&quot;b4&quot;&gt;4&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;!-- 新书上架 --&gt;
&lt;div style=&quot;width:50%;height:63%;float:left;background-color:#a8f;margin-left:2%;margin-top:2%;&quot;id=&quot;xinShu&quot;&gt;
&lt;table border=&quot;1&quot;style=&quot;width:100%;height:100%&quot;&gt;
    &lt;tr&gt;
        &lt;td style=&quot;width:33%&quot;&gt;
            &lt;div style=&quot;width:94%;height:80%;background-color:white;margin-left:3%;float:left&quot;&gt;
                &lt;img alt=&quot;图书&quot; src=&quot;${pageContext.request.contextPath}/XinShuImg?shu=1&quot; style=&quot;width:100%;&quot;/&gt;
            &lt;/div&gt;
            &lt;div style=&quot;width:94%;float:left;margin-left:3%;height:15%;&quot;&gt;
                &lt;font style=&quot;font-size:16px;margin-left:3%;&quot;id=&quot;shu1&quot;&gt;图书&lt;/font&gt;
                &lt;font style=&quot;font-size:8px&quot;id=&quot;re1&quot;&gt;&lt;/font&gt;
            &lt;/div&gt;
        &lt;/td&gt;
        &lt;td style=&quot;width:33%&quot;&gt;
            &lt;div style=&quot;width:94%;height:80%;background-color:white;margin-left:3%;float:left&quot;&gt;
                &lt;img alt=&quot;图书&quot; src=&quot;${pageContext.request.contextPath}/XinShuImg?shu=2&quot; style=&quot;width:100%;&quot;/&gt;
            &lt;/div&gt;
            &lt;div style=&quot;width:94%;float:left;margin-left:3%;height:15%;&quot;&gt;
                &lt;font style=&quot;font-size:16px;margin-left:3%;&quot;id=&quot;shu2&quot;&gt;图书&lt;/font&gt;
                &lt;font style=&quot;font-size:8px&quot;id=&quot;re2&quot;&gt;&lt;/font&gt;
            &lt;/div&gt;
        &lt;/td&gt;
        &lt;td style=&quot;width:33%&quot;&gt;
            &lt;div style=&quot;width:94%;height:80%;background-color:white;margin-left:3%;float:left&quot;&gt;
                &lt;img alt=&quot;图书&quot; src=&quot;${pageContext.request.contextPath}/XinShuImg?shu=3&quot; style=&quot;width:100%;&quot;/&gt;
            &lt;/div&gt;
            &lt;div style=&quot;width:94%;float:left;margin-left:3%;height:15%;&quot;&gt;
                &lt;font style=&quot;font-size:16px;margin-left:3%;&quot;id=&quot;shu3&quot;&gt;图书&lt;/font&gt;
                &lt;font style=&quot;font-size:8px&quot;id=&quot;re3&quot;&gt;&lt;/font&gt;
            &lt;/div&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td style=&quot;width:33%&quot;&gt;
            &lt;div style=&quot;width:94%;height:80%;background-color:white;float:left;margin-left:3%&quot;&gt;
                &lt;img alt=&quot;图书&quot; src=&quot;${pageContext.request.contextPath}/XinShuImg?shu=4&quot; style=&quot;width:100%;&quot;/&gt;
            &lt;/div&gt;
            &lt;div style=&quot;width:94%;float:left;margin-left:3%;height:15%;&quot;&gt;
                &lt;font style=&quot;font-size:16px;margin-left:3%;&quot;id=&quot;shu4&quot;&gt;图书&lt;/font&gt;
                &lt;font style=&quot;font-size:8px&quot;id=&quot;re4&quot;&gt;&lt;/font&gt;
            &lt;/div&gt;
        &lt;/td&gt;
        &lt;td style=&quot;width:33%&quot;&gt;
            &lt;div style=&quot;width:94%;height:80%;background-color:white;margin-left:3%;float:left&quot;&gt;
                &lt;img alt=&quot;图书&quot; src=&quot;${pageContext.request.contextPath}/XinShuImg?shu=5&quot; style=&quot;width:100%;&quot;/&gt;
            &lt;/div&gt;
            &lt;div style=&quot;width:94%;float:left;margin-left:3%;height:15%;&quot;&gt;
                &lt;font style=&quot;font-size:16px;margin-left:3%;&quot;id=&quot;shu5&quot;&gt;图书&lt;/font&gt;
                &lt;font style=&quot;font-size:8px&quot;id=&quot;re5&quot;&gt;&lt;/font&gt;
            &lt;/div&gt;
        &lt;/td&gt;
        &lt;td style=&quot;width:33%&quot;&gt;
            &lt;div style=&quot;width:94%;height:80%;background-color:white;margin-left:3%;float:left&quot;&gt;
                &lt;img alt=&quot;图书&quot; src=&quot;${pageContext.request.contextPath}/XinShuImg?shu=6&quot; style=&quot;width:100%;&quot;/&gt;
            &lt;/div&gt;
            &lt;div style=&quot;width:94%;float:left;margin-left:3%;height:15%;&quot;&gt;
                &lt;font style=&quot;font-size:16px;margin-left:3%;&quot;id=&quot;shu6&quot;&gt;图书&lt;/font&gt;
                &lt;font style=&quot;font-size:8px&quot;id=&quot;re6&quot;&gt;&lt;/font&gt;
            &lt;/div&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td style=&quot;width:33%&quot;&gt;
            &lt;div style=&quot;width:94%;height:80%;background-color:white;margin-left:3%;float:left&quot;&gt;
                &lt;img alt=&quot;图书&quot; src=&quot;${pageContext.request.contextPath}/XinShuImg?shu=7&quot; style=&quot;width:100%;&quot;/&gt;
            &lt;/div&gt;
            &lt;div style=&quot;width:94%;float:left;margin-left:3%;height:15%;&quot;&gt;
                &lt;font style=&quot;font-size:16px;margin-left:3%;&quot;id=&quot;shu7&quot;&gt;图书&lt;/font&gt;
                &lt;font style=&quot;font-size:8px&quot;id=&quot;re7&quot;&gt;&lt;/font&gt;
            &lt;/div&gt;
        &lt;/td&gt;
        &lt;td style=&quot;width:33%&quot;&gt;
            &lt;div style=&quot;width:94%;height:80%;background-color:white;margin-left:3%;float:left&quot;&gt;
                &lt;img alt=&quot;图书&quot; src=&quot;${pageContext.request.contextPath}/XinShuImg?shu=8&quot; style=&quot;width:100%;&quot;/&gt;
            &lt;/div&gt;
            &lt;div style=&quot;width:94%;float:left;margin-left:3%;height:15%;&quot;&gt;
                &lt;font style=&quot;font-size:16px;margin-left:3%;&quot;id=&quot;shu8&quot;&gt;图书&lt;/font&gt;
                &lt;font style=&quot;font-size:8px&quot;id=&quot;re8&quot;&gt;&lt;/font&gt;
            &lt;/div&gt;
            
        &lt;/td&gt;
        &lt;td style=&quot;width:33%&quot;&gt;
            &lt;div style=&quot;width:94%;height:80%;background-color:white;margin-left:3%;float:left&quot;&gt;
                &lt;img alt=&quot;图书&quot; src=&quot;${pageContext.request.contextPath}/XinShuImg?shu=9&quot; style=&quot;width:100%;&quot;/&gt;
            &lt;/div&gt;
            &lt;div style=&quot;width:94%;float:left;margin-left:3%;height:15%;&quot;&gt;
                &lt;font style=&quot;font-size:16px;margin-left:3%;&quot;id=&quot;shu9&quot;&gt;图书&lt;/font&gt;
                &lt;font style=&quot;font-size:8px&quot;id=&quot;re9&quot;&gt;&lt;/font&gt;
            &lt;/div&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;!-- 新书榜 --&gt;
&lt;div style=&quot;width:23%;height:63%;float:left;background-color:#a8f;margin-left:2%;margin-top:2%;&quot;&gt;
    &lt;div style=&quot;width:100%;height:10%;text-align:center;line-height:45px;background-color:#556B2F&quot;&gt;
        &lt;font color=&quot;#ddd&quot; style=&quot;font-size:20px;&quot;&gt;新书排行榜&lt;/font&gt;
    &lt;/div&gt;
    &lt;div style=&quot;width:100%;height:90%;text-align:center;line-height:45px;background-color:#548B54;&quot;&gt;
        &lt;ul style=&quot;width:100%;height:90%;float:left;&quot;&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;x1&quot;&gt;&lt;/font&gt;&lt;font id=&quot;r1&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;x2&quot;&gt;&lt;/font&gt;&lt;font id=&quot;r2&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;x3&quot;&gt;&lt;/font&gt;&lt;font id=&quot;r3&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;x4&quot;&gt;&lt;/font&gt;&lt;font id=&quot;r4&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;x5&quot;&gt;&lt;/font&gt;&lt;font id=&quot;r5&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;x6&quot;&gt;&lt;/font&gt;&lt;font id=&quot;r6&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;x7&quot;&gt;&lt;/font&gt;&lt;font id=&quot;r7&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;x8&quot;&gt;&lt;/font&gt;&lt;font id=&quot;r8&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
            &lt;li style=&quot;text-align:left;color:black&quot;&gt;&lt;font id=&quot;x9&quot;&gt;&lt;/font&gt;&lt;font id=&quot;r9&quot; style=&quot;font-size:8px&quot;&gt;&lt;/font&gt;&lt;/li&gt;
        &lt;/ul&gt;
            &lt;div style=&quot;width:100%;height:10%;float:left;&quot;&gt;
                &lt;button class=&quot;btn btn-info&quot; style=&quot;float:left;margin-left:20%;font-size:8px;&quot;id=&quot;b5&quot;&gt;1&lt;/button&gt;
                &lt;button class=&quot;btn btn-info&quot; style=&quot;float:left;margin-left:4%;font-size:8px;&quot;id=&quot;b6&quot;&gt;2&lt;/button&gt;
                &lt;button class=&quot;btn btn-info&quot; style=&quot;float:left;margin-left:4%;font-size:8px;&quot;id=&quot;b7&quot;&gt;3&lt;/button&gt;
                &lt;button class=&quot;btn btn-info&quot; style=&quot;float:left;margin-left:4%;font-size:8px;&quot;id=&quot;b8&quot;&gt;4&lt;/button&gt;
            &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;!-- 调用底部页面 --&gt;
&lt;div style=&quot;width:100%;height:60px;float:left&quot;&gt;
&lt;jsp:include page=&quot;/client/foot.jsp&quot;&gt;&lt;/jsp:include&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h3 id="效果图">效果图</h3>
<p><img src="./images/大项目之网上书城（五）——主页（End）0.png" /></p>
<h2 id="head.jsp的小改动">2.head.jsp的小改动</h2>
<blockquote>
<p>给我的账号加了个判断，如果已经登录了，就显示为你的用户名，可跳转到你的个人主页。否则显示“我的账号”，可跳转到登录界面。恩，悄悄给BookStore字样做了个到主页的跳转~</p>
</blockquote>
<h3 id="代码">代码</h3>
<pre><code><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=utf-8&quot;
    pageEncoding=&quot;utf-8&quot;%&gt;
&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Insert title here&lt;/title&gt;
&lt;!-- 这里的href请写自己的bootstrap的css的链接。如果没有下载，可以用这个 --&gt;
&lt;!-- https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;${pageContext.request.contextPath }/bootstrap-3.3.7-dist/css/bootstrap.min.css&quot;&gt;
&lt;style type=&quot;text/css&quot;&gt;
@font-face{
  font-family: myFont;
  src: url(&quot;${pageContext.request.contextPath }/bootstrap-3.3.7-dist/fonts/Adventure-Normal.ttf&quot;);
}
a:link {text-decoration:none;color: black} /* 未访问的链接 */
a:visited {text-decoration:none;color: black} /* 已访问的链接 */
a:hover {text-decoration:none;color: #068} /* 鼠标移动到链接上 */
a:active {text-decoration:none;color: #068} /* 选定的链接，即鼠标按下去的时候不松开显示的状态 */
a{
    font-size:18px;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div style=&quot;height:100px;width:100%;float:left&quot;&gt;
    &lt;!-- BookStore字样 --&gt;
    &lt;div style=&quot;line-height:120px;height:100px;width:45%;margin-left:15%;float:left&quot;&gt;
        &lt;a href=&quot;${pageContext.request.contextPath }/client/index.jsp&quot;&gt;&lt;font face=&quot;myFont&quot; color = &quot;black&quot; style=&quot;font-size:60px&quot;&gt;BookStore&lt;/font&gt;&lt;/a&gt;
    &lt;/div&gt;
    &lt;!-- 导航栏 --&gt;
    &lt;div style=&quot;height:100px;width:25%;float:left;margin-right:15%&quot;&gt;
        &lt;div style=&quot;height:100px;width:25%;float:left;padding-top:40px&quot;&gt;
            &lt;a href=&quot;#&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-shopping-cart&quot;&gt;&lt;/span&gt;购物车&lt;/a&gt;
        &lt;/div&gt;
        &lt;div style=&quot;height:100px;width:25%;float:left;padding-top:40px&quot;&gt;
        &lt;a href=&quot;#&quot;&gt;帮助中心&lt;/a&gt;
        &lt;/div&gt;
        &lt;div style=&quot;height:100px;width:25%;float:left;padding-top:40px&quot;&gt;
            &lt;c:if test=&quot;${sessionScope.user==null}&quot; var=&quot;f&quot;&gt;
                &lt;a href=&quot;${pageContext.request.contextPath }/client/login.jsp&quot;&gt;我的账户&lt;/a&gt;
            &lt;/c:if&gt;
            &lt;c:if test=&quot;${!f }&quot;&gt;
                &lt;a href=&quot;${pageContext.request.contextPath }/client/user.jsp&quot;&gt;${sessionScope.user.username }&lt;/a&gt;
            &lt;/c:if&gt;
        &lt;/div&gt;
        &lt;div style=&quot;height:100px;width:25%;float:left;padding-top:40px&quot;&gt;
            &lt;a href=&quot;${pageContext.request.contextPath }/client/register.jsp&quot;&gt;用户注册&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h2 id="login.jsp">3.login.jsp</h2>
<h3 id="代码-1">###代码</h3>
<pre><code><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=utf-8&quot;
    pageEncoding=&quot;utf-8&quot;%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;登录&lt;/title&gt;
&lt;!-- 这里的href请写自己的bootstrap的css的链接。如果没有下载，可以用这个 --&gt;
&lt;!-- https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;${pageContext.request.contextPath }/bootstrap-3.3.7-dist/css/bootstrap.min.css&quot;&gt;
&lt;!-- jquery和bootstrap的链接可以用下面的 --&gt;
&lt;!-- https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js --&gt;
&lt;!-- https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js --&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;${pageContext.request.contextPath}/jquery-3.3.1/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;${pageContext.request.contextPath}/bootstrap-3.3.7-dist/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
&lt;!-- login.js是我自己写的，里面放了判断输入是否合理，以及验证码的正确与否的。之后放上了。 --&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;${pageContext.request.contextPath}/client/js/login.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body style=&quot;background-color:#bbb&quot;&gt;
&lt;font size=&quot;7&quot; style=&quot;color:red;&quot;&gt;${errorMsg }&lt;/font&gt;
&lt;!-- 调用头部页面 --&gt;
&lt;div style=&quot;width:100%;height:100px;float:left&quot;&gt;
&lt;jsp:include page=&quot;head.jsp&quot;&gt;&lt;/jsp:include&gt;
&lt;/div&gt;
&lt;!-- 通用内容体大小 --&gt;
&lt;div style=&quot;width:70%;height:720px;float:left;margin-left:15%;&quot;&gt;
    &lt;!-- 好看的图 --&gt;
    &lt;div style=&quot;width:55%;height:100%;float:left;margin-top:10%;&quot;&gt;
        &lt;img alt=&quot;拿书男孩&quot; src=&quot;${pageContext.request.contextPath }/client/img/boy.jpg&quot; style=&quot;width:90%;&quot;&gt;
    &lt;/div&gt;
    &lt;!-- 登录界面 --&gt;
    &lt;div style=&quot;width:45%;height:80%;float:left;margin-top:7%&quot;&gt;
        &lt;h1 style=&quot;color:#8b6914;text-align:center&quot;&gt;用户登录&lt;/h1&gt;
        &lt;hr style=&quot;height:2px;border:none;border-top:5px ridge green;&quot; /&gt;
        &lt;form action=&quot;${pageContext.request.contextPath }/Login&quot; method=&quot;post&quot; class=&quot;form-horizontal&quot; role=&quot;form&quot;&gt;
            &lt;div class=&quot;form-group&quot;&gt;
                &lt;label for=&quot;lastname&quot; class=&quot;col-sm-3 control-label input-lg&quot;&gt;昵称&lt;/label&gt;
                &lt;div class=&quot;col-sm-9&quot;&gt;
                    &lt;input type=&quot;text&quot; name=&quot;username&quot; id=&quot;username&quot; class=&quot;form-control input-lg&quot;
                           placeholder=&quot;请输入昵称&quot; style=&quot;float:left&quot;/&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot;&gt;
                &lt;label for=&quot;firstname&quot; class=&quot;col-sm-3 control-label input-lg&quot;&gt;密码&lt;/label&gt;
                &lt;div class=&quot;col-sm-9&quot;&gt;
                    &lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot; 
                    class=&quot;form-control input-lg&quot; placeholder=&quot;请输入密码&quot; style=&quot;float:left&quot;/&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class=&quot;form-group&quot;&gt;
                &lt;label for=&quot;firstname&quot; class=&quot;col-sm-3 control-label input-lg&quot;&gt;验证码&lt;/label&gt;
                &lt;div class=&quot;col-sm-9&quot;&gt;
                    &lt;input type=&quot;text&quot; id=&quot;code&quot;
                    class=&quot;form-control input-lg&quot; placeholder=&quot;请输入验证码&quot; style=&quot;width:45%;float:left&quot;/&gt;
                    &lt;img src=&quot;${pageContext.request.contextPath}/imageCode&quot;
                    width=&quot;180&quot;height=&quot;30&quot;class=&quot;textinput&quot;
                    style=&quot;height:42px;width:55%;&quot;id=&quot;img&quot;/&gt;
                    &lt;a href=&quot;javascript:void(0);&quot;id=&quot;a1&quot; &gt;换一张&lt;/a&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-group&quot;&gt;
                &lt;label for=&quot;firstname&quot; class=&quot;col-sm-1 control-label input-lg&quot;&gt;&lt;/label&gt;
                &lt;div class=&quot;col-sm-5&quot;&gt;
                    &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;提交&quot;
                    class=&quot;form-control input-lg btn btn-primary&quot;style=&quot;width:100%;float:left&quot;/&gt;
                &lt;/div&gt;
                &lt;div class=&quot;col-sm-5&quot;&gt;
                    &lt;input type=&quot;reset&quot; name=&quot;reset&quot; value=&quot;重置&quot; id=&quot;re&quot;
                    class=&quot;form-control input-lg btn btn-warning&quot;style=&quot;width:100%;float:left&quot;/&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/form&gt;
        &lt;span style=&quot;margin-left:10%&quot;&gt;还没有帐号？请先&lt;a href=&quot;${pageContext.request.contextPath }/client/register.jsp&quot;&gt;注册&lt;/a&gt;！&lt;/span&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;!-- 调用底部页面 --&gt;
&lt;div style=&quot;width:100%;height:60px;float:left&quot;&gt;
&lt;jsp:include page=&quot;foot.jsp&quot;&gt;&lt;/jsp:include&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h3 id="效果图-1">效果图</h3>
<p><img src="./images/大项目之网上书城（五）——主页（End）1.png" /></p>
<h2 id="login.js">4.login.js</h2>
<h3 id="代码-2">代码</h3>
<blockquote>
<p>因为貌似jquery的post提交是在其他代码结束之后才运行的，于是我取巧把二维码的验证和表单提交分开写了，个人认为也算是个不错的思路吧~</p>
</blockquote>
<pre class="javascript"><code>$(function(){
    var code;
    $.post(&quot;../CheckCode&quot;,function(data){
        code=data;
    });
    $(&quot;#a1&quot;).click(function(){
        $(&quot;#img&quot;).attr(&quot;src&quot;,&quot;/bookstore/imageCode?time=&quot;+new Date().getTime());
    });
    var flag;
    $(&quot;#code&quot;).keyup(function(){
        $.post(&quot;/bookstore/CheckCode&quot;,function(data){
            code=data;
            if(code==$(&quot;#code&quot;).val()){
                flag=true;
            }
            else{
                flag=false;
            }
        });     
    });
    $(&quot;form&quot;).submit(function(){
        if(flag){
            return true;
        }else{
            alert(&quot;验证码错误&quot;);
            return false;
        }
    });
});</code></pre>
<h2 id="userserviceimpl的login方法">5.userServiceImpl的login方法</h2>
<h3 id="代码-3">代码</h3>
<blockquote>
<p>个人感觉设计的还是挺精妙的，可以用一个函数就检测用户名是否存在，密码是否正确，同时也能在正确的时候返回user对象。</p>
</blockquote>
<pre class="java"><code>@Override
    public Object login(String username, String password) throws SQLException {
        // TODO Auto-generated method stub
        User user = dao.findUserByName(username);
        if(user==null) {
            return &quot;user&quot;;
        }else {
            if(user.getPassword().equals(password)) {
                return user;
            }else {
                return &quot;pass&quot;;
            }
        }
    }
</code></pre>
<h2 id="loginservlet">6.LoginServlet</h2>
<h3 id="代码-4">代码</h3>
<blockquote>
<p>接收用户名密码，然后调用userService的login方法，并对返回值做出相应处理。</p>
</blockquote>
<pre class="java"><code>package cn.edu.bdu.mc.servlets;

import java.io.IOException;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import cn.edu.bdu.mc.beans.User;
import cn.edu.bdu.mc.services.UserService;
import cn.edu.bdu.mc.services.impls.UserServiceImpl;

/**
 * Servlet implementation class LoginServlet
 */
@WebServlet(&quot;/Login&quot;)
public class LoginServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public LoginServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        try {
            // TODO Auto-generated method stub
            String username = request.getParameter(&quot;username&quot;);
            String password = request.getParameter(&quot;password&quot;);
            UserService userService = new UserServiceImpl();
            Object login = userService.login(username, password);
            if(login.equals(&quot;user&quot;)) {
                request.setAttribute(&quot;errorMsg&quot;, &quot;用户名不存在&quot;);
                request.getRequestDispatcher(&quot;client/login.jsp&quot;).forward(request, response);
            }else if(login.equals(&quot;pass&quot;)) {
                request.setAttribute(&quot;errorMsg&quot;, &quot;密码错误&quot;);
                request.getRequestDispatcher(&quot;client/login.jsp&quot;).forward(request, response);
            }else {
                User user = (User) login;
                request.getSession().setAttribute(&quot;user&quot;, user);
                response.sendRedirect(&quot;client/index.jsp&quot;);
            }
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        doGet(request, response);
    }

}
</code></pre>
<h2 id="user.jsp">7.user.jsp</h2>
<h3 id="代码-5">代码</h3>
<pre><code><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=utf-8&quot;
    pageEncoding=&quot;utf-8&quot;%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;空白&lt;/title&gt;
&lt;/head&gt;
&lt;body style=&quot;background-color:#bbb&quot;&gt;
&lt;!-- 调用头部页面 --&gt;
&lt;div style=&quot;width:100%;height:100px;float:left&quot;&gt;
&lt;jsp:include page=&quot;/client/head.jsp&quot;&gt;&lt;/jsp:include&gt;
&lt;/div&gt;
&lt;!-- 通用内容体大小 --&gt;
&lt;div style=&quot;width:70%;height:720px;float:left;margin-left:15%;&quot;&gt;
&lt;a href=&quot;${pageContext.request.contextPath }/Logout&quot;&gt;退出登录&lt;/a&gt;
&lt;/div&gt;
&lt;!-- 调用底部页面 --&gt;
&lt;div style=&quot;width:100%;height:60px;float:left&quot;&gt;
&lt;jsp:include page=&quot;/client/foot.jsp&quot;&gt;&lt;/jsp:include&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="效果图-2">效果图</h3>
<p><img src="./images/大项目之网上书城（五）——主页（End）2.png" /></p>
<h2 id="logoutservlet">8.LogoutServlet</h2>
<blockquote>
<p>移除session域中的user属性，然后跳转回主页。</p>
</blockquote>
<pre class="java"><code>package cn.edu.bdu.mc.servlets;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class LogoutServlet
 */
@WebServlet(&quot;/Logout&quot;)
public class LogoutServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public LogoutServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        request.getSession().removeAttribute(&quot;user&quot;);
        response.sendRedirect(&quot;client/index.jsp&quot;);
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        doGet(request, response);
    }

}
</code></pre>
<h2 id="bookservice的改动添加图片">9.BookService的改动——添加图片</h2>
<h3 id="代码-6">代码</h3>
<blockquote>
<p>差点忘了往上放这部分。。。</p>
</blockquote>
<pre class="java"><code>
        @Override
    public void addImg(int book_id, String path) throws SQLException, IOException {
        // TODO Auto-generated method stub
        dao.addImg(book_id, path);
    }

    @Override
    public InputStream getImgById(int book_id) throws SQLException {
        // TODO Auto-generated method stub
        return dao.getImgById(book_id);
    }
//好像应该看dao里的，，
/*
    @Override
    public void addImg(int book_id, String path) throws SQLException, IOException {
        // TODO Auto-generated method stub
        Connection conn = null;
        PreparedStatement ps = null;
        FileInputStream in = null;
        in = new FileInputStream(new File(path));
        conn = JDBCUtil.getConn();
        String sql = &quot;update book set book_img = ? where book_id = ?&quot;;
        ps = conn.prepareStatement(sql);
        ps.setBinaryStream(1, in, in.available());
        ps.setInt(2, book_id);
        int count = ps.executeUpdate();
        if (count &gt; 0) {
            System.out.println(&quot;插入成功！&quot;);
        } else {
            System.out.println(&quot;插入失败！&quot;);
        }
        JDBCUtil.release(conn, ps);
    }

    @Override
    public InputStream getImgById(int book_id) throws SQLException {
        // TODO Auto-generated method stub
        Connection conn = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        InputStream in = null;
        try {
            conn = JDBCUtil.getConn();
            String sql = &quot;select book_img from book where book_id = ?&quot;;
            ps = conn.prepareStatement(sql);
            ps.setInt(1, book_id);
            rs = ps.executeQuery();
            while (rs.next()) {
                in = rs.getBinaryStream(&quot;book_img&quot;);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        JDBCUtil.release(conn, ps, rs);
        return in;
    }
*/
//注意，一定不要忘记释放连接，不然你网页卡半天也加载不出来图片。。。
</code></pre>
<h2 id="总结">总结</h2>
<blockquote>
<p>今天遇到的错误还挺多的，好在都解决得差不多了，主页终于完工了，然后今天其实打代码的时间比较少，啊，做不完啦做不完啦！好烦啊！</p>
</blockquote>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>