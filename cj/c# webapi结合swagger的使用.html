<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修c# webapi结合swagger的使用' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>c# webapi结合swagger的使用</center></div><div class='banquan'>原文出处:本文由博客园博主沿途放纵过往不究提供。<br/>
原文连接:https://www.cnblogs.com/htsboke/p/11475681.html</div><br>
    <p><span style="font-size: 18px;"><strong>一、使用nuget下载swagger包</strong></span></p>
<p>&nbsp; &nbsp; &nbsp;Install-Package Swashbuckle</p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;"><strong>二、配置swagger</strong></span></p>
<p>&nbsp; &nbsp; 1. 安装完Swashbuckle后，nuget会将相关引用添加至WebApi项目，其中会在App_Start文件夹下添加一个<span style="color: #00ccff;"><strong>SwaggerConfig.cs</strong></span>文件，如下图所示：<br />&nbsp; &nbsp; &nbsp;<img src="./images/c# webapi结合swagger的使用0.png" alt="" width="237" height="206" /></p>
<p>&nbsp;</p>
<p>&nbsp; &nbsp;2. 设置WebApi生成时，顺便生成一份xml文档信息，用于swagger使用</p>
<p>&nbsp; &nbsp;<img src="./images/c# webapi结合swagger的使用1.png" alt="" width="516" height="459" /></p>
<p>&nbsp;</p>
<p>&nbsp; 3. 配置swagger引用项目类库生成的xml文档，在<span style="color: #00ccff;"><strong>SwaggerConfig.cs</strong></span>文件里面进行配置</p>
<p><img src="./images/c# webapi结合swagger的使用2.png" alt="" width="853" height="536" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp; 4. 汉化swaggerui</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('e027716e-7721-4172-839c-b8e98fa1beb4')"><img id="code_img_closed_e027716e-7721-4172-839c-b8e98fa1beb4" class="code_img_closed" src="./images/c# webapi结合swagger的使用3.png" alt="" /><img id="code_img_opened_e027716e-7721-4172-839c-b8e98fa1beb4" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e027716e-7721-4172-839c-b8e98fa1beb4',event)" src="./images/c# webapi结合swagger的使用4.png" alt="" />
<div id="cnblogs_code_open_e027716e-7721-4172-839c-b8e98fa1beb4" class="cnblogs_code_hide">
<pre><code>'use strict'<span style="color: #000000;">;

</span><span style="color: #008000;">/*</span><span style="color: #008000;">* 
 * Translator for documentation pages. 
 * 
 * To enable translation you should include one of language-files in your index.html 
 * after &lt;script src='lang/translator.js' type='text/javascript'&gt;&lt;/script&gt;. 
 * For example - &lt;script src='lang/ru.js' type='text/javascript'&gt;&lt;/script&gt; 
 * 
 * If you wish to translate some new texsts you should do two things: 
 * 1. Add a new phrase pair ("New Phrase": "New Translation") into your language file (for example lang/ru.js). It will be great if you add it in other language files too. 
 * 2. Mark that text it templates this way &lt;anyHtmlTag data-sw-translate&gt;New Phrase&lt;/anyHtmlTag&gt; or &lt;anyHtmlTag data-sw-translate value='New Phrase'/&gt;. 
 * The main thing here is attribute data-sw-translate. Only inner html, title-attribute and value-attribute are going to translate. 
 * 
 </span><span style="color: #008000;">*/</span><span style="color: #000000;">
window.SwaggerTranslator </span>=<span style="color: #000000;"> {
    _words: [],

    translate: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
        </span><span style="color: #0000ff;">var</span> $<span style="color: #0000ff;">this</span> = <span style="color: #0000ff;">this</span><span style="color: #000000;">;
        $(</span>'[data-sw-translate]').each(<span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            $(</span><span style="color: #0000ff;">this</span>).html($<span style="color: #0000ff;">this</span>._tryTranslate($(<span style="color: #0000ff;">this</span><span style="color: #000000;">).html()));
            $(</span><span style="color: #0000ff;">this</span>).val($<span style="color: #0000ff;">this</span>._tryTranslate($(<span style="color: #0000ff;">this</span><span style="color: #000000;">).val()));
            $(</span><span style="color: #0000ff;">this</span>).attr('title', $<span style="color: #0000ff;">this</span>._tryTranslate($(<span style="color: #0000ff;">this</span>).attr('title'<span style="color: #000000;">)));
        });
    },

    _tryTranslate: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (word) {
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span>._words[$.trim(word)] !== undefined ? <span style="color: #0000ff;">this</span><span style="color: #000000;">._words[$.trim(word)] : word;
    },

    learn: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (wordsMap) {
        </span><span style="color: #0000ff;">this</span>._words =<span style="color: #000000;"> wordsMap;
    }
};


</span><span style="color: #008000;">/*</span><span style="color: #008000;"> jshint quotmark: double </span><span style="color: #008000;">*/</span><span style="color: #000000;">
window.SwaggerTranslator.learn({
    </span>"Warning: Deprecated": "警告：已过时"<span style="color: #000000;">,
    </span>"Implementation Notes": "实现备注"<span style="color: #000000;">,
    </span>"Response Class": "响应类"<span style="color: #000000;">,
    </span>"Status": "状态"<span style="color: #000000;">,
    </span>"Parameters": "参数"<span style="color: #000000;">,
    </span>"Parameter": "参数"<span style="color: #000000;">,
    </span>"Value": "值"<span style="color: #000000;">,
    </span>"Description": "描述"<span style="color: #000000;">,
    </span>"Parameter Type": "参数类型"<span style="color: #000000;">,
    </span>"Data Type": "数据类型"<span style="color: #000000;">,
    </span>"Response Messages": "响应消息"<span style="color: #000000;">,
    </span>"HTTP Status Code": "HTTP状态码"<span style="color: #000000;">,
    </span>"Reason": "原因"<span style="color: #000000;">,
    </span>"Response Model": "响应模型"<span style="color: #000000;">,
    </span>"Request URL": "请求URL"<span style="color: #000000;">,
    </span>"Response Body": "响应体"<span style="color: #000000;">,
    </span>"Response Code": "响应码"<span style="color: #000000;">,
    </span>"Response Headers": "响应头"<span style="color: #000000;">,
    </span>"Hide Response": "隐藏响应"<span style="color: #000000;">,
    </span>"Headers": "头"<span style="color: #000000;">,
    </span>"Try it out!": "试一下！"<span style="color: #000000;">,
    </span>"Show/Hide": "显示/隐藏"<span style="color: #000000;">,
    </span>"List Operations": "显示操作"<span style="color: #000000;">,
    </span>"Expand Operations": "展开操作"<span style="color: #000000;">,
    </span>"Raw": "原始"<span style="color: #000000;">,
    </span>"can't parse JSON.  Raw result": "无法解析JSON. 原始结果"<span style="color: #000000;">,
    </span>"Model Schema": "模型架构"<span style="color: #000000;">,
    </span>"Model": "模型"<span style="color: #000000;">,
    </span>"apply": "应用"<span style="color: #000000;">,
    </span>"Username": "用户名"<span style="color: #000000;">,
    </span>"Password": "密码"<span style="color: #000000;">,
    </span>"Terms of service": "服务条款"<span style="color: #000000;">,
    </span>"Created by": "创建者"<span style="color: #000000;">,
    </span>"See more at": "查看更多："<span style="color: #000000;">,
    </span>"Contact the developer": "联系开发者"<span style="color: #000000;">,
    </span>"api version": "api版本"<span style="color: #000000;">,
    </span>"Response Content Type": "响应Content Type"<span style="color: #000000;">,
    </span>"fetching resource": "正在获取资源"<span style="color: #000000;">,
    </span>"fetching resource list": "正在获取资源列表"<span style="color: #000000;">,
    </span>"Explore": "浏览"<span style="color: #000000;">,
    </span>"Show Swagger Petstore Example Apis": "显示 Swagger Petstore 示例 Apis"<span style="color: #000000;">,
    </span>"Can't read from server.  It may not have the appropriate access-control-origin settings.": "无法从服务器读取。可能没有正确设置access-control-origin。"<span style="color: #000000;">,
    </span>"Please specify the protocol for": "请指定协议："<span style="color: #000000;">,
    </span>"Can't read swagger JSON from": "无法读取swagger JSON于"<span style="color: #000000;">,
    </span>"Finished Loading Resource Information. Rendering Swagger UI": "已加载资源信息。正在渲染Swagger UI"<span style="color: #000000;">,
    </span>"Unable to read api": "无法读取api"<span style="color: #000000;">,
    </span>"from path": "从路径"<span style="color: #000000;">,
    </span>"server returned": "服务器返回"<span style="color: #000000;">
});


$(</span><span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
    window.SwaggerTranslator.translate();
});</span></pre>
</div>
<span class="cnblogs_code_collapse">swagger_lang_cn.js</span></div>
<p>&nbsp; 注意修改汉化的js文件属性的&ldquo;生成操作&rdquo;改为：&ldquo;嵌入的资源</p>
<p><img src="./images/c# webapi结合swagger的使用5.png" alt="" width="266" height="169" /></p>
<p>配置swagger注入汉化文件</p>
<p><img src="./images/c# webapi结合swagger的使用6.png" alt="" width="919" height="553" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;</p>
<p><span style="font-size: 18px;"><strong>三、配置swagger代码</strong></span></p>
<p>&nbsp;</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('d0592b5a-0e6c-45e3-a01e-6ebf3463f0fd')"><img id="code_img_closed_d0592b5a-0e6c-45e3-a01e-6ebf3463f0fd" class="code_img_closed" src="./images/c# webapi结合swagger的使用3.png" alt="" /><img id="code_img_opened_d0592b5a-0e6c-45e3-a01e-6ebf3463f0fd" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d0592b5a-0e6c-45e3-a01e-6ebf3463f0fd',event)" src="./images/c# webapi结合swagger的使用4.png" alt="" />
<div id="cnblogs_code_open_d0592b5a-0e6c-45e3-a01e-6ebf3463f0fd" class="cnblogs_code_hide">
<pre><code> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
    <span style="color: #808080;">///</span><span style="color: #008000;"> swagger文档配置信息
    </span><span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> SwaggerConfig
    {
        </span><span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
        <span style="color: #808080;">///</span><span style="color: #008000;"> 注册swagger相关配置信息
        </span><span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
        <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> Register()
        {
            </span><span style="color: #0000ff;">var</span> thisAssembly = <span style="color: #0000ff;">typeof</span><span style="color: #000000;">(SwaggerConfig).Assembly;

            GlobalConfiguration.Configuration
                .EnableSwagger(c </span>=&gt;<span style="color: #000000;">
                    {
                        </span><span style="color: #008000;">//</span><span style="color: #008000;">设置swagger显示的版本号和标题</span>
                        c.SingleApiVersion(<span style="color: #800000;">"</span><span style="color: #800000;">v1</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">Api描述文档</span><span style="color: #800000;">"</span><span style="color: #000000;">);

                        </span><span style="color: #008000;">//</span><span style="color: #008000;">设置接口描述xml路径地址</span>
                        <span style="color: #0000ff;">var</span> webApiXmlPath = <span style="color: #0000ff;">string</span>.Format(<span style="color: #800000;">"</span><span style="color: #800000;">{0}/bin/ClearSite.WebApi.xml</span><span style="color: #800000;">"</span><span style="color: #000000;">, System.AppDomain.CurrentDomain.BaseDirectory);
                        c.IncludeXmlComments(webApiXmlPath);

                        </span><span style="color: #008000;">//</span><span style="color: #008000;">设置接口描述xml路径地址</span>
                        <span style="color: #0000ff;">var</span> applicationXmlPath = <span style="color: #0000ff;">string</span>.Format(<span style="color: #800000;">"</span><span style="color: #800000;">{0}/bin/ClearSite.Application.xml</span><span style="color: #800000;">"</span><span style="color: #000000;">, System.AppDomain.CurrentDomain.BaseDirectory);
                        c.IncludeXmlComments(applicationXmlPath);

                        </span><span style="color: #008000;">//</span><span style="color: #008000;">设置接口描述xml路径地址</span>
                        <span style="color: #0000ff;">var</span> coreXmlPath = <span style="color: #0000ff;">string</span>.Format(<span style="color: #800000;">"</span><span style="color: #800000;">{0}/bin/ClearSite.Core.xml</span><span style="color: #800000;">"</span><span style="color: #000000;">, System.AppDomain.CurrentDomain.BaseDirectory);
                        c.IncludeXmlComments(coreXmlPath);

                        </span><span style="color: #008000;">//</span><span style="color: #008000;">添加操作选项
                        </span><span style="color: #008000;">//</span><span style="color: #008000;">c.OperationFilter&lt;AuthTokenHeaderParameter&gt;();</span>
<span style="color: #000000;">                    })
                .EnableSwaggerUi(c </span>=&gt;<span style="color: #000000;">
                    {
                        </span><span style="color: #008000;">//</span><span style="color: #008000;">加载汉化的js文件，注意 swagger_lang_cn.js 文件属性必须设置为&ldquo;嵌入的资源&rdquo;。</span>
                        c.InjectJavaScript(System.Reflection.Assembly.GetExecutingAssembly(), <span style="color: #800000;">"</span><span style="color: #800000;">ClearSite.WebApi.Scripts.swagger_lang_cn.js</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                    });
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">SwaggerConfig.cs</span></div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;"><strong>四、运行结果</strong></span></p>
<p>&nbsp;</p>
<p><strong>&nbsp;<img src="./images/c# webapi结合swagger的使用9.png" alt="" /></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;</p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>