<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修第39章 引用令牌 - Identity Server 4 中文文档(v1.0.0)' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>第39章 引用令牌 - Identity Server 4 中文文档(v1.0.0)</center></div><div class='banquan'>原文出处:本文由博客园博主ThinksJay提供。<br/>
原文连接:https://www.cnblogs.com/thinksjay/p/10784266.html</div><br>
    <p>访问令牌有两种形式 - 自包含或引用。</p>
<p>JWT令牌将是一个自包含的访问令牌 - 它是一个带有声明和过期的受保护数据结构。一旦API了解了密钥材料，它就可以验证自包含的令牌，而无需与发行者进行通信。这使得JWT难以撤销。它们将一直有效，直到它们过期。</p>
<p>使用引用令牌时 - IdentityServer会将令牌的内容存储在数据存储中，并且只会将此令牌的唯一标识符发回给客户端。然后，接收此引用的API必须打开与IdentityServer的反向通道通信以验证令牌。</p>
<div align="center">
<image src="https://identityserver4.readthedocs.io/en/latest/_images/reference_tokens.png"/>
</div>
<p>您可以使用以下设置切换客户端的令牌类型：</p>
<pre><code><code>client.AccessTokenType = AccessTokenType.Reference;</code></pre>
<p>IdentityServer提供了OAuth 2.0内省规范的实现，该规范允许API取消引用令牌。您可以使用我们的专用<a href="https://github.com/IdentityModel/IdentityModel.AspNetCore.OAuth2Introspection">内省处理程序</a> 或使用<a href="https://github.com/IdentityServer/IdentityServer4.AccessTokenValidation">身份服务器身份验证处理程序</a>，它可以验证JWT和引用令牌。</p>
<p>内省端点需要身份验证 - 因为内省端点的客户端是API，您可以在以下位置配置秘密<code>ApiResource</code>：</p>
<pre><code><code>var api = new ApiResource(&quot;api1&quot;)
{
    ApiSecrets = { new Secret(&quot;secret&quot;.Sha256()) }
}</code></pre>
<p>有关如何为API配置IdentityServer身份验证中间件的详细信息，请参阅<a href="https://github.com/thinksjay/IdentityServer4/blob/master/%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86%20%E4%B8%BB%E9%A2%98/%E7%AC%AC29%E7%AB%A0%20%E4%BF%9D%E6%8A%A4API.md">此处</a>。</p>
<p><a href="https://github.com/thinksjay/IdentityServer4">github地址</a></p>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>