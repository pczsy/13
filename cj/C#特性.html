<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修C#特性' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>C#特性</center></div><div class='banquan'>原文出处:本文由博客园博主冰乐提供。<br/>
原文连接:https://www.cnblogs.com/taotaozhuanyong/p/11761094.html</div><br>
    <p><span data-ttu-id="ad364-104">C# 程序中的类型、成员和其他实体支持使用修饰符来控制其行为的某些方面。&nbsp;<span data-ttu-id="ad364-105">例如，方法的可访问性是由&nbsp;<code>public</code>、<code>protected</code>、<code>internal</code>&nbsp;和&nbsp;<code>private</code>&nbsp;修饰符控制。&nbsp;<span data-ttu-id="ad364-106">C# 整合了这种能力，以便可以将用户定义类型的声明性信息附加到程序实体，并在运行时检索此类信息。&nbsp;<span data-ttu-id="ad364-107">程序通过定义和使用<em>特性</em>来指定此类额外的声明性信息。</span></span></span></span></p>
<p><span data-ttu-id="ad364-108">以下示例声明了&nbsp;<code>HelpAttribute</code>&nbsp;特性，可将其附加到程序实体，以提供指向关联文档的链接。</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> HelpAttribute : Attribute
{
    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> url;
    </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> topic;
    </span><span style="color: #0000ff;">public</span> HelpAttribute(<span style="color: #0000ff;">string</span><span style="color: #000000;"> url)
    {
        </span><span style="color: #0000ff;">this</span>.url =<span style="color: #000000;"> url;
    }

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> Url =&gt;<span style="color: #000000;"> url;

    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span><span style="color: #000000;"> Topic
    {
        </span><span style="color: #0000ff;">get</span> { <span style="color: #0000ff;">return</span><span style="color: #000000;"> topic; }
        </span><span style="color: #0000ff;">set</span> { topic =<span style="color: #000000;"> value; }
    }
}</span></pre>
</div>
<p><span data-ttu-id="ad364-109">所有特性类都派生自标准库提供的&nbsp;<a class="xref" href="https://docs.microsoft.com/zh-cn/dotnet/api/system.attribute" data-linktype="absolute-path">Attribute</a>&nbsp;基类。&nbsp;<span data-ttu-id="ad364-110">特性的应用方式为，在相关声明前的方括号内指定特性的名称以及任意自变量。&nbsp;<span data-ttu-id="ad364-111">如果特性的名称以&nbsp;<code>Attribute</code>&nbsp;结尾，那么可以在引用特性时省略这部分名称。&nbsp;<span data-ttu-id="ad364-112">例如，可按如下方法使用&nbsp;<code>HelpAttribute</code>。</span></span></span></span></p>
<div class="cnblogs_code">
<pre><code>[Help(<span style="color: #800000;">"</span><span style="color: #800000;">https://www.cnblogs.com/taotaozhuanyong/</span><span style="color: #800000;">"</span><span style="color: #000000;">)]
</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Widget
{
    [Help(</span><span style="color: #800000;">"</span><span style="color: #800000;">https://www.cnblogs.com/taotaozhuanyong/</span><span style="color: #800000;">"</span>, Topic = <span style="color: #800000;">"</span><span style="color: #800000;">Display</span><span style="color: #800000;">"</span><span style="color: #000000;">)]
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> Display(<span style="color: #0000ff;">string</span><span style="color: #000000;"> text)
    {

    }
}</span></pre>
</div>
<p><span data-ttu-id="ad364-113">此示例将&nbsp;<code>HelpAttribute</code>&nbsp;附加到&nbsp;<code>Widget</code>&nbsp;类。&nbsp;<span data-ttu-id="ad364-114">还向此类中的&nbsp;<code>Display</code>&nbsp;方法附加了另一个&nbsp;<code>HelpAttribute</code>。&nbsp;<span data-ttu-id="ad364-115">特性类的公共构造函数控制了将特性附加到程序实体时必须提供的信息。&nbsp;<span data-ttu-id="ad364-116">可以通过引用特性类的公共读写属性（如上面示例对&nbsp;<code>Topic</code>&nbsp;属性的引用），提供其他信息。</span></span></span></span></p>
<p><span data-ttu-id="ad364-117">可以在运行时使用反射来读取和操纵特性定义的元数据。&nbsp;<span data-ttu-id="ad364-118">如果使用这种方法请求获取特定特性，便会调用特性类的构造函数（在程序源中提供信息），并返回生成的特性实例。&nbsp;<span data-ttu-id="ad364-119">如果是通过属性提供其他信息，那么在特性实例返回前，这些属性会设置为给定值。</span></span></span></p>
<p><span data-ttu-id="ad364-120">下面的代码示例展示了如何获取与&nbsp;<code>Widget</code>&nbsp;类及其&nbsp;<code>Display</code>&nbsp;方法相关联的&nbsp;<code>HelpAttribute</code>&nbsp;实例。</span></p>
<div class="cnblogs_code">
<pre><code>Type widgetType = <span style="color: #0000ff;">typeof</span><span style="color: #000000;">(Widget);
</span><span style="color: #008000;">//</span><span style="color: #008000;">获取为小部件类型定义的每个helpattribute。</span>
<span style="color: #0000ff;">var</span> widgetClassAttributes = widgetType.GetCustomAttributes(<span style="color: #0000ff;">typeof</span>(HelpAttribute), <span style="color: #0000ff;">false</span><span style="color: #000000;">);
</span><span style="color: #0000ff;">if</span> (widgetClassAttributes.Length &gt; <span style="color: #800080;">0</span><span style="color: #000000;">)
{
    </span><span style="color: #0000ff;">var</span> attr = (HelpAttribute)widgetClassAttributes[<span style="color: #800080;">0</span><span style="color: #000000;">];
    Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">Widget class help URL:{attr.Url}-Related topic :{attr.Topic}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
}
MethodInfo displayMethod </span>=<span style="color: #000000;"> widgetType.GetMethod(nameof(Widget.Display));
</span><span style="color: #008000;">//</span><span style="color: #008000;">获取为widget.display方法定义的每个helpattribute。</span>
<span style="color: #0000ff;">var</span> displayMethodAttributes = displayMethod.GetCustomAttributes(<span style="color: #0000ff;">typeof</span>(HelpAttribute), <span style="color: #0000ff;">false</span><span style="color: #000000;">);
</span><span style="color: #0000ff;">if</span> (displayMethodAttributes.Length &gt; <span style="color: #800080;">0</span><span style="color: #000000;">)
{
    </span><span style="color: #0000ff;">var</span> attr = (HelpAttribute)displayMethodAttributes[<span style="color: #800080;">0</span><span style="color: #000000;">];
    Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">Display method help URL : {attr.Url} - Related topic : {attr.Topic}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
}
Console.ReadLine();</span></pre>
</div>
<p>运行结果如下：</p>
<p><img src="./images/C#特性0.png" alt="" /></p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>