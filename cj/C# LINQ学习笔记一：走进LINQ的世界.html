<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修C# LINQ学习笔记一：走进LINQ的世界' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>C# LINQ学习笔记一：走进LINQ的世界</center></div><div class='banquan'>原文出处:本文由博客园博主缥缈的尘埃提供。<br/>
原文连接:https://www.cnblogs.com/atomy/p/12084521.html</div><br>
    <p>&nbsp; &nbsp;&nbsp;本笔记摘抄自：<a href="https://www.cnblogs.com/liqingwen/p/5832322.html">https://www.cnblogs.com/liqingwen/p/5832322.html</a>，记录一下学习过程以备后续查用。</p>
<p>&nbsp; &nbsp;&nbsp;<strong>LINQ 简介：</strong></p>
<p><strong>&nbsp; &nbsp;&nbsp;</strong>语言集成查询(LINQ)是Visual Studio 2008和.NET Framework 3.5版中引入的一项创新功能。</p>
<p>　传统上，针对数据的查询都是以简单的字符串表示，而没有编译时类型检查或IntelliSense支持。此外，您还必须针对以下各种数据源学习一种不同的查询</p>
<p>语言：SQL数据库、XML文档、各种Web服务等。通过LINQ，可以使用语言关键字和熟悉的运算符针对强类型化对象集合编写查询。</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界0.png" alt="" /></p>
<p>&nbsp; &nbsp;&nbsp;在Visual Studio中，可以为以下数据源编写LINQ查询：SQL Server数据库、XML文档、ADO.NET数据集以及支持&nbsp;<a href="https://msdn.microsoft.com/zh-cn/library/system.collections.ienumerable.aspx">IEnumerable</a>或泛型&nbsp;<a href="https://msdn.microsoft.com/zh-cn/library/9eekhta0.aspx">IEnumerable&lt;T&gt;</a>&nbsp;</p>
<p>接口的任意对象集合，使用要求：项目 &ge; .NET Framework 3.5。</p>
<p>&nbsp; &nbsp;&nbsp;<strong>一、LINQ查询</strong></p>
<p><strong>&nbsp; &nbsp;&nbsp;</strong>查询是一种从数据源检索数据的表达式。随着时间的推移，人们已经为各种数据源开发了不同的语言。例如，用于关系数据库的SQL和用于XML的XQuery。</p>
<p>因此，开发人员不得不针对他们必须支持的每种数据源或数据格式而学习新的查询语言。LINQ通过提供一种跨数据源和数据格式使用数据的一致模型，简化</p>
<p>了这一情况。在LINQ查询中，始终会用到对象。可以使用相同的编码模式来查询和转换XML文档、SQL数据库、ADO.NET数据集、.NET集合中的数据以及</p>
<p>对其有LINQ提供程序可用的任何其他格式的数据。</p>
<p>&nbsp; &nbsp; <strong>1.1&nbsp;查询操作的三个部分</strong></p>
<p><strong>&nbsp; &nbsp;&nbsp;</strong>操作三部曲：①取数据源 ②创建查询 ③执行查询</p>
<p>&nbsp; &nbsp; 下面代码演示LINQ to OBJECT：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('e8688265-0037-48c5-badf-b28bf585fe62')"><img id="code_img_closed_e8688265-0037-48c5-badf-b28bf585fe62" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_e8688265-0037-48c5-badf-b28bf585fe62" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e8688265-0037-48c5-badf-b28bf585fe62',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_e8688265-0037-48c5-badf-b28bf585fe62" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ to OBJECT
            <span style="color: #008000;">//</span><span style="color: #008000;">查询三部曲：1、获取数据源</span>
            <span style="color: #0000ff;">var</span> nums = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">int</span>[<span style="color: #800080;">7</span>] { <span style="color: #800080;">0</span>, <span style="color: #800080;">1</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">3</span>, <span style="color: #800080;">4</span>, <span style="color: #800080;">5</span>, <span style="color: #800080;">6</span><span style="color: #000000;"> };

            </span><span style="color: #008000;">//</span><span style="color: #008000;">查询三部曲：2、创建查询</span>
            <span style="color: #0000ff;">var</span> query =
                <span style="color: #0000ff;">from</span> num <span style="color: #0000ff;">in</span><span style="color: #000000;"> nums
                </span><span style="color: #0000ff;">where</span> (num % <span style="color: #800080;">2</span>) == <span style="color: #800080;">0</span>
                <span style="color: #0000ff;">select</span><span style="color: #000000;"> num;

            </span><span style="color: #008000;">//</span><span style="color: #008000;">查询三部曲：3、执行查询</span>
            <span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> num <span style="color: #0000ff;">in</span><span style="color: #000000;"> query)
            {
                Console.Write($</span><span style="color: #800000;">"</span><span style="color: #800000;">{num} </span><span style="color: #800000;">"</span><span style="color: #000000;">);
            }

            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界3.png" alt="" /></p>
<p>&nbsp; &nbsp; 下图显示了完整的查询操作。在LINQ中，查询的执行与查询本身截然不同。换句话说，查询本身指的是只创建查询变量，不检索任何数据。</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界4.png" alt="" /></p>
<p>&nbsp; &nbsp; <strong>1.2&nbsp;数据源</strong></p>
<p>&nbsp; &nbsp; 在上一个示例中(<strong>LINQ to OBJECT</strong>)，由于数据源是数组，因此它隐式支持泛型&nbsp;<a href="https://msdn.microsoft.com/zh-cn/library/9eekhta0.aspx">IEnumerable&lt;T&gt;</a>&nbsp;（可枚举）接口。支持&nbsp;<a href="https://msdn.microsoft.com/zh-cn/library/9eekhta0.aspx">IEnumerable&lt;T&gt;</a>&nbsp;或派生接口（如</p>
<p>泛型<a href="https://msdn.microsoft.com/zh-cn/library/bb351562.aspx">IQueryable&lt;T&gt;</a>）的类型称为可查询类型。</p>
<p>&nbsp; &nbsp;&nbsp;可查询类型不需要进行修改或特殊处理就可以用作LINQ数据源。如果源数据还没有作为可查询类型出现在内存中，则LINQ提供程序必须以此方式表示源数</p>
<p>据。例如，<strong>LINQ to XML</strong>将XML文档加载到可查询的&nbsp;<a href="https://msdn.microsoft.com/zh-cn/library/system.xml.linq.xelement.aspx">XElement</a>&nbsp;类型中。</p>
<p>&nbsp; &nbsp; 下面代码演示LINQ to XML：</p>
<p>&nbsp; &nbsp; 创建一个Test.xml文件，放在主目录下。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('a9868cc8-7562-43f0-9487-9495518a9e77')"><img id="code_img_closed_a9868cc8-7562-43f0-9487-9495518a9e77" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_a9868cc8-7562-43f0-9487-9495518a9e77" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a9868cc8-7562-43f0-9487-9495518a9e77',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_a9868cc8-7562-43f0-9487-9495518a9e77" class="cnblogs_code_hide">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">DocumentElement</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>MOA1911070001<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>8198712090963008<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>1.00000000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>MPA19110701<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>MOA1911070002<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>8193000000003172<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>1.00000000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>MPA19110702<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>MOA1911070003<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>8193002043133003<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>1.00000000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>MPA19110702<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>MOA1911070004<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>8193002043133004<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>1.00000000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>MPA19110702<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>MOA1911070005<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>8193002043133005<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>1.00000000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>MPA19110702<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>MOA1911070006<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>8198922092971001<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>1.00000000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>MPA19110703<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>MOA1911070007<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>8198922092971002<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>1.00000000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>MPA19110703<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>MOA1911070008<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>8198922092971010<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>1.00000000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>MPA19110703<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>MOA1911070009<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>8198922092971200<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>1.00000000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>MPA19110703<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>MOA1911070010<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MO_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>8199862094443008<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">MRP_NO</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>1.00000000<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">QTY</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>MPA19110704<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">BIL_NO</span><span style="color: #0000ff;">&gt;</span>
  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">Category</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">DocumentElement</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('ccc5043e-3091-42d8-be35-7248a6fd6c64')"><img id="code_img_closed_ccc5043e-3091-42d8-be35-7248a6fd6c64" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_ccc5043e-3091-42d8-be35-7248a6fd6c64" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ccc5043e-3091-42d8-be35-7248a6fd6c64',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_ccc5043e-3091-42d8-be35-7248a6fd6c64" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ to XML
            <span style="color: #0000ff;">var</span> xe = XElement.Load(<span style="color: #800000;">@"</span><span style="color: #800000;">..\..\Test.xml</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">var</span> query =
                <span style="color: #0000ff;">from</span> item <span style="color: #0000ff;">in</span> xe.Descendants(<span style="color: #800000;">"</span><span style="color: #800000;">Category</span><span style="color: #800000;">"</span><span style="color: #000000;">)
                </span><span style="color: #0000ff;">select</span><span style="color: #000000;"> item;
            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span><span style="color: #000000;"> query)
            {
                Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">MO_NO={item.Element(</span><span style="color: #800000;">"</span>MO_NO<span style="color: #800000;">"</span><span style="color: #800000;">).Value}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            }
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界9.png" alt="" /></p>
<div>
<p>&nbsp; &nbsp;&nbsp;在<strong>LINQ to SQL</strong>中，首先需要生成对象模型映射到关系数据库，然后针对这些对象编写查询，由LINQ to SQL在运行时处理与数据库的通信。</p>
<p>&nbsp; &nbsp; 准备一：下文中用到的Northwind数据库，下载地址为：<a href="https://www.microsoft.com/en-us/download/confirmation.aspx?id=23654">https://www.microsoft.com/en-us/download/confirmation.aspx?id=23654</a></p>
<p>&nbsp; &nbsp; 准备二：若本机没有安装LINQ to SQL工具，可参考安装教程：<a href="https://blog.csdn.net/u011176794/article/details/90287293">https://blog.csdn.net/u011176794/article/details/90287293</a></p>
<p>&nbsp; &nbsp; 准备三：添加新建项，选择LINQ to SQL类，命名为Sample。</p>
<p>&nbsp; &nbsp; 准备四：服务器资源管理器的数据连接中，右键添加连接，依导向连接至SQL Server数据库。</p>
<p>&nbsp; &nbsp; 准备五：将相关数据表拖至Sample.dbml中并保存。</p>
<p>&nbsp; &nbsp; 准备六：添加引用System.Data.Linq。</p>
<p>&nbsp; &nbsp; 下面代码演示LINQ to SQL：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('8b015e07-bd7f-42f7-bbf0-e4b08c4a6407')"><img id="code_img_closed_8b015e07-bd7f-42f7-bbf0-e4b08c4a6407" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_8b015e07-bd7f-42f7-bbf0-e4b08c4a6407" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('8b015e07-bd7f-42f7-bbf0-e4b08c4a6407',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_8b015e07-bd7f-42f7-bbf0-e4b08c4a6407" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ to SQL
            <span style="color: #0000ff;">var</span> db = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SampleDataContext();
            </span><span style="color: #0000ff;">var</span> query =
                <span style="color: #0000ff;">from</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Customers
                </span><span style="color: #0000ff;">where</span> cust.City == <span style="color: #800000;">"</span><span style="color: #800000;">London</span><span style="color: #800000;">"</span>
                <span style="color: #0000ff;">select</span><span style="color: #000000;"> cust;
            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span><span style="color: #000000;"> query)
            {
                Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">CustomerID={item.CustomerID}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            }
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界12.png" alt="" /></p>
<div><strong>&nbsp; &nbsp; 1.3查询</strong></div>
<div>
<p>&nbsp; &nbsp; 查询指定要从数据源中检索的信息，可以指定在返回这些信息之前如何对其进行排序、分组和结构化。 查询存储在查询变量中，并用查询表达式进行初始</p>
<p>化。之前的示例中的查询是从整数数组中返回所有的偶数。该查询表达式包含三个子句：<strong>from</strong>、<strong>where</strong>和<strong>select</strong>。如果您熟悉SQL，您会注意到这些子句的</p>
<p>顺序与SQL中的顺序相反，<strong>from</strong>&nbsp;子句指定数据源，<strong>where</strong>&nbsp;子句指定应用筛选器，<strong>select</strong>&nbsp;子句指定返回的元素的类型。目前需要注意的是，在LINQ中，查询</p>
<p>变量本身不执行任何操作并且不返回任何数据，它只是存储在以后某个时刻执行查询时为生成结果而必需的信息。</p>
<p><strong>&nbsp; &nbsp; 1.4 查询执行</strong></p>
<p>&nbsp; &nbsp;&nbsp;<strong>1.延迟执行</strong></p>
<p>&nbsp; &nbsp;&nbsp;如前所述，查询变量本身只是存储查询命令，实际的查询执行会延迟到在<strong>foreach</strong>语句中循环访问查询变量时发生，此概念称为&ldquo;延迟执行&rdquo;。</p>
<p>&nbsp; &nbsp;&nbsp;<strong>2.强制立即执行</strong></p>
<p>&nbsp; &nbsp;&nbsp;对一系列源元素执行聚合函数的查询必须首先循环访问这些元素，<strong>Count</strong>、<strong>Max</strong>、<strong>Average</strong>和<strong>First</strong>就属于此类查询。由于查询本身必须使用<strong>foreach</strong>以便</p>
<p>返回结果，因此这些查询在执行时不使用显式<strong>foreach</strong>语句。另外还要注意，这些类型的查询返回单个值，而不是<strong>IEnumerable</strong>集合。</p>
</div>
<div>
<div class="cnblogs_code" onclick="cnblogs_code_show('f7b76edb-861e-4699-a604-f27e50979b2d')"><img id="code_img_closed_f7b76edb-861e-4699-a604-f27e50979b2d" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_f7b76edb-861e-4699-a604-f27e50979b2d" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('f7b76edb-861e-4699-a604-f27e50979b2d',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_f7b76edb-861e-4699-a604-f27e50979b2d" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ查询强制立即执行一
            <span style="color: #0000ff;">var</span> nums = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">int</span>[<span style="color: #800080;">7</span>] { <span style="color: #800080;">0</span>, <span style="color: #800080;">1</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">3</span>, <span style="color: #800080;">4</span>, <span style="color: #800080;">5</span>, <span style="color: #800080;">6</span><span style="color: #000000;"> };
            </span><span style="color: #0000ff;">var</span> query =
                <span style="color: #0000ff;">from</span> num <span style="color: #0000ff;">in</span><span style="color: #000000;"> nums
                </span><span style="color: #0000ff;">where</span> (num % <span style="color: #800080;">2</span>) == <span style="color: #800080;">0</span>
                <span style="color: #0000ff;">select</span><span style="color: #000000;"> num;
            </span><span style="color: #0000ff;">var</span> numCount =<span style="color: #000000;"> query.Count();
            Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">NumCount={numCount}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
</div>
<div>&nbsp; &nbsp; 运行结果如下：</div>
<div><img src="./images/C# LINQ学习笔记一：走进LINQ的世界15.png" alt="" />
<p>&nbsp; &nbsp;&nbsp;若要强制立即执行任意查询并缓存其结果，可以调用<a href="https://msdn.microsoft.com/zh-cn/library/bb342261.aspx">ToList&lt;TSource&gt;</a>或<a href="https://msdn.microsoft.com/zh-cn/library/bb298736.aspx">ToArray&lt;TSource&gt;</a>方法。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('820b74e3-7b22-48d5-9ecd-e62cf8cf7a06')"><img id="code_img_closed_820b74e3-7b22-48d5-9ecd-e62cf8cf7a06" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_820b74e3-7b22-48d5-9ecd-e62cf8cf7a06" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('820b74e3-7b22-48d5-9ecd-e62cf8cf7a06',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_820b74e3-7b22-48d5-9ecd-e62cf8cf7a06" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ查询强制立即执行二
            <span style="color: #0000ff;">var</span> nums = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">int</span>[<span style="color: #800080;">7</span>] { <span style="color: #800080;">0</span>, <span style="color: #800080;">1</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">3</span>, <span style="color: #800080;">4</span>, <span style="color: #800080;">5</span>, <span style="color: #800080;">6</span><span style="color: #000000;"> };

            </span><span style="color: #0000ff;">var</span> query2 =<span style="color: #000000;">
               (</span><span style="color: #0000ff;">from</span> num <span style="color: #0000ff;">in</span><span style="color: #000000;"> nums
                </span><span style="color: #0000ff;">where</span> (num % <span style="color: #800080;">2</span>) == <span style="color: #800080;">0</span>
                <span style="color: #0000ff;">select</span><span style="color: #000000;"> num).ToList();

            </span><span style="color: #0000ff;">var</span> query3 =<span style="color: #000000;">
                (</span><span style="color: #0000ff;">from</span> num <span style="color: #0000ff;">in</span><span style="color: #000000;"> nums
                 </span><span style="color: #0000ff;">where</span> (num % <span style="color: #800080;">2</span>) == <span style="color: #800080;">0</span>
                 <span style="color: #0000ff;">select</span><span style="color: #000000;"> num).ToArray();

            Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">NumCount={query2.Count}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">NumCount={query3.Length}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界18.png" alt="" /></p>
<p>&nbsp; &nbsp; <strong>二、基本 LINQ 查询操作</strong></p>
<p>&nbsp; &nbsp;&nbsp;<strong>2.1 获取数据源：from</strong></p>
<p>&nbsp; &nbsp; 在LINQ查询中，第一步是指定数据源。像在大多数编程语言中一样，必须先声明变量，才能使用它。在LINQ查询中，最先使用from子句的目的是引入数据</p>
<p>源和范围变量。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('5a6db4e0-e8be-48aa-a2ec-7d4503687e85')"><img id="code_img_closed_5a6db4e0-e8be-48aa-a2ec-7d4503687e85" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_5a6db4e0-e8be-48aa-a2ec-7d4503687e85" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('5a6db4e0-e8be-48aa-a2ec-7d4503687e85',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_5a6db4e0-e8be-48aa-a2ec-7d4503687e85" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ to SQL
            <span style="color: #0000ff;">var</span> db = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SampleDataContext();

            </span><span style="color: #008000;">//</span><span style="color: #008000;">query是IEnumerable&lt;Cutsomer&gt;类型
            </span><span style="color: #008000;">//</span><span style="color: #008000;">数据源(db.customers)和范围变量(cust)</span>
            <span style="color: #0000ff;">var</span> query =
                <span style="color: #0000ff;">from</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Customers
                </span><span style="color: #0000ff;">where</span> cust.City == <span style="color: #800000;">"</span><span style="color: #800000;">London</span><span style="color: #800000;">"</span>
                <span style="color: #0000ff;">select</span><span style="color: #000000;"> cust;

            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span><span style="color: #000000;"> query)
            {
                Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">CustomerID={item.CustomerID}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            }
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 范围变量类似于<strong>foreach</strong>循环中的迭代变量，但在查询表达式中，实际上不发生迭代。执行查询时，范围变量将用作对customers中的每个后续元素的引用。</p>
<p>因为编译器可以推断cust的类型，所以您不必显式指定此类型。</p>
<p>&nbsp; &nbsp; <strong>2.2 筛选：where</strong></p>
<p>&nbsp; &nbsp; 也许最常用的查询操作是应用布尔表达式形式的筛选器，此筛选器使查询只返回那些表达式结果为true的元素。使用where子句生成结果，实际上，筛选器</p>
<p>指定从源序列中排除哪些元素。</p>
<p>&nbsp; &nbsp;&nbsp;您可以使用熟悉的C#逻辑<strong>AND(&amp;&amp;)</strong>和<strong>OR(||)</strong>运算符来根据需要在<strong>where</strong>子句中应用任意数量的筛选表达式。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('7ccba600-b234-452b-9b12-068e3c204684')"><img id="code_img_closed_7ccba600-b234-452b-9b12-068e3c204684" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_7ccba600-b234-452b-9b12-068e3c204684" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('7ccba600-b234-452b-9b12-068e3c204684',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_7ccba600-b234-452b-9b12-068e3c204684" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ 筛选：where
            <span style="color: #0000ff;">var</span> db = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SampleDataContext();

            </span><span style="color: #0000ff;">var</span> query1 =
                <span style="color: #0000ff;">from</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Customers
                </span><span style="color: #0000ff;">where</span> cust.City == <span style="color: #800000;">"</span><span style="color: #800000;">London</span><span style="color: #800000;">"</span> &amp;&amp; cust.CustomerID == <span style="color: #800000;">"</span><span style="color: #800000;">AROUT</span><span style="color: #800000;">"</span>
                <span style="color: #0000ff;">select</span><span style="color: #000000;"> cust;
            </span><span style="color: #0000ff;">var</span> query2 =
                <span style="color: #0000ff;">from</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Customers
                </span><span style="color: #0000ff;">where</span> cust.City == <span style="color: #800000;">"</span><span style="color: #800000;">London</span><span style="color: #800000;">"</span> || cust.City == <span style="color: #800000;">"</span><span style="color: #800000;">Paris</span><span style="color: #800000;">"</span>
                <span style="color: #0000ff;">select</span><span style="color: #000000;"> cust;

            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span><span style="color: #000000;"> query1)
            {
                Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">query1-&gt;City={item.City},CustomerID={item.CustomerID}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            }
            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span><span style="color: #000000;"> query2)
            {
                Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">query2-&gt;City={item.City},CustomerID={item.CustomerID}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            }
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界23.png" alt="" /></p>
<p>&nbsp; &nbsp;&nbsp;<strong>2.3 排序：orderby</strong></p>
<p><strong>&nbsp; &nbsp;&nbsp;</strong>通常可以很方便地将返回的数据进行排序。orderby子句将使返回的序列中的元素按照被排序的类型的默认比较器进行排序。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('3716eea2-0d96-442f-85c2-acd94ba77892')"><img id="code_img_closed_3716eea2-0d96-442f-85c2-acd94ba77892" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_3716eea2-0d96-442f-85c2-acd94ba77892" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('3716eea2-0d96-442f-85c2-acd94ba77892',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_3716eea2-0d96-442f-85c2-acd94ba77892" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ 排序：orderby
            <span style="color: #0000ff;">var</span> db = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SampleDataContext();
            </span><span style="color: #0000ff;">var</span> query =
                <span style="color: #0000ff;">from</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Customers
                </span><span style="color: #0000ff;">where</span> cust.City == <span style="color: #800000;">"</span><span style="color: #800000;">London</span><span style="color: #800000;">"</span>
                <span style="color: #0000ff;">orderby</span><span style="color: #000000;"> cust.CustomerID
                </span><span style="color: #0000ff;">select</span><span style="color: #000000;"> cust;
            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span><span style="color: #000000;"> query)
            {
                Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">CustomerID={item.CustomerID}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            }
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界26.png" alt="" /></p>
<p>&nbsp; &nbsp; <strong>2.4 分组：group</strong></p>
<p><strong>&nbsp; &nbsp;&nbsp;</strong>使用group子句，您可以按指定的键分组结果。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('ac027e01-4d4f-4950-b317-69ef040a01dd')"><img id="code_img_closed_ac027e01-4d4f-4950-b317-69ef040a01dd" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_ac027e01-4d4f-4950-b317-69ef040a01dd" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ac027e01-4d4f-4950-b317-69ef040a01dd',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_ac027e01-4d4f-4950-b317-69ef040a01dd" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ 分组一：group
            <span style="color: #0000ff;">var</span> db = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SampleDataContext();
            </span><span style="color: #0000ff;">var</span> query =
                <span style="color: #0000ff;">from</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Customers
                </span><span style="color: #0000ff;">where</span> cust.City == <span style="color: #800000;">"</span><span style="color: #800000;">London</span><span style="color: #800000;">"</span> || cust.City == <span style="color: #800000;">"</span><span style="color: #800000;">Paris</span><span style="color: #800000;">"</span><span style="color: #000000;">
                group cust by cust.City;
            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> group <span style="color: #0000ff;">in</span><span style="color: #000000;"> query)
            {
                Console.WriteLine(group.Key);
                </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> group)
                {
                    Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">City={cust.City},CustomerID={cust.CustomerID}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                }
            }
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界29.png" alt="" /></p>
<p>&nbsp; &nbsp; 在本例中，cust.City是键。</p>
<p>&nbsp; &nbsp; 在使用<strong>group</strong>子句结束查询时，结果采用列表的列表形式。列表中的每个元素是一个具有<strong>Key</strong>成员及根据该键分组的元素列表的对象。在循环访问生成组</p>
<p>序列的查询时，您必须使用嵌套的<strong>foreach</strong>循环。外部循环用于循环访问每个组，内部循环用于循环访问每个组的成员。&nbsp;&nbsp;</p>
<p>&nbsp; &nbsp; 如果您必须引用组操作的结果，可以使用<strong>into</strong>关键字来创建可进一步查询的标识符。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('68e48395-052d-47fd-922a-89b13a9fe14e')"><img id="code_img_closed_68e48395-052d-47fd-922a-89b13a9fe14e" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_68e48395-052d-47fd-922a-89b13a9fe14e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('68e48395-052d-47fd-922a-89b13a9fe14e',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_68e48395-052d-47fd-922a-89b13a9fe14e" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ 分组二：group
            <span style="color: #0000ff;">var</span> db = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SampleDataContext();
            </span><span style="color: #0000ff;">var</span> query =
                <span style="color: #0000ff;">from</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Customers
                </span><span style="color: #0000ff;">where</span> cust.City == <span style="color: #800000;">"</span><span style="color: #800000;">London</span><span style="color: #800000;">"</span> || cust.City == <span style="color: #800000;">"</span><span style="color: #800000;">Paris</span><span style="color: #800000;">"</span><span style="color: #000000;">
                group cust by cust.City into custGroup
                </span><span style="color: #0000ff;">where</span> custGroup.Count() &gt; <span style="color: #800080;">2</span>
                <span style="color: #0000ff;">orderby</span><span style="color: #000000;"> custGroup.Key
                </span><span style="color: #0000ff;">select</span><span style="color: #000000;"> custGroup;
            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> group <span style="color: #0000ff;">in</span><span style="color: #000000;"> query)
            {
                Console.WriteLine(group.Key);
                </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> group)
                {
                    Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">City={cust.City},CustomerID={cust.CustomerID}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
                }
            }
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界32.png" alt="" /></p>
<p>&nbsp; &nbsp;&nbsp;<strong>2.5 联接：join</strong></p>
<p><strong>&nbsp; &nbsp; </strong>联接运算创建数据源中没有显式建模的序列之间的关联。例如，您可以执行联接来查找位于同一地点的所有客户和经销商。在LINQ中，join子句始终针对</p>
<p>对象集合而非直接针对数据库表运行。</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('8342177a-5711-4574-aca4-6821b95e16ae')"><img id="code_img_closed_8342177a-5711-4574-aca4-6821b95e16ae" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_8342177a-5711-4574-aca4-6821b95e16ae" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('8342177a-5711-4574-aca4-6821b95e16ae',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_8342177a-5711-4574-aca4-6821b95e16ae" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ 联接：join
            <span style="color: #0000ff;">var</span> db = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SampleDataContext();
            </span><span style="color: #0000ff;">var</span> qurey =
                <span style="color: #0000ff;">from</span> order <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Orders
                join cust </span><span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Customers on order.CustomerID equals cust.CustomerID
                </span><span style="color: #0000ff;">select</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> { order.OrderID, order.CustomerID, cust.ContactName };
            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span> qurey.Take(<span style="color: #800080;">5</span><span style="color: #000000;">))
            {
                Console.WriteLine($</span><span style="color: #800000;">"</span><span style="color: #800000;">OrderID={item.OrderID},CustomerID={item.CustomerID},ContactName={item.ContactName}</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            }
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界35.png" alt="" /></p>
<p>&nbsp; &nbsp; <strong>2.6 选择（投影）：select</strong></p>
<p><strong>&nbsp; &nbsp;&nbsp;</strong>select子句生成查询结果并指定每个返回的元素的&ldquo;形状&rdquo;或类型。</p>
<p>&nbsp; &nbsp;&nbsp;例如，您可以指定结果包含的是整个Customer对象、仅一个成员、成员的子集或者某个基于计算或新对象创建的完全不同的结果类型。当select子句生成除源</p>
<p>元素副本以外的内容时，该操作称为&ldquo;投影&rdquo;。</p>
<p>&nbsp; &nbsp; <strong>三、使用 LINQ 进行数据转换</strong></p>
<p>&nbsp; &nbsp; 语言集成查询 (LINQ) 不但是检索数据的利器，而且还是一个功能强大的数据转换工具。通过使用LINQ查询，您可以将源序列用作输入，并采用多种方式修改</p>
<p>它以创建新的输出序列。您可以通过排序及分组来修改该序列，而不必修改元素本身。但是，LINQ 查询的最强大的功能是能够创建新类型。这一功能在select子</p>
<p>句中实现。</p>
<p>&nbsp; &nbsp;&nbsp;<strong>3.1 将多个输入联接到一个输出序列</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('390f4061-9058-4e16-a98f-b0ec73175663')"><img id="code_img_closed_390f4061-9058-4e16-a98f-b0ec73175663" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_390f4061-9058-4e16-a98f-b0ec73175663" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('390f4061-9058-4e16-a98f-b0ec73175663',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_390f4061-9058-4e16-a98f-b0ec73175663" class="cnblogs_code_hide">
<pre><code>    <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
    <span style="color: #808080;">///</span><span style="color: #008000;"> 学生类
    </span><span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Student
    {
        </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> Name { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }

        </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span> Age { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }

        </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> City { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }

        </span><span style="color: #0000ff;">public</span> List&lt;<span style="color: #0000ff;">int</span>&gt; Scores { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }
    }

    </span><span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
    <span style="color: #808080;">///</span><span style="color: #008000;"> 教师类
    </span><span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Teacher
    {
        </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> Name { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }

        </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span> Age { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }

        </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> City { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }
    }      
    
    </span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ 将多个输入联接到一个输出序列
            <span style="color: #008000;">//</span><span style="color: #008000;">创建第一个数据源</span>
            <span style="color: #0000ff;">var</span> students = <span style="color: #0000ff;">new</span> List&lt;Student&gt;<span style="color: #000000;">()
            {
                </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Student()
                {
                    Age </span>= <span style="color: #800080;">19</span><span style="color: #000000;">,
                    City </span>= <span style="color: #800000;">"</span><span style="color: #800000;">广州</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    Name </span>= <span style="color: #800000;">"</span><span style="color: #800000;">小A</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    Scores </span>= <span style="color: #0000ff;">new</span> List&lt;<span style="color: #0000ff;">int</span>&gt;(){<span style="color: #800080;">85</span>,<span style="color: #800080;">88</span>,<span style="color: #800080;">83</span>,<span style="color: #800080;">97</span><span style="color: #000000;">}
                },
                </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Student()
                {
                    Age </span>= <span style="color: #800080;">19</span><span style="color: #000000;">,
                    City </span>= <span style="color: #800000;">"</span><span style="color: #800000;">深圳</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    Name </span>= <span style="color: #800000;">"</span><span style="color: #800000;">小B</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    Scores </span>= <span style="color: #0000ff;">new</span> List&lt;<span style="color: #0000ff;">int</span>&gt;(){<span style="color: #800080;">86</span>,<span style="color: #800080;">80</span>,<span style="color: #800080;">85</span>,<span style="color: #800080;">92</span><span style="color: #000000;">}
                }
            };

            </span><span style="color: #008000;">//</span><span style="color: #008000;">创建第二个数据源</span>
            <span style="color: #0000ff;">var</span> teachers = <span style="color: #0000ff;">new</span> List&lt;Teacher&gt;<span style="color: #000000;">()
            {
                </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Teacher()
                {
                    Age </span>= <span style="color: #800080;">30</span><span style="color: #000000;">,
                    City </span>= <span style="color: #800000;">"</span><span style="color: #800000;">广州</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    Name </span>= <span style="color: #800000;">"</span><span style="color: #800000;">张A</span><span style="color: #800000;">"</span><span style="color: #000000;">
                },
                </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Teacher()
                {
                    Age </span>= <span style="color: #800080;">31</span><span style="color: #000000;">,
                    City </span>= <span style="color: #800000;">"</span><span style="color: #800000;">广州</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    Name </span>= <span style="color: #800000;">"</span><span style="color: #800000;">李A</span><span style="color: #800000;">"</span><span style="color: #000000;">
                }
            };

            </span><span style="color: #008000;">//</span><span style="color: #008000;">创建查询</span>
            <span style="color: #0000ff;">var</span> query =<span style="color: #000000;"> 
                (
                    </span><span style="color: #0000ff;">from</span> student <span style="color: #0000ff;">in</span><span style="color: #000000;"> students
                    </span><span style="color: #0000ff;">where</span> student.City == <span style="color: #800000;">"</span><span style="color: #800000;">广州</span><span style="color: #800000;">"</span>
                    <span style="color: #0000ff;">select</span><span style="color: #000000;"> student.Name
                ).Concat
                (
                    </span><span style="color: #0000ff;">from</span> teacher <span style="color: #0000ff;">in</span><span style="color: #000000;"> teachers
                    </span><span style="color: #0000ff;">where</span> teacher.City == <span style="color: #800000;">"</span><span style="color: #800000;">广州</span><span style="color: #800000;">"</span>
                    <span style="color: #0000ff;">select</span><span style="color: #000000;"> teacher.Name
                );

            </span><span style="color: #008000;">//</span><span style="color: #008000;">执行查询</span>
            <span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> person <span style="color: #0000ff;">in</span><span style="color: #000000;"> query)
            {
                Console.WriteLine(person);
            }

            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界38.png" alt="" /></p>
<p>&nbsp; &nbsp;&nbsp;<strong>3.2 选择各个源元素的子集</strong></p>
<p>&nbsp; &nbsp;&nbsp;1. 若要只选择源元素的一个成员，请使用点运算。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> query = 
    <span style="color: #0000ff;">from</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Customers
    </span><span style="color: #0000ff;">select</span> cust.City;</pre>
</div>
<p>&nbsp; &nbsp; 2.&nbsp;若要创建包含源元素的多个属性的元素，可以使用具有命名对象或匿名类型的对象初始值设定项。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">var</span> query = 
    <span style="color: #0000ff;">from</span> cust <span style="color: #0000ff;">in</span><span style="color: #000000;"> db.Customer
    </span><span style="color: #0000ff;">select</span> <span style="color: #0000ff;">new</span> { cust.Name, cust.City };</pre>
</div>
<p>&nbsp; &nbsp; <strong>3.3 将内存中的对象转换为XML</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('d1f619ef-a185-4327-abfc-407d367ed405')"><img id="code_img_closed_d1f619ef-a185-4327-abfc-407d367ed405" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_d1f619ef-a185-4327-abfc-407d367ed405" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d1f619ef-a185-4327-abfc-407d367ed405',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_d1f619ef-a185-4327-abfc-407d367ed405" class="cnblogs_code_hide">
<pre><code>    <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
    <span style="color: #808080;">///</span><span style="color: #008000;"> 学生类
    </span><span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Student
    {
        </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> Name { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }

        </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span> Age { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }

        </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">string</span> City { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }

        </span><span style="color: #0000ff;">public</span> List&lt;<span style="color: #0000ff;">int</span>&gt; Scores { <span style="color: #0000ff;">get</span>; <span style="color: #0000ff;">set</span><span style="color: #000000;">; }
    }     
    
    </span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ 将内存中的对象转换为XML
            <span style="color: #008000;">//</span><span style="color: #008000;">创建数据源</span>
            <span style="color: #0000ff;">var</span> students = <span style="color: #0000ff;">new</span> List&lt;Student&gt;<span style="color: #000000;">()
            {
                </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Student()
                {
                    Age </span>= <span style="color: #800080;">19</span><span style="color: #000000;">,
                    City </span>= <span style="color: #800000;">"</span><span style="color: #800000;">广州</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    Name </span>= <span style="color: #800000;">"</span><span style="color: #800000;">小A</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    Scores </span>= <span style="color: #0000ff;">new</span> List&lt;<span style="color: #0000ff;">int</span>&gt;(){<span style="color: #800080;">85</span>,<span style="color: #800080;">88</span>,<span style="color: #800080;">83</span>,<span style="color: #800080;">97</span><span style="color: #000000;">}
                },
                </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Student()
                {
                    Age </span>= <span style="color: #800080;">19</span><span style="color: #000000;">,
                    City </span>= <span style="color: #800000;">"</span><span style="color: #800000;">深圳</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    Name </span>= <span style="color: #800000;">"</span><span style="color: #800000;">小B</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    Scores </span>= <span style="color: #0000ff;">new</span> List&lt;<span style="color: #0000ff;">int</span>&gt;(){<span style="color: #800080;">86</span>,<span style="color: #800080;">80</span>,<span style="color: #800080;">85</span>,<span style="color: #800080;">92</span><span style="color: #000000;">}
                }
            };
            </span><span style="color: #008000;">//</span><span style="color: #008000;">创建查询</span>
            <span style="color: #0000ff;">var</span> studentsToXml = <span style="color: #0000ff;">new</span><span style="color: #000000;"> XElement
                (
                    </span><span style="color: #800000;">"</span><span style="color: #800000;">Root</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                    </span><span style="color: #0000ff;">from</span> student <span style="color: #0000ff;">in</span><span style="color: #000000;"> students
                    let x </span>= $<span style="color: #800000;">"</span><span style="color: #800000;">{student.Scores[0]},{student.Scores[1]},{student.Scores[2]},{student.Scores[3]}</span><span style="color: #800000;">"</span>
                    <span style="color: #0000ff;">select</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> XElement
                        (
                            </span><span style="color: #800000;">"</span><span style="color: #800000;">student</span><span style="color: #800000;">"</span><span style="color: #000000;">,
                            </span><span style="color: #0000ff;">new</span> XElement(<span style="color: #800000;">"</span><span style="color: #800000;">Name</span><span style="color: #800000;">"</span><span style="color: #000000;">, student.Name),
                            </span><span style="color: #0000ff;">new</span> XElement(<span style="color: #800000;">"</span><span style="color: #800000;">Age</span><span style="color: #800000;">"</span><span style="color: #000000;">, student.Age),
                            </span><span style="color: #0000ff;">new</span> XElement(<span style="color: #800000;">"</span><span style="color: #800000;">Scores</span><span style="color: #800000;">"</span><span style="color: #000000;">, x)
                        )
                );

            </span><span style="color: #008000;">//</span><span style="color: #008000;">执行查询</span>
<span style="color: #000000;">            Console.WriteLine(studentsToXml);
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界41.png" alt="" /></p>
<p>&nbsp; &nbsp;&nbsp;<strong>3.4 对源元素执行操作</strong></p>
<p>&nbsp; &nbsp; 输出序列可能不包含源序列的任何元素或元素属性，它<span id="mt39" class="sentence" data-guid="6efac761ffcc814d36078b4382975277" data-source="The output might instead be a sequence of values that is computed by using the source elements as input arguments.">可能是通过将源元素用作输入参数计算出的值的序列。</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('ff384e96-86a5-4240-90f9-488f6fb3ac7a')"><img id="code_img_closed_ff384e96-86a5-4240-90f9-488f6fb3ac7a" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_ff384e96-86a5-4240-90f9-488f6fb3ac7a" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ff384e96-86a5-4240-90f9-488f6fb3ac7a',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_ff384e96-86a5-4240-90f9-488f6fb3ac7a" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ 对源元素执行操作
            <span style="color: #008000;">//</span><span style="color: #008000;">数据源</span>
            <span style="color: #0000ff;">double</span>[] radius = { <span style="color: #800080;">1</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">3</span><span style="color: #000000;"> };
            </span><span style="color: #008000;">//</span><span style="color: #008000;">创建查询</span>
            <span style="color: #0000ff;">var</span> query =
                <span style="color: #0000ff;">from</span> radiu <span style="color: #0000ff;">in</span><span style="color: #000000;"> radius
                </span><span style="color: #0000ff;">select</span> $<span style="color: #800000;">"</span><span style="color: #800000;">{3.14 * radiu * radiu}</span><span style="color: #800000;">"</span><span style="color: #000000;">;
            </span><span style="color: #008000;">//</span><span style="color: #008000;">执行查询</span>
            <span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> item <span style="color: #0000ff;">in</span><span style="color: #000000;"> query)
            {
                Console.WriteLine(item);
            }
            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p><span class="sentence" data-guid="6efac761ffcc814d36078b4382975277" data-source="The output might instead be a sequence of values that is computed by using the source elements as input arguments.">&nbsp; &nbsp; 运行结果如下：</span></p>
<p><span class="sentence" data-guid="6efac761ffcc814d36078b4382975277" data-source="The output might instead be a sequence of values that is computed by using the source elements as input arguments."><img src="./images/C# LINQ学习笔记一：走进LINQ的世界44.png" alt="" /></span></p>
<p>&nbsp; &nbsp; <strong>四、LINQ 查询操作的类型关系</strong></p>
<p>&nbsp; &nbsp; LINQ 查询操作在数据源、查询本身及查询执行中是强类型的。查询中变量的类型必须与数据源中元素的类型和foreach语句中迭代变量的类型兼容。强类型可</p>
<p>以保证在编译时捕获类型错误，以便及时改正。</p>
<p>&nbsp; &nbsp; <strong>4.1 不转换源数据的查询</strong></p>
<p>&nbsp; &nbsp; 下图演示不对数据执行转换的LINQ to OBJECT查询操作。源包含一个字符串序列，查询输出也是一个字符串序列。</p>
<p>&nbsp;<img src="./images/C# LINQ学习笔记一：走进LINQ的世界45.png" alt="" /></p>
<p>&nbsp; &nbsp; ①数据源的类型参数决定范围变量的类型。</p>
<p>&nbsp; &nbsp; ②<strong>select</strong>语句返回Name属性，而非完整的Customer对象。因为Name是一个字符串，所以custNameQuery的类型参数是<strong>string</strong>，而非Customer。</p>
<p>&nbsp; &nbsp; ③因为custNameQuery是一个字符串序列，所以<strong>foreach</strong>循环的迭代变量也必须是<strong>string</strong>。</p>
<p>&nbsp; &nbsp;&nbsp;<strong>4.2 转换源数据的查询</strong></p>
<p>&nbsp; &nbsp;&nbsp;下图演示对数据执行简单转换的<span lang="EN-US">LINQ to SQL查询操作。<span lang="EN-US">查询将一个<span lang="EN-US"><span lang="EN-US">Customer<span lang="EN-US">对象序列用作输入，并只选择结果中的<span lang="EN-US"><span lang="EN-US">Name<span lang="EN-US">属性。<span lang="EN-US">因为<span lang="EN-US">Name<span lang="EN-US">是一个字符串，</span></span></span></span></span></span></span></span></span></span></span></p>
<p><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US">所以查询生成一个字符串序列作为输出。</span></span></span></span></span></span></span></span></span></span></span></p>
<p><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><img src="./images/C# LINQ学习笔记一：走进LINQ的世界46.png" alt="" /></span></span></span></span></span></span></span></span></span></span></span></p>
<p>&nbsp; &nbsp; ①数据源的类型参数决定范围变量的类型。</p>
<p>&nbsp; &nbsp; ②<strong>select</strong>语句返回Name属性，而非完整的Customer对象。因为Name是一个字符串，所以custNameQuery的类型参数是<strong>string</strong>，而非Customer。 &nbsp;</p>
<p>&nbsp; &nbsp; ③因为custNameQuery是一个字符串序列，所以<strong>foreach</strong>循环的迭代变量也必须是<strong>string</strong>。</p>
<p>&nbsp; &nbsp; 下图演示另一种转换。<strong>select</strong>&nbsp;语句返回只捕获原始Customer对象的两个成员的匿名类型。</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界47.png" alt="" /></p>
<p>&nbsp; &nbsp; ①数据源的类型参数始终为查询中的范围变量的类型。</p>
<p>&nbsp; &nbsp; ②因为select语句生成匿名类型，所以必须使用<strong>var</strong>隐式类型化查询变量。</p>
<p>&nbsp; &nbsp; ③因为查询变量的类型是隐式的，所以<strong>foreach</strong>循环中的迭代变量也必须是隐式的。</p>
<p>&nbsp; &nbsp; <strong>4.3&nbsp;让编译器推断类型信息</strong></p>
<p>&nbsp; &nbsp; 您也可以使用<span lang="EN-US">关键字<span lang="EN-US"><span lang="EN-US"><a href="https://msdn.microsoft.com/zh-cn/library/bb383973.aspx">var</a>，<span lang="EN-US">可用于查询操作中的任何局部变量。<span lang="EN-US"><span lang="EN-US">但是，编译器为查询操作中的各个变量提供强类型。</span></span></span></span></span></span></p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界48.png" alt="" /></p>
<p>&nbsp; &nbsp; <strong>五、LINQ 中的查询语法和方法语法</strong></p>
<p>&nbsp; &nbsp; 我们编写的LINQ查询语法，在编译代码时，CLR会将查询语法转换为方法语法。这些方法调用标准查询运算符的名称类似Where、Select、GroupBy、Join、</p>
<p>Max和Average，我们也是可以直接使用这些方法语法的。</p>
<p>&nbsp; &nbsp; 查询语法和方法语法语义相同，但是，许多人员发现查询语法更简单、更易于阅读。某些查询必须表示为方法调用。例如，必须使用方法调用表示检索元素</p>
<p>的数量与指定的条件的查询，还必须使用方法需要检索元素的最大值在源序列的查询。System.Linq命名空间中的标准查询运算符的参考文档通常使用方法语法。</p>
<p>&nbsp; &nbsp;&nbsp;<strong>5.1 标准查询运算符扩展方法</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('e7bec7c8-9968-4d41-ac87-3cab06bc41c9')"><img id="code_img_closed_e7bec7c8-9968-4d41-ac87-3cab06bc41c9" class="code_img_closed" src="./images/C# LINQ学习笔记一：走进LINQ的世界1.png" alt="" /><img id="code_img_opened_e7bec7c8-9968-4d41-ac87-3cab06bc41c9" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e7bec7c8-9968-4d41-ac87-3cab06bc41c9',event)" src="./images/C# LINQ学习笔记一：走进LINQ的世界2.png" alt="" />
<div id="cnblogs_code_open_e7bec7c8-9968-4d41-ac87-3cab06bc41c9" class="cnblogs_code_hide">
<pre><code>    <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
    {
        </span><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
        {
            </span><span style="color: #0000ff;">#region</span> LINQ 标准查询运算符扩展方法
            <span style="color: #0000ff;">var</span> nums = <span style="color: #0000ff;">new</span> <span style="color: #0000ff;">int</span>[<span style="color: #800080;">4</span>] { <span style="color: #800080;">1</span>, <span style="color: #800080;">2</span>, <span style="color: #800080;">3</span>, <span style="color: #800080;">4</span><span style="color: #000000;"> };

            </span><span style="color: #008000;">//</span><span style="color: #008000;">创建查询表达式</span>
            <span style="color: #0000ff;">var</span> query1 = 
                <span style="color: #0000ff;">from</span> num <span style="color: #0000ff;">in</span><span style="color: #000000;"> nums
                </span><span style="color: #0000ff;">where</span> num % <span style="color: #800080;">2</span> == <span style="color: #800080;">0</span>
                <span style="color: #0000ff;">orderby</span><span style="color: #000000;"> num descending
                </span><span style="color: #0000ff;">select</span><span style="color: #000000;"> num;

            Console.WriteLine(</span><span style="color: #800000;">"</span><span style="color: #800000;">Query1's result:</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> num <span style="color: #0000ff;">in</span><span style="color: #000000;"> query1)
            {
                Console.WriteLine(num);
            }

            </span><span style="color: #008000;">//</span><span style="color: #008000;">使用方法进行查询</span>
            <span style="color: #0000ff;">var</span> query2 = nums.Where(num =&gt; num % <span style="color: #800080;">2</span> == <span style="color: #800080;">0</span>).OrderByDescending(num =&gt;<span style="color: #000000;"> num);

            Console.WriteLine(</span><span style="color: #800000;">"</span><span style="color: #800000;">Query2's result:</span><span style="color: #800000;">"</span><span style="color: #000000;">);
            </span><span style="color: #0000ff;">foreach</span> (<span style="color: #0000ff;">var</span> num <span style="color: #0000ff;">in</span><span style="color: #000000;"> query2)
            {
                Console.WriteLine(num);
            }

            Console.Read();
            </span><span style="color: #0000ff;">#endregion</span><span style="color: #000000;">
        }
    }</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p>&nbsp; &nbsp; 运行结果如下：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界51.png" alt="" /></p>
<p>&nbsp; &nbsp; 两个示例的输出是相同的。您可以看到两种形式的查询变量的类型是相同的：<a href="https://msdn.microsoft.com/zh-cn/library/9eekhta0.aspx">IEnumerable&lt;T&gt;</a>。</p>
<p>&nbsp; &nbsp; 若要了解基于方法的查询，让我们进一步地分析它。注意，在表达式的右侧，where子句现在表示为对numbers对象的实例方法，在您重新调用该对象时其类型</p>
<p>为IEnumerable&lt;int&gt;。如果您熟悉泛型&nbsp;<a href="https://msdn.microsoft.com/zh-cn/library/9eekhta0.aspx">IEnumerable&lt;T&gt;</a>&nbsp;接口，那么您就会了解，它不具有<strong>Where</strong>方法。但是，如果您在Visual Studio IDE中调用IntelliSense完成</p>
<p>列表，那么您不仅将看到<strong>Where</strong>方法，而且还会看到许多其他方法，如<strong>Select</strong>、<strong>SelectMany</strong>、<strong>Join</strong>&nbsp;和<strong>Orderby</strong>。</p>
<p>&nbsp; &nbsp; 下面是所有标准查询运算符：</p>
<p><img src="./images/C# LINQ学习笔记一：走进LINQ的世界52.png" alt="" /></p>
<p>&nbsp; &nbsp; 尽管看起来<a href="https://msdn.microsoft.com/zh-cn/library/9eekhta0.aspx">IEnumerable&lt;T&gt;</a>似乎已被重新定义以包括这些附加方法，但事实上并非如此，<span id="mt22" class="sentence" data-guid="c0c4ab0d0999618e7e80fbaed9345287" data-source="The standard query operators are implemented as a new kind of method called &lt;em&gt;extension methods&lt;/em&gt;.">这些标准查询运算符都是作为&ldquo;扩展方法&rdquo;实现的。</span></p>
<p>&nbsp; &nbsp; <strong>5.2 Lambda 表达式</strong></p>
<p>&nbsp; &nbsp; 在前面的示例中，通知该条件表达式 (num % 2 == 0) 是作为内联参数。Where方法：Where (num =&gt; num % 2 == 0) 此内联表达式称为lambda表达式。将代码</p>
<p>编写为匿名方法或泛型委托或表达式树是一种便捷的方法，否则编写起来就要麻烦得多。=&gt;是lambda运算符，可读为&ldquo;goes to&rdquo;。运算符左侧的num是输入变量，</p>
<p>与查询表达式中的num相对应。编译器可推断num的类型，因为它了解numbers是泛型IEnumerable&lt;T&gt;类型。Lambda表达式与查询语法中的表达式或任何其他C#</p>
<p>表达式或语句中的表达式相同，它可以包括方法调用和其他复杂逻辑，&ldquo;返回值&rdquo;就是表达式结果。</p>
<p>&nbsp; &nbsp; <strong>5.3 查询的组合性</strong></p>
<p>&nbsp; &nbsp; 在上面的代码示例中，请注意OrderBy方法是通过在对Where的调用中使用点运算符来调用的。Where生成筛选序列，然后Orderby通过对该序列排序来对它进行</p>
<p>操作。因为查询会返回IEnumerable，所以您可通过将方法调用链接在一起，在方法语法中将这些查询组合起来。这就是在您通过使用查询语法编写查询时编译器在</p>
<p>后台所执行的操作，并且由于查询变量不存储查询的结果，因此您可以随时修改它或将它用作新查询的基础，即使在执行它后。</p>
</div>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>