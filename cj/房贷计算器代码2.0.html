<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修房贷计算器代码2.0' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>房贷计算器代码2.0</center></div><div class='banquan'>原文出处:本文由博客园博主钰娜提供。<br/>
原文连接:https://www.cnblogs.com/xiaochen0409/p/11741798.html</div><br>
    <div class="cnblogs_code">
<pre><code><span style="color: #008080;">  1</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System;
</span><span style="color: #008080;">  2</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Collections.Generic;
</span><span style="color: #008080;">  3</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Linq;
</span><span style="color: #008080;">  4</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Text;
</span><span style="color: #008080;">  5</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Threading.Tasks;
</span><span style="color: #008080;">  6</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Drawing;
</span><span style="color: #008080;">  7</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Reflection;
</span><span style="color: #008080;">  8</span> <span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Net.NetworkInformation;
</span><span style="color: #008080;">  9</span> 
<span style="color: #008080;"> 10</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> play
</span><span style="color: #008080;"> 11</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 12</span>     <span style="color: #0000ff;">class</span><span style="color: #000000;"> Program
</span><span style="color: #008080;"> 13</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 14</span>         <span style="color: #008000;">//</span><span style="color: #008000;">短期利率与长期利率</span>
<span style="color: #008080;"> 15</span>         <span style="color: #0000ff;">double</span> lowRate = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 16</span>         <span style="color: #0000ff;">double</span> highRate = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 17</span> 
<span style="color: #008080;"> 18</span>         <span style="color: #008000;">//</span><span style="color: #008000;">KeyValuePair&lt;DateTime, &gt;;</span>
<span style="color: #008080;"> 19</span>         DateTime dt1 = <span style="color: #0000ff;">new</span> DateTime(<span style="color: #800080;">2015</span>, <span style="color: #800080;">3</span>, <span style="color: #800080;">1</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 20</span>         DateTime dt2 = <span style="color: #0000ff;">new</span> DateTime(<span style="color: #800080;">2015</span>, <span style="color: #800080;">5</span>, <span style="color: #800080;">11</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 21</span>         DateTime dt3 = <span style="color: #0000ff;">new</span> DateTime(<span style="color: #800080;">2015</span>, <span style="color: #800080;">6</span>, <span style="color: #800080;">28</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 22</span>         DateTime dt4 = <span style="color: #0000ff;">new</span> DateTime(<span style="color: #800080;">2015</span>, <span style="color: #800080;">8</span>, <span style="color: #800080;">26</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 23</span>         <span style="color: #008000;">//</span><span style="color: #008000;">贷款金额</span>
<span style="color: #008080;"> 24</span>         <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">double</span><span style="color: #000000;"> totalMoney, balance;
</span><span style="color: #008080;"> 25</span> 
<span style="color: #008080;"> 26</span>         <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">string</span><span style="color: #000000;"> choice;
</span><span style="color: #008080;"> 27</span>         <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">string</span><span style="color: #000000;"> newChoice;
</span><span style="color: #008080;"> 28</span>         <span style="color: #008000;">//</span><span style="color: #008000;">期数</span>
<span style="color: #008080;"> 29</span>         <span style="color: #0000ff;">int</span><span style="color: #000000;"> n;
</span><span style="color: #008080;"> 30</span>         <span style="color: #008000;">//</span><span style="color: #008000;">月供</span>
<span style="color: #008080;"> 31</span>         <span style="color: #0000ff;">double</span><span style="color: #000000;"> payMonth;
</span><span style="color: #008080;"> 32</span>         <span style="color: #0000ff;">double</span><span style="color: #000000;"> rate;
</span><span style="color: #008080;"> 33</span>         <span style="color: #0000ff;">double</span><span style="color: #000000;"> interest;
</span><span style="color: #008080;"> 34</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 35</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 用来构建欢迎界面
</span><span style="color: #008080;"> 36</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;"> 37</span>         <span style="color: #0000ff;">void</span><span style="color: #000000;"> Paint()
</span><span style="color: #008080;"> 38</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 39</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">***************************</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 40</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">***************************</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 41</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">***************************</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 42</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">欢迎使用房贷计算器</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 43</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">***************************</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 44</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">***************************</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 45</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">***************************</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 46</span> 
<span style="color: #008080;"> 47</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">请按任意键继续</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 48</span> <span style="color: #000000;">            Console.ReadKey();
</span><span style="color: #008080;"> 49</span> <span style="color: #000000;">            Console.Clear();
</span><span style="color: #008080;"> 50</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 51</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 52</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 按日期选择利率
</span><span style="color: #008080;"> 53</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;"> 54</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;param name="dt"&gt;</span><span style="color: #008000;">输入的日期</span><span style="color: #808080;">&lt;/param&gt;</span>
<span style="color: #008080;"> 55</span>         <span style="color: #0000ff;">void</span><span style="color: #000000;"> RateChoose(DateTime dt)
</span><span style="color: #008080;"> 56</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 57</span>             <span style="color: #0000ff;">if</span> (dt &gt;=<span style="color: #000000;"> dt4)
</span><span style="color: #008080;"> 58</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 59</span>                 lowRate = <span style="color: #800080;">0.0275</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 60</span>                 highRate = <span style="color: #800080;">0.0325</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 61</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 62</span>             <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (dt &gt;=<span style="color: #000000;"> dt3)
</span><span style="color: #008080;"> 63</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 64</span>                 lowRate = <span style="color: #800080;">0.03</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 65</span>                 highRate = <span style="color: #800080;">0.035</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 66</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 67</span>             <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (dt &gt;=<span style="color: #000000;"> dt2)
</span><span style="color: #008080;"> 68</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 69</span>                 lowRate = <span style="color: #800080;">0.0325</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 70</span>                 highRate = <span style="color: #800080;">0.0375</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 71</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 72</span>             <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (dt &gt;=<span style="color: #000000;"> dt1)
</span><span style="color: #008080;"> 73</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 74</span>                 lowRate = <span style="color: #800080;">0.035</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 75</span>                 highRate = <span style="color: #800080;">0.04</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 76</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 77</span>             <span style="color: #0000ff;">else</span>
<span style="color: #008080;"> 78</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 79</span>                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">你输入的日期不在范围内</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 80</span> <span style="color: #000000;">                Console.ReadKey();
</span><span style="color: #008080;"> 81</span>                 Environment.Exit(<span style="color: #800080;">0</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 82</span> <span style="color: #000000;">            }
</span><span style="color: #008080;"> 83</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 84</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 85</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 计算月供
</span><span style="color: #008080;"> 86</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;"> 87</span>         <span style="color: #0000ff;">void</span><span style="color: #000000;"> Payment(DateTime dt)
</span><span style="color: #008080;"> 88</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 89</span>             <span style="color: #008000;">//</span><span style="color: #008000;">设置缓冲区高度，即设置显示的最大行数</span>
<span style="color: #008080;"> 90</span>             Console.BufferHeight = <span style="color: #800080;">1000</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 91</span> <span style="color: #000000;">            RateChoose(dt);
</span><span style="color: #008080;"> 92</span>             <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (choice)
</span><span style="color: #008080;"> 93</span> <span style="color: #000000;">            {
</span><span style="color: #008080;"> 94</span>                 <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">1</span><span style="color: #800000;">"</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 95</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;"> 96</span>                         <span style="color: #008000;">//</span><span style="color: #008000;">等额本息，月供计算方法</span>
<span style="color: #008080;"> 97</span>                         <span style="color: #0000ff;">for</span> (n = <span style="color: #800080;">1</span>; n &lt;= <span style="color: #800080;">360</span>; n++<span style="color: #000000;">)
</span><span style="color: #008080;"> 98</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;"> 99</span> 
<span style="color: #008080;">100</span> 
<span style="color: #008080;">101</span>                             <span style="color: #0000ff;">if</span> (n &lt;= <span style="color: #800080;">60</span><span style="color: #000000;">)
</span><span style="color: #008080;">102</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">103</span>                                 rate =<span style="color: #000000;"> lowRate;
</span><span style="color: #008080;">104</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">105</span>                             <span style="color: #0000ff;">else</span>
<span style="color: #008080;">106</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">107</span>                                 rate =<span style="color: #000000;"> highRate;
</span><span style="color: #008080;">108</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">109</span>                             <span style="color: #008000;">//</span><span style="color: #008000;">计算月供</span>
<span style="color: #008080;">110</span>                             <span style="color: #0000ff;">double</span><span style="color: #000000;"> p;
</span><span style="color: #008080;">111</span>                             p = rate / <span style="color: #800080;">12</span><span style="color: #000000;">;
</span><span style="color: #008080;">112</span>                             payMonth = (p * totalMoney * Math.Pow((<span style="color: #800080;">1</span> + p), n)) / ((Math.Pow(<span style="color: #800080;">1</span> + p, n) - <span style="color: #800080;">1</span><span style="color: #000000;">));
</span><span style="color: #008080;">113</span>                             <span style="color: #008000;">//</span><span style="color: #008000;">利息</span>
<span style="color: #008080;">114</span>                             interest = n *<span style="color: #000000;"> payMonth;
</span><span style="color: #008080;">115</span>                             <span style="color: #0000ff;">if</span> (n % <span style="color: #800080;">2</span> == <span style="color: #800080;">0</span><span style="color: #000000;">)
</span><span style="color: #008080;">116</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">117</span>                                 Console.ForegroundColor =<span style="color: #000000;"> ConsoleColor.Blue;
</span><span style="color: #008080;">118</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">119</span>                             <span style="color: #0000ff;">else</span>
<span style="color: #008080;">120</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">121</span>                                 Console.ForegroundColor =<span style="color: #000000;"> ConsoleColor.White;
</span><span style="color: #008080;">122</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">123</span>                             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">{0}期按揭贷款的月供是{1:0.00}元，总利息是{2:0.00}元</span><span style="color: #800000;">"</span><span style="color: #000000;">, n, payMonth, interest);
</span><span style="color: #008080;">124</span> 
<span style="color: #008080;">125</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">126</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">127</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">128</span>                 <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">2</span><span style="color: #800000;">"</span><span style="color: #000000;">:
</span><span style="color: #008080;">129</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">130</span>                         <span style="color: #008000;">//</span><span style="color: #008000;">等额本金，月供计算方法</span>
<span style="color: #008080;">131</span>                         <span style="color: #0000ff;">for</span> (n = <span style="color: #800080;">1</span>; n &lt;= <span style="color: #800080;">360</span>; n++<span style="color: #000000;">)
</span><span style="color: #008080;">132</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">133</span>                             <span style="color: #0000ff;">if</span> (n &lt;= <span style="color: #800080;">60</span><span style="color: #000000;">)
</span><span style="color: #008080;">134</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">135</span>                                 rate =<span style="color: #000000;"> lowRate;
</span><span style="color: #008080;">136</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">137</span>                             <span style="color: #0000ff;">else</span>
<span style="color: #008080;">138</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">139</span>                                 rate =<span style="color: #000000;"> highRate;
</span><span style="color: #008080;">140</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">141</span>                             <span style="color: #008000;">//</span><span style="color: #008000;">计算月供</span>
<span style="color: #008080;">142</span>                             <span style="color: #0000ff;">double</span><span style="color: #000000;"> p;
</span><span style="color: #008080;">143</span>                             p = rate / <span style="color: #800080;">12</span><span style="color: #000000;">;
</span><span style="color: #008080;">144</span>                             payMonth = (totalMoney / n) + totalMoney *<span style="color: #000000;"> p;
</span><span style="color: #008080;">145</span>                             interest = ((totalMoney / n + totalMoney * p) + totalMoney / n * (<span style="color: #800080;">1</span> + p)) / <span style="color: #800080;">2</span> * n -<span style="color: #000000;"> totalMoney;
</span><span style="color: #008080;">146</span>                             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">{0}期按揭贷款的首月还款额是{1:0.00}元,总利息是{2:0.00}元</span><span style="color: #800000;">"</span><span style="color: #000000;">, n, payMonth, interest);
</span><span style="color: #008080;">147</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">148</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">149</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">150</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">151</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">152</span> 
<span style="color: #008080;">153</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">154</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 月贷计算方法
</span><span style="color: #008080;">155</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">156</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;param name="n"&gt;</span><span style="color: #008000;">还款期数</span><span style="color: #808080;">&lt;/param&gt;</span>
<span style="color: #008080;">157</span>         <span style="color: #0000ff;">void</span> Compute(<span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
</span><span style="color: #008080;">158</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">159</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">期次\t\t偿还利息\t\t偿还本金\t\t还款额\t\t剩余本金</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">160</span>             <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (choice)
</span><span style="color: #008080;">161</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">162</span> 
<span style="color: #008080;">163</span>                 <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">1</span><span style="color: #800000;">"</span><span style="color: #000000;">:
</span><span style="color: #008080;">164</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">等额本息法计算房贷</span>
<span style="color: #008080;">165</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">166</span>                         <span style="color: #0000ff;">if</span> (n &lt;= <span style="color: #800080;">60</span><span style="color: #000000;">)
</span><span style="color: #008080;">167</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">168</span>                             rate =<span style="color: #000000;"> lowRate;
</span><span style="color: #008080;">169</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">170</span>                         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">171</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">172</span>                             rate =<span style="color: #000000;"> highRate;
</span><span style="color: #008080;">173</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">174</span> 
<span style="color: #008080;">175</span>                         <span style="color: #0000ff;">double</span><span style="color: #000000;"> p;
</span><span style="color: #008080;">176</span>                         p = rate / <span style="color: #800080;">12</span><span style="color: #000000;">;
</span><span style="color: #008080;">177</span>                         payMonth = (p * totalMoney * Math.Pow((<span style="color: #800080;">1</span> + p), n)) / ((Math.Pow(<span style="color: #800080;">1</span> + p, n) - <span style="color: #800080;">1</span><span style="color: #000000;">));
</span><span style="color: #008080;">178</span>                         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= n; i++<span style="color: #000000;">)
</span><span style="color: #008080;">179</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">180</span>                             <span style="color: #008000;">//</span><span style="color: #008000;">string s = i.ToString();</span>
<span style="color: #008080;">181</span>                             interest = totalMoney *<span style="color: #000000;"> p;
</span><span style="color: #008080;">182</span>                             <span style="color: #0000ff;">double</span> capital = payMonth -<span style="color: #000000;"> interest;
</span><span style="color: #008080;">183</span>                             totalMoney -=<span style="color: #000000;"> capital;
</span><span style="color: #008080;">184</span>                             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">{0}\t\t{1:0.00}\t\t{2:0.00}\t{3:0.00}\t{4:0.00}</span><span style="color: #800000;">"</span><span style="color: #000000;">, i, interest, capital, payMonth, totalMoney);
</span><span style="color: #008080;">185</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">186</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">187</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">188</span>                 <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">2</span><span style="color: #800000;">"</span><span style="color: #000000;">:
</span><span style="color: #008080;">189</span>                     <span style="color: #008000;">//</span><span style="color: #008000;">等额本金法计算房贷</span>
<span style="color: #008080;">190</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">191</span>                         <span style="color: #0000ff;">if</span> (n &lt;= <span style="color: #800080;">60</span><span style="color: #000000;">)
</span><span style="color: #008080;">192</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">193</span>                             rate =<span style="color: #000000;"> lowRate;
</span><span style="color: #008080;">194</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">195</span>                         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">196</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">197</span>                             rate =<span style="color: #000000;"> highRate;
</span><span style="color: #008080;">198</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">199</span>                         <span style="color: #0000ff;">double</span><span style="color: #000000;"> p;
</span><span style="color: #008080;">200</span>                         p = rate / <span style="color: #800080;">12</span><span style="color: #000000;">;
</span><span style="color: #008080;">201</span>                         <span style="color: #0000ff;">double</span> capital = totalMoney /<span style="color: #000000;"> n;
</span><span style="color: #008080;">202</span>                         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;= n; i++<span style="color: #000000;">)
</span><span style="color: #008080;">203</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">204</span> 
<span style="color: #008080;">205</span>                             interest = totalMoney *<span style="color: #000000;"> p;
</span><span style="color: #008080;">206</span>                             payMonth = capital +<span style="color: #000000;"> interest;
</span><span style="color: #008080;">207</span>                             totalMoney -=<span style="color: #000000;"> capital;
</span><span style="color: #008080;">208</span> 
<span style="color: #008080;">209</span>                             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">{0}\t\t{1:0.00}\t\t\t{2:0.00}\t\t{3:0.00}\t{4:0.00}</span><span style="color: #800000;">"</span><span style="color: #000000;">, i, interest, capital, payMonth, totalMoney);
</span><span style="color: #008080;">210</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">211</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">212</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">213</span> 
<span style="color: #008080;">214</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">215</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">216</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">217</span>         <span style="color: #808080;">///</span><span style="color: #008000;"> 计算还款状况
</span><span style="color: #008080;">218</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">219</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;param name="n0"&gt;</span><span style="color: #008000;">还款期数</span><span style="color: #808080;">&lt;/param&gt;</span>
<span style="color: #008080;">220</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;param name="dt"&gt;</span><span style="color: #008000;">首次还款时间</span><span style="color: #808080;">&lt;/param&gt;</span>
<span style="color: #008080;">221</span>         <span style="color: #0000ff;">void</span> Repayment(<span style="color: #0000ff;">int</span><span style="color: #000000;"> n0, DateTime dt)
</span><span style="color: #008080;">222</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">223</span>             balance =<span style="color: #000000;"> totalMoney;
</span><span style="color: #008080;">224</span>             DateTime dt0 =<span style="color: #000000;"> dt;
</span><span style="color: #008080;">225</span>             <span style="color: #0000ff;">double</span><span style="color: #000000;"> rate0;
</span><span style="color: #008080;">226</span>             <span style="color: #0000ff;">double</span><span style="color: #000000;"> capital;
</span><span style="color: #008080;">227</span>             <span style="color: #0000ff;">double</span><span style="color: #000000;"> p;
</span><span style="color: #008080;">228</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">还款时间\t\t偿还利息\t\t偿还本金\t\t还款额\t\t剩余本金</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">229</span>             <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (choice)
</span><span style="color: #008080;">230</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">231</span>                 <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">1</span><span style="color: #800000;">"</span><span style="color: #000000;">:
</span><span style="color: #008080;">232</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">233</span>                         
<span style="color: #008080;">234</span> <span style="color: #000000;">                        RateChoose(dt0);
</span><span style="color: #008080;">235</span>                         <span style="color: #0000ff;">if</span> (n0 &lt;= <span style="color: #800080;">60</span><span style="color: #000000;">)
</span><span style="color: #008080;">236</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">237</span>                             rate0 =<span style="color: #000000;"> lowRate;
</span><span style="color: #008080;">238</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">239</span>                         <span style="color: #0000ff;">else</span>
<span style="color: #008080;">240</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">241</span>                             rate0 =<span style="color: #000000;"> highRate;
</span><span style="color: #008080;">242</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">243</span>                         n =<span style="color: #000000;"> n0;
</span><span style="color: #008080;">244</span>                         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">1</span>; i &lt;=n0; i++<span style="color: #000000;">)
</span><span style="color: #008080;">245</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">246</span> <span style="color: #000000;">                            RateChoose(dt);
</span><span style="color: #008080;">247</span>                             rate = (n0 &lt;= <span style="color: #800080;">60</span> ?<span style="color: #000000;"> lowRate : highRate);
</span><span style="color: #008080;">248</span>                             
<span style="color: #008080;">249</span>                             <span style="color: #0000ff;">if</span> (dt.Year != dt0.Year &amp;&amp; rate != rate0)<span style="color: #008000;">//</span><span style="color: #008000;">这里应该有问题？</span>
<span style="color: #008080;">250</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">251</span>                                 <span style="color: #0000ff;">double</span> p0 = rate0 / <span style="color: #800080;">12</span><span style="color: #000000;">;
</span><span style="color: #008080;">252</span>                                 <span style="color: #0000ff;">double</span> payMonth0= (p0 * totalMoney * Math.Pow((<span style="color: #800080;">1</span> + p0), n)) / ((Math.Pow(<span style="color: #800080;">1</span> + p0, n) - <span style="color: #800080;">1</span><span style="color: #000000;">));
</span><span style="color: #008080;">253</span>                                 <span style="color: #0000ff;">double</span> interest0 = balance *<span style="color: #000000;"> p0;
</span><span style="color: #008080;">254</span>                                 <span style="color: #0000ff;">double</span> capital0 = payMonth0 -<span style="color: #000000;"> interest0;
</span><span style="color: #008080;">255</span>                                 
<span style="color: #008080;">256</span>                                 rate0 =<span style="color: #000000;"> rate;
</span><span style="color: #008080;">257</span>                                
<span style="color: #008080;">258</span>                                 interest = balance * (rate0/<span style="color: #800080;">12</span><span style="color: #000000;">);
</span><span style="color: #008080;">259</span>                                 totalMoney =<span style="color: #000000;"> balance;
</span><span style="color: #008080;">260</span>                                 balance -=<span style="color: #000000;"> capital0;
</span><span style="color: #008080;">261</span>                                
<span style="color: #008080;">262</span>                                 payMonth = capital0 +<span style="color: #000000;"> interest;
</span><span style="color: #008080;">263</span>                                 n =n0 - i+<span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">264</span>                                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">{0}\t{1:0.00}\t\t\t{2:0.00}\t\t\t{3:0.00}\t\t{4:0.00}</span><span style="color: #800000;">"</span><span style="color: #000000;">, dt, interest, capital0, payMonth, balance);
</span><span style="color: #008080;">265</span>                                 dt = dt.AddMonths(<span style="color: #800080;">1</span><span style="color: #000000;">);
</span><span style="color: #008080;">266</span>                                 <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">267</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">268</span> 
<span style="color: #008080;">269</span> 
<span style="color: #008080;">270</span>                            
<span style="color: #008080;">271</span>                             p = rate0 / <span style="color: #800080;">12</span><span style="color: #000000;">;
</span><span style="color: #008080;">272</span>                             payMonth = (p * totalMoney * Math.Pow((<span style="color: #800080;">1</span> + p), n)) / ((Math.Pow(<span style="color: #800080;">1</span> + p, n) - <span style="color: #800080;">1</span><span style="color: #000000;">));
</span><span style="color: #008080;">273</span> 
<span style="color: #008080;">274</span>                             interest = balance *<span style="color: #000000;"> p;
</span><span style="color: #008080;">275</span>                              capital = payMonth -<span style="color: #000000;"> interest;
</span><span style="color: #008080;">276</span>                             balance -=<span style="color: #000000;"> capital;
</span><span style="color: #008080;">277</span>                             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">{0}\t{1:0.00}\t\t\t{2:0.00}\t\t\t{3:0.00}\t\t{4:0.00}</span><span style="color: #800000;">"</span><span style="color: #000000;">, dt, interest, capital, payMonth, balance);
</span><span style="color: #008080;">278</span>                             dt = dt.AddMonths(<span style="color: #800080;">1</span><span style="color: #000000;">);
</span><span style="color: #008080;">279</span> 
<span style="color: #008080;">280</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">281</span> 
<span style="color: #008080;">282</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">283</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">284</span>                 <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">2</span><span style="color: #800000;">"</span><span style="color: #000000;">:
</span><span style="color: #008080;">285</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">286</span> <span style="color: #000000;">                        RateChoose(dt0);
</span><span style="color: #008080;">287</span>                         rate0 = (n0 &lt;= <span style="color: #800080;">60</span> ?<span style="color: #000000;"> lowRate : highRate);
</span><span style="color: #008080;">288</span>                         n =<span style="color: #000000;"> n0;
</span><span style="color: #008080;">289</span>                         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; n0; i++<span style="color: #000000;">)
</span><span style="color: #008080;">290</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">291</span> <span style="color: #000000;">                            RateChoose(dt);
</span><span style="color: #008080;">292</span>                             rate = (n0 &lt;= <span style="color: #800080;">60</span> ?<span style="color: #000000;"> lowRate : highRate);
</span><span style="color: #008080;">293</span>                             <span style="color: #0000ff;">if</span> (dt.Year!=dt0.Year&amp;&amp;rate!=<span style="color: #000000;">rate0)
</span><span style="color: #008080;">294</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">295</span>                                 rate0 =<span style="color: #000000;"> rate;
</span><span style="color: #008080;">296</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">297</span>                             p = rate0 / <span style="color: #800080;">12</span><span style="color: #000000;">;
</span><span style="color: #008080;">298</span>                             capital = totalMoney /<span style="color: #000000;"> n0;
</span><span style="color: #008080;">299</span>                             interest = balance *<span style="color: #000000;"> p;
</span><span style="color: #008080;">300</span>                             payMonth = capital +<span style="color: #000000;"> interest;
</span><span style="color: #008080;">301</span>                             balance -=<span style="color: #000000;"> capital;
</span><span style="color: #008080;">302</span>                             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">{0}\t{1:0.00}\t\t\t{2:0.00}\t\t\t{3:0.00}\t\t{4:0.00}</span><span style="color: #800000;">"</span><span style="color: #000000;">, dt, interest, capital, payMonth, balance);
</span><span style="color: #008080;">303</span>                             dt = dt.AddMonths(<span style="color: #800080;">1</span><span style="color: #000000;">);
</span><span style="color: #008080;">304</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">305</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">306</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">307</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">308</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">309</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">310</span>         <span style="color: #808080;">///</span><span style="color: #008000;">实现提前还款功能
</span><span style="color: #008080;">311</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">312</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;param name="n"&gt;</span><span style="color: #008000;">还款总期数</span><span style="color: #808080;">&lt;/param&gt;</span>
<span style="color: #008080;">313</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;param name="dt1"&gt;</span><span style="color: #008000;">首次还款时间</span><span style="color: #808080;">&lt;/param&gt;</span>
<span style="color: #008080;">314</span>         <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;param name="dt2"&gt;</span><span style="color: #008000;">提前还款时间</span><span style="color: #808080;">&lt;/param&gt;</span>
<span style="color: #008080;">315</span>         <span style="color: #0000ff;">void</span> Prepayment(<span style="color: #0000ff;">int</span> n0,DateTime dt1,DateTime dt2,<span style="color: #0000ff;">double</span><span style="color: #000000;"> money)
</span><span style="color: #008080;">316</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">317</span>             balance =<span style="color: #000000;"> totalMoney;
</span><span style="color: #008080;">318</span>             DateTime dt0 =<span style="color: #000000;"> dt1;
</span><span style="color: #008080;">319</span>             <span style="color: #0000ff;">double</span><span style="color: #000000;"> rate0;
</span><span style="color: #008080;">320</span>             <span style="color: #0000ff;">double</span><span style="color: #000000;"> capital;
</span><span style="color: #008080;">321</span>             <span style="color: #0000ff;">double</span><span style="color: #000000;"> p;
</span><span style="color: #008080;">322</span>             <span style="color: #0000ff;">bool</span> flag = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">323</span>             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">还款时间\t\t偿还利息\t\t偿还本金\t\t还款额\t\t剩余本金</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">324</span>             <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (choice)
</span><span style="color: #008080;">325</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">326</span>                 <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">1</span><span style="color: #800000;">"</span><span style="color: #000000;">:
</span><span style="color: #008080;">327</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">328</span> <span style="color: #000000;">                        RateChoose(dt0);
</span><span style="color: #008080;">329</span>                         rate0 = (n0 &lt;= <span style="color: #800080;">60</span> ?<span style="color: #000000;"> lowRate : highRate);
</span><span style="color: #008080;">330</span>                         n =<span style="color: #000000;"> n0;
</span><span style="color: #008080;">331</span>                         <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">1</span>;i&lt;=n0;i++<span style="color: #000000;">)
</span><span style="color: #008080;">332</span> <span style="color: #000000;">                        {
</span><span style="color: #008080;">333</span> <span style="color: #000000;">                            RateChoose(dt1);
</span><span style="color: #008080;">334</span>                             rate = (n0 &lt;= <span style="color: #800080;">60</span> ?<span style="color: #000000;"> lowRate : highRate);
</span><span style="color: #008080;">335</span>                            
<span style="color: #008080;">336</span> 
<span style="color: #008080;">337</span>                             <span style="color: #0000ff;">if</span> (dt1.Year != dt0.Year &amp;&amp; rate != rate0)<span style="color: #008000;">//</span><span style="color: #008000;">这里应该有问题？</span>
<span style="color: #008080;">338</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">339</span>                                 <span style="color: #0000ff;">double</span> p0 = rate0 / <span style="color: #800080;">12</span><span style="color: #000000;">;
</span><span style="color: #008080;">340</span>                                 <span style="color: #0000ff;">double</span> payMonth0 = (p0 * totalMoney * Math.Pow((<span style="color: #800080;">1</span> + p0), n)) / ((Math.Pow(<span style="color: #800080;">1</span> + p0, n) - <span style="color: #800080;">1</span><span style="color: #000000;">));
</span><span style="color: #008080;">341</span>                                 <span style="color: #0000ff;">double</span> interest0 = balance *<span style="color: #000000;"> p0;
</span><span style="color: #008080;">342</span>                                 <span style="color: #0000ff;">double</span> capital0 = payMonth0 -<span style="color: #000000;"> interest0;
</span><span style="color: #008080;">343</span> 
<span style="color: #008080;">344</span>                                 rate0 =<span style="color: #000000;"> rate;
</span><span style="color: #008080;">345</span> 
<span style="color: #008080;">346</span>                                 interest = balance * (rate0 / <span style="color: #800080;">12</span><span style="color: #000000;">);
</span><span style="color: #008080;">347</span>                                 totalMoney =<span style="color: #000000;"> balance;
</span><span style="color: #008080;">348</span>                                 balance -=<span style="color: #000000;"> capital0;
</span><span style="color: #008080;">349</span> 
<span style="color: #008080;">350</span>                                 payMonth = capital0 +<span style="color: #000000;"> interest;
</span><span style="color: #008080;">351</span>                                 n = n0 - i + <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">352</span>                                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">{0}\t{1:0.00}\t\t\t{2:0.00}\t\t\t{3:0.00}\t\t{4:0.00}</span><span style="color: #800000;">"</span><span style="color: #000000;">, dt1, interest, capital0, payMonth, balance);
</span><span style="color: #008080;">353</span>                                 dt1 = dt1.AddMonths(<span style="color: #800080;">1</span><span style="color: #000000;">);
</span><span style="color: #008080;">354</span>                                 <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
</span><span style="color: #008080;">355</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">356</span> 
<span style="color: #008080;">357</span> 
<span style="color: #008080;">358</span> 
<span style="color: #008080;">359</span>                             p = rate0 / <span style="color: #800080;">12</span><span style="color: #000000;">;
</span><span style="color: #008080;">360</span>                             <span style="color: #0000ff;">if</span> (dt2.Year == dt1.Year &amp;&amp; dt2.Month ==<span style="color: #000000;"> dt1.Month)
</span><span style="color: #008080;">361</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">362</span>                                 balance -=<span style="color: #000000;"> money;
</span><span style="color: #008080;">363</span>                                 totalMoney =<span style="color: #000000;"> balance;
</span><span style="color: #008080;">364</span>                                 <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (newChoice)
</span><span style="color: #008080;">365</span> <span style="color: #000000;">                                {
</span><span style="color: #008080;">366</span>                                     <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">1</span><span style="color: #800000;">"</span><span style="color: #000000;">:
</span><span style="color: #008080;">367</span> <span style="color: #000000;">                                        {
</span><span style="color: #008080;">368</span> 
<span style="color: #008080;">369</span>                                             n = n0 - i + <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">370</span>                                             flag = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">371</span> <span style="color: #000000;">                                        }
</span><span style="color: #008080;">372</span>                                         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">373</span>                                     <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">2</span><span style="color: #800000;">"</span><span style="color: #000000;">:
</span><span style="color: #008080;">374</span> <span style="color: #000000;">                                        {
</span><span style="color: #008080;">375</span>                                             <span style="color: #0000ff;">double</span> temp = Math.Log((payMonth / (payMonth - totalMoney * p)), (<span style="color: #800080;">1</span> +<span style="color: #000000;"> p));
</span><span style="color: #008080;">376</span>                                             n= (<span style="color: #0000ff;">int</span><span style="color: #000000;">)Math.Ceiling(temp);
</span><span style="color: #008080;">377</span>                                             n0 = n + i - <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">378</span> <span style="color: #000000;">                                        }
</span><span style="color: #008080;">379</span>                                         <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">380</span> <span style="color: #000000;">                                }
</span><span style="color: #008080;">381</span> 
<span style="color: #008080;">382</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">383</span>                             payMonth = (p * totalMoney * Math.Pow((<span style="color: #800080;">1</span> + p), n)) / ((Math.Pow(<span style="color: #800080;">1</span> + p, n) - <span style="color: #800080;">1</span><span style="color: #000000;">));
</span><span style="color: #008080;">384</span>                             
<span style="color: #008080;">385</span> 
<span style="color: #008080;">386</span>                             interest = balance *<span style="color: #000000;"> p;
</span><span style="color: #008080;">387</span>                             capital = payMonth -<span style="color: #000000;"> interest;
</span><span style="color: #008080;">388</span>                             balance -=<span style="color: #000000;"> capital;
</span><span style="color: #008080;">389</span>                             <span style="color: #0000ff;">if</span><span style="color: #000000;"> (flag)
</span><span style="color: #008080;">390</span> <span style="color: #000000;">                            {
</span><span style="color: #008080;">391</span>                                 payMonth +=<span style="color: #000000;"> money;
</span><span style="color: #008080;">392</span>                                 capital +=<span style="color: #000000;"> money;
</span><span style="color: #008080;">393</span>                                 flag = <span style="color: #0000ff;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">394</span> <span style="color: #000000;">                            }
</span><span style="color: #008080;">395</span>                             Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">{0}\t{1:0.00}\t\t\t{2:0.00}\t\t\t{3:0.00}\t\t{4:0.00}</span><span style="color: #800000;">"</span><span style="color: #000000;">, dt1, interest, capital, payMonth, balance);
</span><span style="color: #008080;">396</span>                             dt1 = dt1.AddMonths(<span style="color: #800080;">1</span><span style="color: #000000;">);
</span><span style="color: #008080;">397</span> <span style="color: #000000;">                        }
</span><span style="color: #008080;">398</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">399</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">400</span>                 <span style="color: #0000ff;">case</span> <span style="color: #800000;">"</span><span style="color: #800000;">2</span><span style="color: #800000;">"</span><span style="color: #000000;">:
</span><span style="color: #008080;">401</span> <span style="color: #000000;">                    {
</span><span style="color: #008080;">402</span> 
<span style="color: #008080;">403</span> <span style="color: #000000;">                    }
</span><span style="color: #008080;">404</span>                     <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">405</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">406</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">407</span>         <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> Main(<span style="color: #0000ff;">string</span><span style="color: #000000;">[] args)
</span><span style="color: #008080;">408</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">409</span> 
<span style="color: #008080;">410</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">411</span>                 Program p = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Program();
</span><span style="color: #008080;">412</span> <span style="color: #000000;">                p.Paint();
</span><span style="color: #008080;">413</span>                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">请选择您的操作！1.房贷计算 2.月供速算 3.还款状况 4.提前还款</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">414</span>                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">请选择您的还款方式？1.等额本息 2.等额本金</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">415</span>                 choice =<span style="color: #000000;"> Console.ReadLine();
</span><span style="color: #008080;">416</span>                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">请输入你的贷款金额</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">417</span>                 totalMoney =<span style="color: #000000;"> Convert.ToDouble(Console.ReadLine());
</span><span style="color: #008080;">418</span>                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">请输入您贷款的期数</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">419</span>                 <span style="color: #0000ff;">int</span> number =<span style="color: #000000;"> Convert.ToInt32(Console.ReadLine());
</span><span style="color: #008080;">420</span>                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">请输入你的首次贷款时间</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">421</span>                 DateTime dT =<span style="color: #000000;"> Convert.ToDateTime(Console.ReadLine());
</span><span style="color: #008080;">422</span>                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">请输入你的提前还款时间</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">423</span>                 DateTime dTR =<span style="color: #000000;"> Convert.ToDateTime(Console.ReadLine());
</span><span style="color: #008080;">424</span>                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">请输入你的还款金额</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">425</span>                 <span style="color: #0000ff;">double</span> partMoney =<span style="color: #000000;"> Convert.ToDouble(Console.ReadLine());
</span><span style="color: #008080;">426</span>                 Console.WriteLine(<span style="color: #800000;">"</span><span style="color: #800000;">请选择你要的后续操作！1.减少月供 2.缩短年限</span><span style="color: #800000;">"</span><span style="color: #000000;">);
</span><span style="color: #008080;">427</span>                  newChoice =<span style="color: #000000;"> Console.ReadLine();
</span><span style="color: #008080;">428</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">Console.WriteLine("你输入的日期是{0}，短期利率是{1}，长期利率是{2}",dT,p.lowRate,p.highRate);
</span><span style="color: #008080;">429</span>                 <span style="color: #008000;">//</span><span style="color: #008000;">dT= dT.AddMonths(1);
</span><span style="color: #008080;">430</span>                 <span style="color: #008000;">//</span><span style="color: #008000;"> Console.WriteLine(dT);
</span><span style="color: #008080;">431</span>                 <span style="color: #008000;">//</span><span style="color: #008000;"> p.Repayment(number, dT);
</span><span style="color: #008080;">432</span>                 <span style="color: #008000;">//</span><span style="color: #008000;"> p.Compute(number);
</span><span style="color: #008080;">433</span>                 <span style="color: #008000;">//</span><span style="color: #008000;"> p.Payment(dTR);</span>
<span style="color: #008080;">434</span> <span style="color: #000000;">                p.Prepayment(number, dT, dTR, partMoney);
</span><span style="color: #008080;">435</span> <span style="color: #000000;">                Console.ReadKey();
</span><span style="color: #008080;">436</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">437</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">438</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">439</span> }</pre>
</div>
<p>&nbsp; &nbsp; 经过两三天的修改，代码进一步完善。但是鉴于自己水平有限，代码错误之处在所难免。不足之处，希望大家提出宝贵意见，使代码进一步完善。</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>