<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修记录一次排查使用HttpWebRequest发送请求的发生“基础连接已关闭：接收时发生错误”异常问题的过程' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>记录一次排查使用HttpWebRequest发送请求的发生“基础连接已关闭：接收时发生错误”异常问题的过程</center></div><div class='banquan'>原文出处:本文由博客园博主Jichan&#183;Jong提供。<br/>
原文连接:https://www.cnblogs.com/godbell/p/11756291.html</div><br>
    <p><span style="font-size: 18px;">描述：某次更新程序，需要给测试员MM测试，之前都是正常的，更新后给MM测试就报异常System.Net.WebException 基础连接已经关闭：接收时发生错误 -------&gt; System.IO.IOException：</span></p>
<p><span style="font-size: 18px;">无法从传输连接中读取数据：你的主机中的软件中止了一个已建立的连接。</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 18px;">排查第一步：首先用自己的电脑测试，发现没有问题；但是在测试员MM的电脑上就有问题，于是问题定位可能出现在MM电脑环境本身上。</span></p>
<p><span style="font-size: 18px;">排查第二步：因为程序有记录了错误日志，于是打开MM电脑的日志查看，错误堆栈如下：</span></p>
<p><span style="font-size: 18px;"><img src="./images/记录一次排查使用HttpWebRequest发送请求的发生“基础连接已关闭：接收时发生错误”异常问题的过程0.png" alt="" /></span></p>
<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;">排查第三步： 各种搜索引擎查找资料，尝试过将httpWebRequest的KeepAlive属性设置为false，<span style="color: #000000;">并且同时设置&nbsp;<code>System.Net.ServicePointManager.Expect100Continue = false;</code></span></span><span style="font-size: 18px;">编译更新后重新测试依然还是有同样的错误。</span></p>
<p><span style="font-size: 18px;">至此，实在没有办法，因MM电脑是笔记本，使用的是Wifi，且自己的电脑是台式机使用有线网络，于是猜测是由于问题出在Wifi上（后来事实证明，这种猜测是不对的），于是请网络维护人员检查网络，得到的回复是&ldquo;网络本身没有问题&rdquo;。</span></p>
<p><span style="font-size: 18px;">于是陷入了沉思当中，后来再试时无意中发现有右下角有一个&ldquo;盾牌&rdquo;的图标（Win10的Windows Defender），关闭实时防护就解决了问题。</span></p>
<p><span style="font-size: 18px;">以上只是某种特殊的处理方式，相同的异常并非所有的情况都是相同的处理方式，具体问题需要具体分析，也希望能帮助到遇到同样问题是同样原因导致的人。</span></p>
<p><img src="./images/记录一次排查使用HttpWebRequest发送请求的发生“基础连接已关闭：接收时发生错误”异常问题的过程1.png" alt="" /></p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>